import{i as useLayoutStore,j as useTexts,k as useBreadcrumbStore,B as Breadcrumb,U as UserTerminal,_ as _export_sfc,l as __unplugin_components_0}from"./index-ae9c3219.js";import{c as computed,b as onMounted,o as onUnmounted,a4 as useRoute,d as defineComponent,a3 as useRouter,E as resolveComponent,z as openBlock,A as createBlock,I as createElementBlock,a0 as createBaseVNode,u as unref,f as createVNode,Q as normalizeStyle,R as normalizeClass,K as createCommentVNode,N as resolveDynamicComponent,ak as normalizeProps,am as guardReactiveProps}from"./vue-vendor-31320f47.js";import{F as FolderBreadcrumb}from"./FolderBreadcrumb-9a556665.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";function useLayoutManager(){const route=useRoute(),layoutStore=useLayoutStore(),isTopLayout=computed(()=>layoutStore.isTopLayout),isLeftLayout=computed(()=>layoutStore.isLeftLayout),layoutClasses=computed(()=>layoutStore.layoutClasses),isFullWidthPage=computed(()=>["/","/home","/random","/explore"].includes(route.path)),isHomePage=computed(()=>route.path==="/"),isDocsPage=computed(()=>route.path.startsWith("/docs")),mainContentStyle=computed(()=>{const baseStyle={paddingTop:getPaddingTop()};return isLeftLayout.value?{...baseStyle,...layoutStore.containerStyle}:baseStyle});function getPaddingTop(){return isLeftLayout.value?route.path==="/"||route.path==="/random"?"64px":"60px":route.path==="/"?"20px":route.path==="/random"?"0px":"4.5rem"}function handleResize(){layoutStore.handleResize(window.innerWidth)}return onMounted(()=>{window.addEventListener("resize",handleResize),handleResize()}),onUnmounted(()=>{window.removeEventListener("resize",handleResize)}),{isTopLayout,isLeftLayout,layoutClasses,isFullWidthPage,isHomePage,isDocsPage,mainContentStyle,toggleLayout:layoutStore.toggleLayoutMode,toggleSidebar:layoutStore.toggleSidebar}}const _sfc_main$5=defineComponent({__name:"LayoutTopNavigation",setup(__props){const router=useRouter(),redirectToAuth=()=>{router.push("/auth")};return(_ctx,_cache)=>{const _component_cyberNavbar=resolveComponent("cyberNavbar");return openBlock(),createBlock(_component_cyberNavbar,{onLogin:redirectToAuth})}}});function useFolderBreadcrumb(){const router=useRouter();return{handleBreadcrumbClick:item=>{if(item.isSpecial&&item.id==="home"){router.replace("/dashboard");return}if(item.id===null){router.replace("/folders");return}if(item.id){router.replace(`/folders/${item.id}`);return}item.path&&router.replace(item.path)}}}const _hoisted_1$2={class:"topbar-left"},_hoisted_2={class:"topbar-right"},_sfc_main$4=defineComponent({name:"SidebarTopbar",__name:"SidebarTopbar",emits:["login"],setup(__props,{emit:__emit}){const emit=__emit,{$t}=useTexts(),route=useRoute(),layoutStore=useLayoutStore(),breadcrumbStore=useBreadcrumbStore(),{handleBreadcrumbClick}=useFolderBreadcrumb(),topbarStyle=computed(()=>({left:`${layoutStore.currentSidebarWidth}px`,right:0})),isFoldersPage=computed(()=>route.name==="folders"||route.name==="foldersWithPath"),foldersBreadcrumbItems=computed(()=>{if(!isFoldersPage.value)return[];const items=[];return items.push({id:"home",name:$t("components.sidebar.topbar.home"),isSpecial:!0}),items.push({id:null,name:$t("components.sidebar.topbar.myFolders")}),breadcrumbStore.items.length>0&&items.push(...breadcrumbStore.items),items}),handleLogin=()=>{emit("login")};return(_ctx,_cache)=>(openBlock(),createElementBlock("div",{class:"sidebar-topbar",style:normalizeStyle(topbarStyle.value)},[createBaseVNode("div",_hoisted_1$2,[isFoldersPage.value?(openBlock(),createBlock(FolderBreadcrumb,{key:0,items:foldersBreadcrumbItems.value,"show-icon":!1,"auto-add-root":!1,onClick:unref(handleBreadcrumbClick)},null,8,["items","onClick"])):(openBlock(),createBlock(Breadcrumb,{key:1}))]),createBaseVNode("div",_hoisted_2,[createVNode(UserTerminal,{"mobile-menu-open":!1,onLogin:handleLogin,onToggleMobileMenu:()=>{}})])],4))}});const SidebarTopbar=_export_sfc(_sfc_main$4,[["__scopeId","data-v-bbc11e62"]]),_hoisted_1$1={class:"side-navigation"},_sfc_main$3=defineComponent({__name:"LayoutSideNavigation",setup(__props){const router=useRouter(),redirectToAuth=()=>{router.push("/auth")};return(_ctx,_cache)=>{const _component_cyberSidebar=resolveComponent("cyberSidebar");return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(_component_cyberSidebar),createVNode(SidebarTopbar,{onLogin:redirectToAuth})])}}});const LayoutSideNavigation=_export_sfc(_sfc_main$3,[["__scopeId","data-v-dac3e81c"]]),_hoisted_1={class:"admin-content-container"},_sfc_main$2=defineComponent({__name:"AdminContentContainer",setup(__props){const route=useRoute();return(_ctx,_cache)=>{const _component_router_view=resolveComponent("router-view");return openBlock(),createElementBlock("div",_hoisted_1,[(openBlock(),createElementBlock("div",{key:unref(route).path,class:"page-transition admin-page-content"},[createVNode(_component_router_view)]))])}}});const AdminContentContainer=_export_sfc(_sfc_main$2,[["__scopeId","data-v-58d54fa3"]]),_sfc_main$1=defineComponent({__name:"TopContentContainer",setup(__props){const route=useRoute(),isFullWidthPage=computed(()=>["/","/home","/random","/explore"].includes(route.path)),isDocsPage=computed(()=>route.path.startsWith("/docs")),pageContainerClasses=computed(()=>({"page-container":!0,"full-width":isFullWidthPage.value,"docs-container":isDocsPage.value})),routeContainerClasses=computed(()=>({"page-transition":!0,"main-route-container":!0,"container mx-auto":!isFullWidthPage.value&&!isDocsPage.value}));return(_ctx,_cache)=>{const _component_router_view=resolveComponent("router-view");return openBlock(),createElementBlock("div",{class:normalizeClass(pageContainerClasses.value)},[(openBlock(),createElementBlock("div",{key:unref(route).path,class:normalizeClass(routeContainerClasses.value)},[createVNode(_component_router_view)],2))],2)}}});const TopContentContainer=_export_sfc(_sfc_main$1,[["__scopeId","data-v-8a4d6501"]]),_sfc_main=defineComponent({__name:"MainLayout",setup(__props){const route=useRoute(),{isTopLayout,isLeftLayout,layoutClasses,isFullWidthPage,isDocsPage,mainContentStyle}=useLayoutManager(),mainContentClasses=computed(()=>({"full-width-content":isFullWidthPage.value,"docs-content":isDocsPage.value,"content-with-sidebar":isLeftLayout.value,"admin-style-content":isLeftLayout.value})),contentComponent=computed(()=>isLeftLayout.value?AdminContentContainer:TopContentContainer),backgroundProps=computed(()=>{const path=route.path;return route.name==="home"||path==="/"||path==="/home"?{showEnhancedEffects:!0,showDigitalRain:!0,showRedOrb:!0,showAurora:!0}:{showEnhancedEffects:!1,showDigitalRain:!1,showRedOrb:!1,showAurora:!1}});return(_ctx,_cache)=>{const _component_CyberHomeBackground=__unplugin_components_0;return openBlock(),createElementBlock("div",{class:normalizeClass(["main-layout",unref(layoutClasses)])},[unref(isTopLayout)?(openBlock(),createBlock(_sfc_main$5,{key:0})):createCommentVNode("",!0),unref(isLeftLayout)?(openBlock(),createBlock(LayoutSideNavigation,{key:1})):createCommentVNode("",!0),createBaseVNode("main",{class:normalizeClass(["main-content",mainContentClasses.value]),style:normalizeStyle(unref(mainContentStyle))},[(openBlock(),createBlock(resolveDynamicComponent(contentComponent.value)))],6),createVNode(_component_CyberHomeBackground,normalizeProps(guardReactiveProps(backgroundProps.value)),null,16)],2)}}});const MainLayout=_export_sfc(_sfc_main,[["__scopeId","data-v-9e3652d7"]]);export{MainLayout as default};
