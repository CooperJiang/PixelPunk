import{ai as post}from"./index-ac67a30c.js";function testMailServer(params){return post("/settings/test-mail",params)}const mailDefaults=[{key:"smtp_host",value:"smtp.example.com",type:"string",group:"mail",description:"SMTP服务器",is_system:!0},{key:"smtp_port",value:"587",type:"number",group:"mail",description:"SMTP端口",is_system:!0},{key:"smtp_encryption",value:"tls",type:"string",group:"mail",description:"加密类型",is_system:!0},{key:"smtp_username",value:"noreply@example.com",type:"string",group:"mail",description:"SMTP用户名",is_system:!0},{key:"smtp_password",value:"",type:"string",group:"mail",description:"SMTP密码",is_system:!0},{key:"smtp_from_address",value:"noreply@example.com",type:"string",group:"mail",description:"发件人地址",is_system:!0},{key:"smtp_from_name",value:"PixelPunk",type:"string",group:"mail",description:"发件人名称",is_system:!0}];function testAIConfig(config){return config?post("/admin/ai/test-config",config):post("/admin/ai/test-config")}function checkAIConfiguration(settings){if(!settings||settings.length===0)return{isConfigured:!1,missingFields:["ai_api_key","ai_model"],hasApiKey:!1,hasModel:!1};const settingsMap=settings.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),missingFields=[],hasApiKey=!!(settingsMap.ai_api_key&&settingsMap.ai_api_key.toString().trim());hasApiKey||missingFields.push("ai_api_key");const hasModel=!!(settingsMap.ai_model&&settingsMap.ai_model.toString().trim());return hasModel||missingFields.push("ai_model"),{isConfigured:missingFields.length===0,missingFields,hasApiKey,hasModel}}const aiDefaults=[{key:"ai_enabled",value:!1,type:"boolean",group:"ai",description:"启用AI功能",is_system:!0},{key:"ai_proxy",value:"",type:"string",group:"ai",description:"代理地址",is_system:!0},{key:"ai_model",value:"gpt-3.5-turbo",type:"string",group:"ai",description:"模型选择",is_system:!0},{key:"ai_api_key",value:"",type:"string",group:"ai",description:"API密钥",is_system:!0},{key:"ai_temperature",value:.7,type:"number",group:"ai",description:"温度值",is_system:!0},{key:"ai_max_tokens",value:2e3,type:"number",group:"ai",description:"最大生成令牌数",is_system:!0},{key:"ai_concurrency",value:5,type:"number",group:"ai",description:"AI文件识别并发处理数量",is_system:!0}];function testVectorConfig(params){return post("/settings/vector/test",params)}function testQdrantConnection(params){return post("/settings/vector/test-qdrant",params)}function regenerateVectors(params){return post("/search/vector/regenerate",null,{params})}const vectorDefaults=[{key:"vector_enabled",value:!1,type:"boolean",group:"vector",description:"启用向量搜索功能",is_system:!0},{key:"vector_provider",value:"openai",type:"string",group:"vector",description:"向量化提供者",is_system:!0},{key:"vector_model",value:"text-embedding-3-small",type:"string",group:"vector",description:"向量化模型",is_system:!0},{key:"vector_api_key",value:"",type:"string",group:"vector",description:"OpenAI API密钥",is_system:!0},{key:"vector_base_url",value:"https://api.openai.com/v1",type:"string",group:"vector",description:"OpenAI API代理地址",is_system:!0},{key:"vector_timeout",value:30,type:"number",group:"vector",description:"API调用超时时间(秒)",is_system:!0},{key:"vector_similarity_threshold",value:.3,type:"number",group:"vector",description:"相似度阈值(0-1)",is_system:!0},{key:"vector_max_results",value:50,type:"number",group:"vector",description:"最大搜索结果数",is_system:!0},{key:"vector_concurrency",value:3,type:"number",group:"vector",description:"向量生成并发数量",is_system:!0}];function getWebsiteDefaults($t){return[{key:"admin_email",value:"admin@example.com",type:"string",group:"website",description:$t("api.settingsDefaults.website.admin_email"),is_system:!0},{key:"site_base_url",value:"",type:"string",group:"website",description:$t("api.settingsDefaults.website.site_base_url"),is_system:!0}]}const websiteDefaults=[{key:"admin_email",value:"admin@example.com",type:"string",group:"website",description:"管理员邮箱",is_system:!0},{key:"site_base_url",value:"",type:"string",group:"website",description:"网站基础URL",is_system:!0}],websiteInfoDefaults=[],registrationDefaults=[{key:"enable_registration",value:!0,type:"boolean",group:"registration",description:"开放注册",is_system:!0},{key:"email_verification",value:!0,type:"boolean",group:"registration",description:"邮箱验证",is_system:!0},{key:"user_initial_storage",value:100,type:"number",group:"registration",description:"新用户默认存储空间(MB)",is_system:!0},{key:"user_initial_bandwidth",value:1024,type:"number",group:"registration",description:"新用户默认带宽流量(MB)",is_system:!0}],securityDefaults=[{key:"max_login_attempts",value:5,type:"number",group:"security",description:"最大登录尝试次数",is_system:!0},{key:"account_lockout_minutes",value:30,type:"number",group:"security",description:"账户锁定分钟数",is_system:!0},{key:"login_expire_hours",value:240,type:"number",group:"security",description:"登录有效期",is_system:!0},{key:"jwt_secret",value:"",type:"string",group:"security",description:"登录安全密钥",is_system:!0},{key:"ip_whitelist",value:"",type:"string",group:"security",description:"IP白名单",is_system:!0},{key:"ip_blacklist",value:"",type:"string",group:"security",description:"IP黑名单",is_system:!0},{key:"domain_whitelist",value:"",type:"string",group:"security",description:"域名白名单",is_system:!0},{key:"domain_blacklist",value:"",type:"string",group:"security",description:"域名黑名单",is_system:!0},{key:"hide_remote_url",value:!0,type:"boolean",group:"security",description:"隐藏三方存储地址（全局优先，渠道未设置时回退）",is_system:!0}],uploadDefaults=[{key:"allowed_image_formats",value:["jpg","jpeg","png","gif","webp","bmp","svg","ico","apng","tiff","tif","heic","heif"],type:"array",group:"upload",description:"允许上传的文件格式",is_system:!0},{key:"max_file_size",value:20,type:"number",group:"upload",description:"单个文件最大大小(MB)",is_system:!0},{key:"max_batch_size",value:100,type:"number",group:"upload",description:"批量上传总大小限制(MB)",is_system:!0},{key:"thumbnail_quality",value:50,type:"number",group:"upload",description:"缩略图质量设置(0-100)",is_system:!0},{key:"thumbnail_max_width",value:200,type:"number",group:"upload",description:"缩略图最大宽度",is_system:!0},{key:"thumbnail_max_height",value:200,type:"number",group:"upload",description:"缩略图最大高度",is_system:!0},{key:"preserve_exif",value:!0,type:"boolean",group:"upload",description:"是否保留EXIF信息",is_system:!0},{key:"daily_upload_limit",value:50,type:"number",group:"upload",description:"用户每日上传数量限制",is_system:!0},{key:"client_max_concurrent_uploads",value:3,type:"number",group:"upload",description:"客户端最大并发上传数",is_system:!0},{key:"chunked_upload_enabled",value:!0,type:"boolean",group:"upload",description:"分片上传功能开关",is_system:!0},{key:"chunked_threshold",value:20,type:"number",group:"upload",description:"分片上传阈值(MB)",is_system:!0},{key:"chunk_size",value:2,type:"number",group:"upload",description:"分片大小(MB)",is_system:!0},{key:"max_concurrency",value:5,type:"number",group:"upload",description:"分片上传最大并发数",is_system:!0},{key:"session_timeout",value:24,type:"number",group:"upload",description:"分片上传会话超时时间(小时)",is_system:!0},{key:"retry_count",value:3,type:"number",group:"upload",description:"分片上传重试次数",is_system:!0},{key:"cleanup_interval",value:60,type:"number",group:"upload",description:"分片上传清理间隔(分钟)",is_system:!0},{key:"user_allowed_storage_durations",value:["1h","3d","7d","30d","permanent"],type:"array",group:"upload",description:"已登录用户可选择的存储时长选项（permanent为内置选项）",is_system:!0},{key:"user_default_storage_duration",value:"permanent",type:"string",group:"upload",description:"已登录用户默认存储时长",is_system:!0}],constructionDefaults=[{key:"announcement_enabled",value:!1,type:"boolean",group:"construction",description:"公告开启状态",is_system:!0},{key:"announcement_title",value:"",type:"string",group:"construction",description:"公告标题",is_system:!0},{key:"announcement_content",value:"",type:"string",group:"construction",description:"公告内容（支持HTML）",is_system:!0},{key:"announcement_delay_before_show",value:5e3,type:"number",group:"construction",description:"公告显示延迟时间(毫秒)",is_system:!0},{key:"announcement_reopen_delay",value:3e5,type:"number",group:"construction",description:"公告重新打开间隔时间(毫秒)",is_system:!0},{key:"announcement_width",value:600,type:"number",group:"construction",description:"公告弹窗宽度(像素)",is_system:!0},{key:"announcement_icon",value:"fas fa-bullhorn",type:"string",group:"construction",description:"公告图标",is_system:!0}],themeDefaults=[{key:"site_mode",value:"website",type:"string",group:"theme",description:"网站显示模式(固定为website:传统网站模式)",is_system:!0}],guestDefaults=[{key:"enable_guest_upload",value:!0,type:"boolean",group:"guest",description:"是否开放游客上传",is_system:!0},{key:"guest_daily_limit",value:10,type:"number",group:"guest",description:"游客每日上传次数限制",is_system:!0},{key:"guest_default_access_level",value:"public",type:"string",group:"guest",description:"默认访问级别",is_system:!0},{key:"guest_allowed_storage_durations",value:["3d","7d","30d"],type:"array",group:"guest",description:"允许的存储时长选项",is_system:!0},{key:"guest_default_storage_duration",value:"7d",type:"string",group:"guest",description:"默认存储时长",is_system:!0},{key:"guest_ip_daily_limit",value:50,type:"number",group:"guest",description:"IP每日限制，防止通过刷新指纹盗刷",is_system:!0}],defaultSettings={website:websiteDefaults,website_info:websiteInfoDefaults,registration:registrationDefaults,security:securityDefaults,mail:mailDefaults,ai:aiDefaults,vector:vectorDefaults,upload:uploadDefaults,construction:constructionDefaults,theme:themeDefaults,guest:guestDefaults,appearance:[]};function translateSettingDescription($t,setting){const{group,key}=setting;try{return{...setting,description:$t(`api.settingsDefaults.${group}.${key}`)}}catch{return setting}}function getDefaultSettings($t){return{website:getWebsiteDefaults($t),website_info:websiteInfoDefaults,registration:registrationDefaults.map(s=>translateSettingDescription($t,s)),security:securityDefaults.map(s=>translateSettingDescription($t,s)),mail:mailDefaults.map(s=>translateSettingDescription($t,s)),ai:aiDefaults.map(s=>translateSettingDescription($t,s)),vector:vectorDefaults.map(s=>translateSettingDescription($t,s)),upload:uploadDefaults.map(s=>translateSettingDescription($t,s)),construction:constructionDefaults.map(s=>translateSettingDescription($t,s)),theme:themeDefaults.map(s=>translateSettingDescription($t,s)),guest:guestDefaults.map(s=>translateSettingDescription($t,s)),appearance:[]}}export{testVectorConfig as a,testAIConfig as b,checkAIConfiguration as c,defaultSettings as d,testQdrantConnection as e,getDefaultSettings as g,regenerateVectors as r,testMailServer as t};
