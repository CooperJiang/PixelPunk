function kw(type2){return{type:type2,style:"keyword"}}var A=kw("keyword a"),B=kw("keyword b"),C=kw("keyword c"),operator=kw("operator"),atom={type:"atom",style:"atom"},attribute={type:"attribute",style:"attribute"},type=kw("typedef"),keywords={if:A,while:A,else:B,do:B,try:B,return:C,break:C,continue:C,new:C,throw:C,var:kw("var"),inline:attribute,static:attribute,using:kw("import"),public:attribute,private:attribute,cast:kw("cast"),import:kw("import"),macro:kw("macro"),function:kw("function"),catch:kw("catch"),untyped:kw("untyped"),callback:kw("cb"),for:kw("for"),switch:kw("switch"),case:kw("case"),default:kw("default"),in:operator,never:kw("property_access"),trace:kw("trace"),class:type,abstract:type,enum:type,interface:type,typedef:type,extends:type,implements:type,dynamic:type,true:atom,false:atom,null:atom},isOperatorChar=/[+\-*&%=<>!?|]/;function chain(stream,state,f){return state.tokenize=f,f(stream,state)}function toUnescaped(stream,end){for(var escaped=!1,next;(next=stream.next())!=null;){if(next==end&&!escaped)return!0;escaped=!escaped&&next=="\\"}}var type,content;function ret(tp,style,cont2){return type=tp,content=cont2,style}function haxeTokenBase(stream,state){var ch=stream.next();if(ch=='"'||ch=="'")return chain(stream,state,haxeTokenString(ch));if(/[\[\]{}\(\),;\:\.]/.test(ch))return ret(ch);if(ch=="0"&&stream.eat(/x/i))return stream.eatWhile(/[\da-f]/i),ret("number","number");if(/\d/.test(ch)||ch=="-"&&stream.eat(/\d/))return stream.match(/^\d*(?:\.\d*(?!\.))?(?:[eE][+\-]?\d+)?/),ret("number","number");if(state.reAllowed&&ch=="~"&&stream.eat(/\//))return toUnescaped(stream,"/"),stream.eatWhile(/[gimsu]/),ret("regexp","string.special");if(ch=="/")return stream.eat("*")?chain(stream,state,haxeTokenComment):stream.eat("/")?(stream.skipToEnd(),ret("comment","comment")):(stream.eatWhile(isOperatorChar),ret("operator",null,stream.current()));if(ch=="#")return stream.skipToEnd(),ret("conditional","meta");if(ch=="@")return stream.eat(/:/),stream.eatWhile(/[\w_]/),ret("metadata","meta");if(isOperatorChar.test(ch))return stream.eatWhile(isOperatorChar),ret("operator",null,stream.current());var word;if(/[A-Z]/.test(ch))return stream.eatWhile(/[\w_<>]/),word=stream.current(),ret("type","type",word);stream.eatWhile(/[\w_]/);var word=stream.current(),known=keywords.propertyIsEnumerable(word)&&keywords[word];return known&&state.kwAllowed?ret(known.type,known.style,word):ret("variable","variable",word)}function haxeTokenString(quote){return function(stream,state){return toUnescaped(stream,quote)&&(state.tokenize=haxeTokenBase),ret("string","string")}}function haxeTokenComment(stream,state){for(var maybeEnd=!1,ch;ch=stream.next();){if(ch=="/"&&maybeEnd){state.tokenize=haxeTokenBase;break}maybeEnd=ch=="*"}return ret("comment","comment")}var atomicTypes={atom:!0,number:!0,variable:!0,string:!0,regexp:!0};function HaxeLexical(indented,column,type2,align,prev,info){this.indented=indented,this.column=column,this.type=type2,this.prev=prev,this.info=info,align!=null&&(this.align=align)}function inScope(state,varname){for(var v=state.localVars;v;v=v.next)if(v.name==varname)return!0}function parseHaxe(state,style,type2,content2,stream){var cc=state.cc;for(cx.state=state,cx.stream=stream,cx.marked=null,cx.cc=cc,state.lexical.hasOwnProperty("align")||(state.lexical.align=!0);;){var combinator=cc.length?cc.pop():statement;if(combinator(type2,content2)){for(;cc.length&&cc[cc.length-1].lex;)cc.pop()();return cx.marked?cx.marked:type2=="variable"&&inScope(state,content2)?"variableName.local":type2=="variable"&&imported(state,content2)?"variableName.special":style}}}function imported(state,typename){if(/[a-z]/.test(typename.charAt(0)))return!1;for(var len=state.importedtypes.length,i=0;i<len;i++)if(state.importedtypes[i]==typename)return!0}function registerimport(importname){for(var state=cx.state,t=state.importedtypes;t;t=t.next)if(t.name==importname)return;state.importedtypes={name:importname,next:state.importedtypes}}var cx={state:null,column:null,marked:null,cc:null};function pass(){for(var i=arguments.length-1;i>=0;i--)cx.cc.push(arguments[i])}function cont(){return pass.apply(null,arguments),!0}function inList(name,list){for(var v=list;v;v=v.next)if(v.name==name)return!0;return!1}function register(varname){var state=cx.state;if(state.context){if(cx.marked="def",inList(varname,state.localVars))return;state.localVars={name:varname,next:state.localVars}}else if(state.globalVars){if(inList(varname,state.globalVars))return;state.globalVars={name:varname,next:state.globalVars}}}var defaultVars={name:"this",next:null};function pushcontext(){cx.state.context||(cx.state.localVars=defaultVars),cx.state.context={prev:cx.state.context,vars:cx.state.localVars}}function popcontext(){cx.state.localVars=cx.state.context.vars,cx.state.context=cx.state.context.prev}popcontext.lex=!0;function pushlex(type2,info){var result=function(){var state=cx.state;state.lexical=new HaxeLexical(state.indented,cx.stream.column(),type2,null,state.lexical,info)};return result.lex=!0,result}function poplex(){var state=cx.state;state.lexical.prev&&(state.lexical.type==")"&&(state.indented=state.lexical.indented),state.lexical=state.lexical.prev)}poplex.lex=!0;function expect(wanted){function f(type2){return type2==wanted?cont():wanted==";"?pass():cont(f)}return f}function statement(type2){return type2=="@"?cont(metadef):type2=="var"?cont(pushlex("vardef"),vardef1,expect(";"),poplex):type2=="keyword a"?cont(pushlex("form"),expression,statement,poplex):type2=="keyword b"?cont(pushlex("form"),statement,poplex):type2=="{"?cont(pushlex("}"),pushcontext,block,poplex,popcontext):type2==";"?cont():type2=="attribute"?cont(maybeattribute):type2=="function"?cont(functiondef):type2=="for"?cont(pushlex("form"),expect("("),pushlex(")"),forspec1,expect(")"),poplex,statement,poplex):type2=="variable"?cont(pushlex("stat"),maybelabel):type2=="switch"?cont(pushlex("form"),expression,pushlex("}","switch"),expect("{"),block,poplex,poplex):type2=="case"?cont(expression,expect(":")):type2=="default"?cont(expect(":")):type2=="catch"?cont(pushlex("form"),pushcontext,expect("("),funarg,expect(")"),statement,poplex,popcontext):type2=="import"?cont(importdef,expect(";")):type2=="typedef"?cont(typedef):pass(pushlex("stat"),expression,expect(";"),poplex)}function expression(type2){return atomicTypes.hasOwnProperty(type2)||type2=="type"?cont(maybeoperator):type2=="function"?cont(functiondef):type2=="keyword c"?cont(maybeexpression):type2=="("?cont(pushlex(")"),maybeexpression,expect(")"),poplex,maybeoperator):type2=="operator"?cont(expression):type2=="["?cont(pushlex("]"),commasep(maybeexpression,"]"),poplex,maybeoperator):type2=="{"?cont(pushlex("}"),commasep(objprop,"}"),poplex,maybeoperator):cont()}function maybeexpression(type2){return type2.match(/[;\}\)\],]/)?pass():pass(expression)}function maybeoperator(type2,value){if(type2=="operator"&&/\+\+|--/.test(value))return cont(maybeoperator);if(type2=="operator"||type2==":")return cont(expression);if(type2!=";"){if(type2=="(")return cont(pushlex(")"),commasep(expression,")"),poplex,maybeoperator);if(type2==".")return cont(property,maybeoperator);if(type2=="[")return cont(pushlex("]"),expression,expect("]"),poplex,maybeoperator)}}function maybeattribute(type2){if(type2=="attribute")return cont(maybeattribute);if(type2=="function")return cont(functiondef);if(type2=="var")return cont(vardef1)}function metadef(type2){if(type2==":"||type2=="variable")return cont(metadef);if(type2=="(")return cont(pushlex(")"),commasep(metaargs,")"),poplex,statement)}function metaargs(type2){if(type2=="variable")return cont()}function importdef(type2,value){if(type2=="variable"&&/[A-Z]/.test(value.charAt(0)))return registerimport(value),cont();if(type2=="variable"||type2=="property"||type2=="."||value=="*")return cont(importdef)}function typedef(type2,value){if(type2=="variable"&&/[A-Z]/.test(value.charAt(0)))return registerimport(value),cont();if(type2=="type"&&/[A-Z]/.test(value.charAt(0)))return cont()}function maybelabel(type2){return type2==":"?cont(poplex,statement):pass(maybeoperator,expect(";"),poplex)}function property(type2){if(type2=="variable")return cx.marked="property",cont()}function objprop(type2){if(type2=="variable"&&(cx.marked="property"),atomicTypes.hasOwnProperty(type2))return cont(expect(":"),expression)}function commasep(what,end){function proceed(type2){return type2==","?cont(what,proceed):type2==end?cont():cont(expect(end))}return function(type2){return type2==end?cont():pass(what,proceed)}}function block(type2){return type2=="}"?cont():pass(statement,block)}function vardef1(type2,value){return type2=="variable"?(register(value),cont(typeuse,vardef2)):cont()}function vardef2(type2,value){if(value=="=")return cont(expression,vardef2);if(type2==",")return cont(vardef1)}function forspec1(type2,value){return type2=="variable"?(register(value),cont(forin,expression)):pass()}function forin(_type,value){if(value=="in")return cont()}function functiondef(type2,value){if(type2=="variable"||type2=="type")return register(value),cont(functiondef);if(value=="new")return cont(functiondef);if(type2=="(")return cont(pushlex(")"),pushcontext,commasep(funarg,")"),poplex,typeuse,statement,popcontext)}function typeuse(type2){if(type2==":")return cont(typestring)}function typestring(type2){if(type2=="type"||type2=="variable")return cont();if(type2=="{")return cont(pushlex("}"),commasep(typeprop,"}"),poplex)}function typeprop(type2){if(type2=="variable")return cont(typeuse)}function funarg(type2,value){if(type2=="variable")return register(value),cont(typeuse)}const haxe={name:"haxe",startState:function(indentUnit){var defaulttypes=["Int","Float","String","Void","Std","Bool","Dynamic","Array"],state={tokenize:haxeTokenBase,reAllowed:!0,kwAllowed:!0,cc:[],lexical:new HaxeLexical(-indentUnit,0,"block",!1),importedtypes:defaulttypes,context:null,indented:0};return state},token:function(stream,state){if(stream.sol()&&(state.lexical.hasOwnProperty("align")||(state.lexical.align=!1),state.indented=stream.indentation()),stream.eatSpace())return null;var style=state.tokenize(stream,state);return type=="comment"?style:(state.reAllowed=!!(type=="operator"||type=="keyword c"||type.match(/^[\[{}\(,;:]$/)),state.kwAllowed=type!=".",parseHaxe(state,style,type,content,stream))},indent:function(state,textAfter,cx2){if(state.tokenize!=haxeTokenBase)return 0;var firstChar=textAfter&&textAfter.charAt(0),lexical=state.lexical;lexical.type=="stat"&&firstChar=="}"&&(lexical=lexical.prev);var type2=lexical.type,closing=firstChar==type2;return type2=="vardef"?lexical.indented+4:type2=="form"&&firstChar=="{"?lexical.indented:type2=="stat"||type2=="form"?lexical.indented+cx2.unit:lexical.info=="switch"&&!closing?lexical.indented+(/^(?:case|default)\b/.test(textAfter)?cx2.unit:2*cx2.unit):lexical.align?lexical.column+(closing?0:1):lexical.indented+(closing?0:cx2.unit)},languageData:{indentOnInput:/^\s*[{}]$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}},hxml={name:"hxml",startState:function(){return{define:!1,inString:!1}},token:function(stream,state){var ch=stream.peek(),sol=stream.sol();if(ch=="#")return stream.skipToEnd(),"comment";if(sol&&ch=="-"){var style="variable-2";return stream.eat(/-/),stream.peek()=="-"&&(stream.eat(/-/),style="keyword a"),stream.peek()=="D"&&(stream.eat(/[D]/),style="keyword c",state.define=!0),stream.eatWhile(/[A-Z]/i),style}var ch=stream.peek();return state.inString==!1&&ch=="'"&&(state.inString=!0,stream.next()),state.inString==!0?(stream.skipTo("'")||stream.skipToEnd(),stream.peek()=="'"&&(stream.next(),state.inString=!1),"string"):(stream.next(),null)},languageData:{commentTokens:{line:"#"}}};export{haxe,hxml};
