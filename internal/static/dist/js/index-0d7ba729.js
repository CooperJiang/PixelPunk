import{aj as post,y as get,ak as put,al as del,j as useTexts,_ as _export_sfc,a5 as getValidationRules,a8 as Validator,q as useToast}from"./index-ae9c3219.js";import{d as defineComponent,c as computed,z as openBlock,I as createElementBlock,a0 as createBaseVNode,a1 as toDisplayString,u as unref,R as normalizeClass,ab as createTextVNode,r as ref,w as watch,A as createBlock,L as withCtx,E as resolveComponent,f as createVNode,K as createCommentVNode,b as onMounted,F as Fragment,M as renderList}from"./vue-vendor-31320f47.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";function createRandomAPI(data){return post("/random-api/create",data)}function getRandomAPIList(params){return get("/random-api/list",params)}function updateRandomAPIStatus(id,data){return put(`/random-api/${id}/status`,data)}function updateRandomAPIConfig(id,data){return put(`/random-api/${id}/config`,data)}function deleteRandomAPI(id){return del(`/random-api/${id}`)}const _hoisted_1$3={class:"api-card"},_hoisted_2$3={class:"api-card-header"},_hoisted_3$3={class:"api-info"},_hoisted_4$3={class:"api-name"},_hoisted_5$3={class:"api-actions"},_hoisted_6$3=["title"],_hoisted_7$3=["title"],_hoisted_8$3=["title"],_hoisted_9$3=["title"],_hoisted_10$3={class:"api-card-body"},_hoisted_11$3={class:"api-details-row"},_hoisted_12$3={class:"api-detail api-detail-scope"},_hoisted_13$3={class:"detail-label"},_hoisted_14$3={class:"detail-value detail-value-ellipsis"},_hoisted_15$3={class:"api-detail api-detail-return"},_hoisted_16$3={class:"detail-label"},_hoisted_17$3={class:"detail-value"},_hoisted_18$3={class:"api-url"},_hoisted_19$3={class:"url-text"},_hoisted_20$3={class:"api-stats"},_hoisted_21$2={class:"stat-item"},_hoisted_22$1={class:"stat-value"},_hoisted_23={class:"stat-item"},_hoisted_24={class:"stat-value"},_hoisted_25={class:"api-footer"},_hoisted_26={class:"created-time"},_sfc_main$3=defineComponent({name:"ApiCard",__name:"ApiCard",props:{api:{},url:{}},emits:["toggle-status","edit","delete","copy-url"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,openApi=()=>{window.open(props.url,"_blank")},statusColor=computed(()=>props.api.is_active?"success":"disabled"),formatCallCount=count=>count>=1e6?`${(count/1e6).toFixed(1)}M`:count>=1e3?`${(count/1e3).toFixed(1)}K`:count.toString(),formatTime=time=>{if(!time)return $t("openApi.card.lastCall.never");const date=new Date(time),diff=new Date().getTime()-date.getTime(),minutes=Math.floor(diff/6e4),hours=Math.floor(diff/36e5),days=Math.floor(diff/864e5);return minutes<1?$t("openApi.card.lastCall.justNow"):minutes<60?$t("openApi.card.lastCall.minutesAgo",{minutes}):hours<24?$t("openApi.card.lastCall.hoursAgo",{hours}):days<30?$t("openApi.card.lastCall.daysAgo",{days}):date.toLocaleDateString()},formatCreatedTime=time=>{if(!time)return"-";const date=new Date(time),year=date.getFullYear(),month=String(date.getMonth()+1).padStart(2,"0"),day=String(date.getDate()).padStart(2,"0"),hours=String(date.getHours()).padStart(2,"0"),minutes=String(date.getMinutes()).padStart(2,"0");return`${year}-${month}-${day} ${hours}:${minutes}`},returnTypeLabel=computed(()=>props.api.return_type==="direct"?$t("openApi.card.returnType.direct"):$t("openApi.card.returnType.redirect")),returnTypeIcon=computed(()=>props.api.return_type==="direct"?"fas fa-file-image":"fas fa-share"),scopeLabel=computed(()=>props.api.folder_id?props.api.folder_name:$t("openApi.card.scopeAll"));return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[_cache[4]||(_cache[4]=createBaseVNode("i",{class:"fas fa-random api-icon"},null,-1)),createBaseVNode("h3",_hoisted_4$3,toDisplayString(__props.api.name),1)]),createBaseVNode("div",_hoisted_5$3,[createBaseVNode("button",{class:"action-btn open-btn",onClick:openApi,title:unref($t)("openApi.card.actions.open")},[..._cache[5]||(_cache[5]=[createBaseVNode("i",{class:"fas fa-external-link-alt"},null,-1)])],8,_hoisted_6$3),createBaseVNode("button",{class:"action-btn edit-btn",onClick:_cache[0]||(_cache[0]=$event=>emit("edit",__props.api)),title:unref($t)("openApi.card.actions.edit")},[..._cache[6]||(_cache[6]=[createBaseVNode("i",{class:"fas fa-edit"},null,-1)])],8,_hoisted_7$3),createBaseVNode("button",{class:normalizeClass(["action-btn toggle-btn",{active:__props.api.is_active}]),onClick:_cache[1]||(_cache[1]=$event=>emit("toggle-status",__props.api)),title:__props.api.is_active?unref($t)("openApi.form.status.disabled"):unref($t)("openApi.form.status.enabled")},[createBaseVNode("i",{class:normalizeClass(__props.api.is_active?"fas fa-pause":"fas fa-play")},null,2)],10,_hoisted_8$3),createBaseVNode("button",{class:"action-btn delete-btn",onClick:_cache[2]||(_cache[2]=$event=>emit("delete",__props.api)),title:unref($t)("openApi.card.actions.delete")},[..._cache[7]||(_cache[7]=[createBaseVNode("i",{class:"fas fa-trash"},null,-1)])],8,_hoisted_9$3)])]),createBaseVNode("div",_hoisted_10$3,[createBaseVNode("div",_hoisted_11$3,[createBaseVNode("div",_hoisted_12$3,[createBaseVNode("span",_hoisted_13$3,toDisplayString(unref($t)("openApi.card.scope"))+":",1),createBaseVNode("span",_hoisted_14$3,toDisplayString(scopeLabel.value),1)]),createBaseVNode("div",_hoisted_15$3,[createBaseVNode("span",_hoisted_16$3,toDisplayString(unref($t)("openApi.card.returnMethod"))+":",1),createBaseVNode("span",_hoisted_17$3,[createBaseVNode("i",{class:normalizeClass([returnTypeIcon.value,"mr-1"])},null,2),createTextVNode(" "+toDisplayString(returnTypeLabel.value),1)])])]),createBaseVNode("div",_hoisted_18$3,[createBaseVNode("code",_hoisted_19$3,toDisplayString(__props.url),1),createBaseVNode("button",{class:"copy-btn",onClick:_cache[3]||(_cache[3]=$event=>emit("copy-url",__props.url))},[..._cache[8]||(_cache[8]=[createBaseVNode("i",{class:"fas fa-copy"},null,-1)])])]),createBaseVNode("div",_hoisted_20$3,[createBaseVNode("div",_hoisted_21$2,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-chart-line stat-icon"},null,-1)),createBaseVNode("span",_hoisted_22$1,toDisplayString(formatCallCount(__props.api.call_count))+toDisplayString(unref($t)("openApi.card.times")),1)]),createBaseVNode("div",_hoisted_23,[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-clock stat-icon"},null,-1)),createBaseVNode("span",_hoisted_24,toDisplayString(formatTime(__props.api.last_called_at)),1)])]),createBaseVNode("div",_hoisted_25,[createBaseVNode("div",_hoisted_26,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-calendar-plus"},null,-1)),createBaseVNode("span",null,toDisplayString(formatCreatedTime(__props.api.created_at)),1)]),createBaseVNode("span",{class:normalizeClass(["status-badge",`status-${statusColor.value}`])},[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-circle"},null,-1)),createTextVNode(" "+toDisplayString(__props.api.is_active?unref($t)("openApi.card.status.enabled"):unref($t)("openApi.card.status.disabled")),1)],2)])])]))}});const ApiCard=_export_sfc(_sfc_main$3,[["__scopeId","data-v-66a1916d"]]),_hoisted_1$2={class:"form-container"},_hoisted_2$2={class:"form-group"},_hoisted_3$2={class:"form-label"},_hoisted_4$2={class:"form-hint"},_hoisted_5$2={class:"form-group"},_hoisted_6$2={class:"form-label"},_hoisted_7$2={key:0,class:"form-group"},_hoisted_8$2={class:"form-label"},_hoisted_9$2={class:"form-hint"},_hoisted_10$2={class:"form-group"},_hoisted_11$2={class:"form-label"},_hoisted_12$2={class:"return-type-options"},_hoisted_13$2={class:"return-type-option"},_hoisted_14$2={class:"option-content"},_hoisted_15$2={class:"option-label"},_hoisted_16$2={class:"option-desc"},_hoisted_17$2={class:"return-type-option"},_hoisted_18$2={class:"option-content"},_hoisted_19$2={class:"option-label"},_hoisted_20$2={class:"option-desc"},_hoisted_21$1={class:"hint-text"},_sfc_main$2=defineComponent({name:"CreateApiModal",__name:"CreateApiModal",props:{visible:{type:Boolean},isSubmitting:{type:Boolean}},emits:["update:visible","submit"],setup(__props,{emit:__emit}){const{$t}=useTexts(),toast=useToast(),R=getValidationRules($t),props=__props,emit=__emit,formData=ref({name:"",folder_id:null,return_type:"redirect"}),scopeType=ref("all"),scopeOptions=computed(()=>[{label:$t("openApi.card.scopeAllPublic"),value:"all"},{label:$t("openApi.card.scopeFolder"),value:"folder"}]);computed(()=>!(!Validator.validate(formData.value.name,[R.required,R.minLength(1)],$t).valid||scopeType.value==="folder"&&!Validator.validate(formData.value.folder_id,[R.required],$t).valid));const handleFolderSelected=folder=>{folder&&folder.id&&(formData.value.folder_id=folder.id)};watch(()=>props.visible,newVal=>{newVal&&(formData.value={name:"",folder_id:null,return_type:"redirect"},scopeType.value="all")}),watch(scopeType,newVal=>{newVal==="all"&&(formData.value.folder_id=null)});const handleSubmit=()=>{const nameCheck=Validator.validate(formData.value.name,[R.required,R.minLength(1)],$t);if(!nameCheck.valid){toast.error(nameCheck.message||$t("validation.errors.required"));return}if(scopeType.value==="folder"){const folderCheck=Validator.validate(formData.value.folder_id,[R.required],$t);if(!folderCheck.valid){toast.error(folderCheck.message||$t("validation.errors.required"));return}}emit("submit",formData.value)},handleDialogUpdate=val=>{emit("update:visible",val)};return(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberRadioGroup=resolveComponent("CyberRadioGroup"),_component_cyberFolderTree=resolveComponent("cyberFolderTree"),_component_CyberRadio=resolveComponent("CyberRadio"),_component_CyberDialog=resolveComponent("CyberDialog");return openBlock(),createBlock(_component_CyberDialog,{"model-value":__props.visible,title:unref($t)("openApi.dialog.create.title"),width:"500px",loading:__props.isSubmitting,"show-default-footer":!0,onConfirm:handleSubmit,"onUpdate:modelValue":handleDialogUpdate},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("label",_hoisted_3$2,[createTextVNode(toDisplayString(unref($t)("openApi.dialog.create.form.name.label"))+" ",1),_cache[5]||(_cache[5]=createBaseVNode("span",{class:"required"},"*",-1))]),createVNode(_component_CyberInput,{modelValue:formData.value.name,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>formData.value.name=$event),placeholder:unref($t)("openApi.form.name.placeholder"),maxlength:100,disabled:__props.isSubmitting},null,8,["modelValue","placeholder","disabled"]),createBaseVNode("div",_hoisted_4$2,toDisplayString(unref($t)("openApi.dialog.create.form.name.hint")),1)]),createBaseVNode("div",_hoisted_5$2,[createBaseVNode("label",_hoisted_6$2,toDisplayString(unref($t)("openApi.dialog.create.form.scope.label")),1),createVNode(_component_CyberRadioGroup,{modelValue:scopeType.value,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>scopeType.value=$event),options:scopeOptions.value,disabled:__props.isSubmitting,layout:"horizontal"},null,8,["modelValue","options","disabled"])]),scopeType.value==="folder"?(openBlock(),createElementBlock("div",_hoisted_7$2,[createBaseVNode("label",_hoisted_8$2,[createTextVNode(toDisplayString(unref($t)("openApi.dialog.create.form.folder.label"))+" ",1),_cache[6]||(_cache[6]=createBaseVNode("span",{class:"required"},"*",-1))]),createVNode(_component_cyberFolderTree,{modelValue:formData.value.folder_id,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>formData.value.folder_id=$event),class:"compact-dropdown text-sm",disabled:__props.isSubmitting,"dropdown-z-index":6e3,onFolderSelected:handleFolderSelected},null,8,["modelValue","disabled"]),createBaseVNode("p",_hoisted_9$2,toDisplayString(unref($t)("openApi.dialog.create.form.folder.hint")),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$2,[createBaseVNode("label",_hoisted_11$2,toDisplayString(unref($t)("openApi.dialog.create.form.returnType.label")),1),createBaseVNode("div",_hoisted_12$2,[createBaseVNode("label",_hoisted_13$2,[createVNode(_component_CyberRadio,{modelValue:formData.value.return_type,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>formData.value.return_type=$event),value:"redirect",disabled:__props.isSubmitting},null,8,["modelValue","disabled"]),createBaseVNode("div",_hoisted_14$2,[createBaseVNode("span",_hoisted_15$2,toDisplayString(unref($t)("openApi.dialog.create.form.returnType.redirect.label")),1),createBaseVNode("span",_hoisted_16$2,toDisplayString(unref($t)("openApi.dialog.create.form.returnType.redirect.desc")),1)])]),createBaseVNode("label",_hoisted_17$2,[createVNode(_component_CyberRadio,{modelValue:formData.value.return_type,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>formData.value.return_type=$event),value:"direct",disabled:__props.isSubmitting},null,8,["modelValue","disabled"]),createBaseVNode("div",_hoisted_18$2,[createBaseVNode("span",_hoisted_19$2,toDisplayString(unref($t)("openApi.dialog.create.form.returnType.direct.label")),1),createBaseVNode("span",_hoisted_20$2,toDisplayString(unref($t)("openApi.dialog.create.form.returnType.direct.desc")),1)])])])]),createBaseVNode("p",_hoisted_21$1,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-info-circle"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("openApi.dialog.create.hint")),1)])])]),_:1},8,["model-value","title","loading"])}}});const CreateApiModal=_export_sfc(_sfc_main$2,[["__scopeId","data-v-b1193a0c"]]),_hoisted_1$1={class:"form-container"},_hoisted_2$1={class:"api-name-display"},_hoisted_3$1={class:"label"},_hoisted_4$1={class:"value"},_hoisted_5$1={class:"form-group"},_hoisted_6$1={class:"form-label"},_hoisted_7$1={key:0,class:"form-group"},_hoisted_8$1={class:"form-label"},_hoisted_9$1={class:"form-hint"},_hoisted_10$1={class:"form-group"},_hoisted_11$1={class:"form-label"},_hoisted_12$1={class:"return-type-options"},_hoisted_13$1={class:"return-type-option"},_hoisted_14$1={class:"option-content"},_hoisted_15$1={class:"option-label"},_hoisted_16$1={class:"option-desc"},_hoisted_17$1={class:"return-type-option"},_hoisted_18$1={class:"option-content"},_hoisted_19$1={class:"option-label"},_hoisted_20$1={class:"option-desc"},_sfc_main$1=defineComponent({name:"EditApiModal",__name:"EditApiModal",props:{visible:{type:Boolean},isSubmitting:{type:Boolean},api:{}},emits:["update:visible","submit"],setup(__props,{emit:__emit}){const{$t}=useTexts(),toast=useToast(),R=getValidationRules($t),props=__props,emit=__emit,formData=ref({folder_id:null,return_type:"redirect"}),scopeType=ref("all"),scopeOptions=computed(()=>[{label:$t("openApi.card.scopeAllPublic"),value:"all"},{label:$t("openApi.card.scopeFolder"),value:"folder"}]);computed(()=>!(scopeType.value==="folder"&&!Validator.validate(formData.value.folder_id,[R.required],$t).valid));const handleFolderSelected=folder=>{folder&&folder.id&&(formData.value.folder_id=folder.id)};watch(()=>props.visible,newVal=>{newVal&&props.api&&(formData.value={folder_id:props.api.folder_id,return_type:props.api.return_type},scopeType.value=props.api.folder_id?"folder":"all")}),watch(scopeType,newVal=>{newVal==="all"&&(formData.value.folder_id=null)});const handleSubmit=()=>{if(scopeType.value==="folder"){const folderCheck=Validator.validate(formData.value.folder_id,[R.required],$t);if(!folderCheck.valid){toast.error(folderCheck.message||$t("validation.errors.required"));return}}emit("submit",formData.value)},handleDialogUpdate=val=>{emit("update:visible",val)};return(_ctx,_cache)=>{const _component_CyberRadioGroup=resolveComponent("CyberRadioGroup"),_component_cyberFolderTree=resolveComponent("cyberFolderTree"),_component_CyberRadio=resolveComponent("CyberRadio"),_component_CyberDialog=resolveComponent("CyberDialog");return openBlock(),createBlock(_component_CyberDialog,{"model-value":__props.visible,title:unref($t)("openApi.dialog.edit.title"),width:"500px",loading:__props.isSubmitting,"show-default-footer":!0,onConfirm:handleSubmit,"onUpdate:modelValue":handleDialogUpdate},{default:withCtx(()=>[createBaseVNode("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("span",_hoisted_3$1,toDisplayString(unref($t)("openApi.dialog.edit.form.nameLabel")),1),createBaseVNode("span",_hoisted_4$1,toDisplayString(__props.api?.name),1)]),createBaseVNode("div",_hoisted_5$1,[createBaseVNode("label",_hoisted_6$1,toDisplayString(unref($t)("openApi.dialog.edit.form.scope.label")),1),createVNode(_component_CyberRadioGroup,{modelValue:scopeType.value,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>scopeType.value=$event),options:scopeOptions.value,disabled:__props.isSubmitting,layout:"horizontal"},null,8,["modelValue","options","disabled"])]),scopeType.value==="folder"?(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("label",_hoisted_8$1,[createTextVNode(toDisplayString(unref($t)("openApi.dialog.edit.form.folder.label"))+" ",1),_cache[4]||(_cache[4]=createBaseVNode("span",{class:"required"},"*",-1))]),createVNode(_component_cyberFolderTree,{modelValue:formData.value.folder_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>formData.value.folder_id=$event),class:"compact-dropdown text-sm",disabled:__props.isSubmitting,"dropdown-z-index":6e3,onFolderSelected:handleFolderSelected},null,8,["modelValue","disabled"]),createBaseVNode("p",_hoisted_9$1,toDisplayString(unref($t)("openApi.dialog.edit.form.folder.hint")),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10$1,[createBaseVNode("label",_hoisted_11$1,toDisplayString(unref($t)("openApi.dialog.edit.form.returnType.label")),1),createBaseVNode("div",_hoisted_12$1,[createBaseVNode("label",_hoisted_13$1,[createVNode(_component_CyberRadio,{modelValue:formData.value.return_type,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>formData.value.return_type=$event),value:"redirect",disabled:__props.isSubmitting},null,8,["modelValue","disabled"]),createBaseVNode("div",_hoisted_14$1,[createBaseVNode("span",_hoisted_15$1,toDisplayString(unref($t)("openApi.dialog.edit.form.returnType.redirect.label")),1),createBaseVNode("span",_hoisted_16$1,toDisplayString(unref($t)("openApi.dialog.edit.form.returnType.redirect.desc")),1)])]),createBaseVNode("label",_hoisted_17$1,[createVNode(_component_CyberRadio,{modelValue:formData.value.return_type,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>formData.value.return_type=$event),value:"direct",disabled:__props.isSubmitting},null,8,["modelValue","disabled"]),createBaseVNode("div",_hoisted_18$1,[createBaseVNode("span",_hoisted_19$1,toDisplayString(unref($t)("openApi.dialog.edit.form.returnType.direct.label")),1),createBaseVNode("span",_hoisted_20$1,toDisplayString(unref($t)("openApi.dialog.edit.form.returnType.direct.desc")),1)])])])])])]),_:1},8,["model-value","title","loading"])}}});const EditApiModal=_export_sfc(_sfc_main$1,[["__scopeId","data-v-4d591e4e"]]),_hoisted_1={class:"open-api-page"},_hoisted_2={class:"page-header mb-4 p-4"},_hoisted_3={class:"flex items-center justify-between gap-4"},_hoisted_4={class:"flex items-center gap-3"},_hoisted_5={class:"flex items-center gap-2"},_hoisted_6={class:"text-lg font-bold text-content-heading"},_hoisted_7={class:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-brand-400",style:{backgroundColor:"rgba(var(--color-brand-500-rgb), 0.1)"}},_hoisted_8={class:"mt-0.5 text-xs text-content-muted"},_hoisted_9={class:"flex gap-2"},_hoisted_10={class:"search-input-wrapper"},_hoisted_11={class:"apis-container"},_hoisted_12={class:"apis-content"},_hoisted_13={key:0,class:"loading-state"},_hoisted_14={class:"mt-2 text-content-muted"},_hoisted_15={key:1,class:"empty-state"},_hoisted_16={class:"mt-4 text-lg font-medium text-content"},_hoisted_17={class:"mt-2 max-w-md text-center text-sm text-content-muted"},_hoisted_18={key:2,class:"apis-grid"},_hoisted_19={key:0,class:"apis-footer"},_hoisted_20={class:"total-count"},_hoisted_21={class:"text-content-default"},_hoisted_22={class:"mt-2 text-sm text-content-muted"},_sfc_main=defineComponent({__name:"index",setup(__props){const toast=useToast(),{$t}=useTexts(),isLoading=ref(!1),isSubmitting=ref(!1),isUpdating=ref(!1),isDeleting=ref(!1),totalApis=ref(0),allApis=ref([]),searchKeyword=ref(""),showCreateModal=ref(!1),showEditModal=ref(!1),showDeleteConfirm=ref(!1),editingApi=ref(null),deletingApi=ref(null),filteredApis=computed(()=>{if(!searchKeyword.value.trim())return allApis.value;const keyword=searchKeyword.value.toLowerCase().trim();return allApis.value.filter(api=>api.name.toLowerCase().includes(keyword))}),loadApis=async()=>{try{isLoading.value=!0;const response=await getRandomAPIList({page:1,size:1e3});allApis.value=response.data.items||[],totalApis.value=response.data.total}catch{toast.error($t("openApi.toast.loadFailed"))}finally{isLoading.value=!1}},submitApiForm=async formData=>{try{isSubmitting.value=!0,await createRandomAPI(formData),toast.success($t("openApi.toast.createSuccess")),showCreateModal.value=!1,loadApis()}catch{toast.error($t("openApi.toast.createFailed"))}finally{isSubmitting.value=!1}},openEditModal=api=>{editingApi.value=api,showEditModal.value=!0},submitEditForm=async formData=>{if(editingApi.value)try{isUpdating.value=!0,await updateRandomAPIConfig(editingApi.value.id,formData),toast.success($t("openApi.toast.updateSuccess")),showEditModal.value=!1,loadApis()}catch{toast.error($t("openApi.toast.updateFailed"))}finally{isUpdating.value=!1}},confirmDeleteApi=api=>{deletingApi.value=api,showDeleteConfirm.value=!0},deleteApi=async()=>{if(deletingApi.value)try{isDeleting.value=!0,await deleteRandomAPI(deletingApi.value.id),toast.success($t("openApi.toast.deleteSuccess")),showDeleteConfirm.value=!1,loadApis()}catch{toast.error($t("openApi.toast.deleteFailed"))}finally{isDeleting.value=!1}},toggleApiStatus=async api=>{try{const newStatus=api.is_active?2:1;await updateRandomAPIStatus(api.id,{status:newStatus}),toast.success($t("openApi.toast.toggleSuccess")),loadApis()}catch{toast.error($t("openApi.toast.toggleFailed"))}},copyUrl=url=>{navigator.clipboard.writeText(url).then(()=>{toast.success($t("openApi.toast.copySuccess"))})},getApiUrl=apiKey=>`${window.location.origin}/api/v1/r/${apiKey}`;return onMounted(()=>{loadApis()}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberButton=resolveComponent("CyberButton"),_component_CyberDialog=resolveComponent("CyberDialog");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[_cache[6]||(_cache[6]=createBaseVNode("div",{class:"page-header-icon flex h-9 w-9 items-center justify-center rounded-lg border"},[createBaseVNode("i",{class:"fas fa-random text-lg text-brand-400"})],-1)),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_5,[createBaseVNode("h1",_hoisted_6,toDisplayString(unref($t)("openApi.page.title")),1),createBaseVNode("span",_hoisted_7,toDisplayString(totalApis.value),1)]),createBaseVNode("p",_hoisted_8,toDisplayString(unref($t)("openApi.page.subtitle")),1)])]),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",_hoisted_10,[createVNode(_component_CyberInput,{modelValue:searchKeyword.value,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>searchKeyword.value=$event),placeholder:unref($t)("openApi.page.search"),size:"small",clearable:""},{prefix:withCtx(()=>[..._cache[7]||(_cache[7]=[createBaseVNode("i",{class:"fas fa-search text-content-muted"},null,-1)])]),_:1},8,["modelValue","placeholder"])]),createVNode(_component_CyberButton,{type:"primary",size:"small",onClick:_cache[1]||(_cache[1]=$event=>showCreateModal.value=!0)},{default:withCtx(()=>[_cache[8]||(_cache[8]=createBaseVNode("i",{class:"fas fa-plus mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("openApi.page.create")),1)]),_:1})])])]),createBaseVNode("div",_hoisted_11,[createBaseVNode("div",_hoisted_12,[isLoading.value?(openBlock(),createElementBlock("div",_hoisted_13,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-spinner fa-spin text-2xl text-brand-500"},null,-1)),createBaseVNode("p",_hoisted_14,toDisplayString(unref($t)("openApi.loading")),1)])):filteredApis.value.length===0?(openBlock(),createElementBlock("div",_hoisted_15,[_cache[11]||(_cache[11]=createBaseVNode("div",{class:"empty-icon-wrapper"},[createBaseVNode("i",{class:"fas fa-random text-content-muted/30 text-5xl"})],-1)),createBaseVNode("h3",_hoisted_16,toDisplayString(unref($t)("openApi.empty.title")),1),createBaseVNode("p",_hoisted_17,toDisplayString(unref($t)("openApi.empty.description")),1),searchKeyword.value?createCommentVNode("",!0):(openBlock(),createBlock(_component_CyberButton,{key:0,type:"primary",size:"medium",class:"mt-4",onClick:_cache[2]||(_cache[2]=$event=>showCreateModal.value=!0)},{default:withCtx(()=>[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-plus mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("openApi.page.create")),1)]),_:1}))])):(openBlock(),createElementBlock("div",_hoisted_18,[(openBlock(!0),createElementBlock(Fragment,null,renderList(filteredApis.value,api=>(openBlock(),createBlock(ApiCard,{key:api.id,api,url:getApiUrl(api.api_key),onEdit:openEditModal,onToggleStatus:toggleApiStatus,onDelete:confirmDeleteApi,onCopyUrl:copyUrl},null,8,["api","url"]))),128))]))]),!isLoading.value&&filteredApis.value.length>0?(openBlock(),createElementBlock("div",_hoisted_19,[createBaseVNode("div",_hoisted_20,toDisplayString(unref($t)("openApi.footer.total",{count:filteredApis.value.length})),1)])):createCommentVNode("",!0)]),createVNode(CreateApiModal,{visible:showCreateModal.value,"onUpdate:visible":_cache[3]||(_cache[3]=$event=>showCreateModal.value=$event),"is-submitting":isSubmitting.value,onSubmit:submitApiForm},null,8,["visible","is-submitting"]),createVNode(EditApiModal,{visible:showEditModal.value,"onUpdate:visible":_cache[4]||(_cache[4]=$event=>showEditModal.value=$event),"is-submitting":isUpdating.value,api:editingApi.value,onSubmit:submitEditForm},null,8,["visible","is-submitting","api"]),createVNode(_component_CyberDialog,{"model-value":showDeleteConfirm.value,title:unref($t)("openApi.dialog.delete.title"),width:"450px",loading:isDeleting.value,"show-default-footer":!0,onConfirm:deleteApi,"onUpdate:modelValue":_cache[5]||(_cache[5]=val=>showDeleteConfirm.value=val)},{default:withCtx(()=>[createBaseVNode("p",_hoisted_21,toDisplayString(unref($t)("openApi.dialog.delete.message",{name:deletingApi.value?.name||""})),1),createBaseVNode("p",_hoisted_22,toDisplayString(unref($t)("openApi.dialog.delete.warning")),1)]),_:1},8,["model-value","title","loading"])])}}});const index=_export_sfc(_sfc_main,[["__scopeId","data-v-075d29e2"]]);export{index as default};
