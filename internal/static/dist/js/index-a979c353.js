import{y as get,aj as post,j as useTexts,q as useToast,az as useConfirmDialog,_ as _export_sfc,a5 as getValidationRules,a8 as Validator,aA as formatDate,Z as __unplugin_components_0}from"./index-ae9c3219.js";import{r as ref,a as reactive,d as defineComponent,ao as useModel,E as resolveComponent,z as openBlock,I as createElementBlock,a0 as createBaseVNode,ab as createTextVNode,a1 as toDisplayString,u as unref,f as createVNode,K as createCommentVNode,c as computed,aa as withKeys,L as withCtx,ap as mergeModels,A as createBlock,h,b as onMounted,R as normalizeClass,a6 as Transition,i as isRef,a3 as useRouter,a5 as withModifiers}from"./vue-vendor-31320f47.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";function createCategory(data){return post("/user-categories/create",data)}function getCategoryList(params){return get("/user-categories/list",params)}function updateCategory(data){return post("/user-categories/update",data)}function deleteCategory(data){return post("/user-categories/delete",data)}function batchDelete(data){return post("/user-categories/batch-delete",data)}function updateCategoryStatus(data){return post("/user-categories/update-status",data)}function useCategoryManagement(){const{$t}=useTexts(),toast=useToast(),{showConfirmDialog}=useConfirmDialog(),categories=ref([]),loading=ref(!1),saveLoading=ref(!1),totalCategories=ref(0),currentPage=ref(1),pageSize=ref(10),showFilter=ref(!1),currentFilters=reactive({keyword:"",status:"",sort_by:"sort_order",sort_order_dir:"asc"}),showEditDialog=ref(!1),currentEditCategory=ref(null),showCreateDialog=ref(!1),selectedCategoryIds=ref([]),fetchCategoryList=async()=>{loading.value=!0;const params={page:currentPage.value,size:pageSize.value,keyword:currentFilters.keyword||void 0,status:currentFilters.status||void 0,sort_by:currentFilters.sort_by,sort_order_dir:currentFilters.sort_order_dir};try{const result=await getCategoryList(params);if(result.success){const{data}=result;categories.value=data.categories,totalCategories.value=data.total,selectedCategoryIds.value=selectedCategoryIds.value.filter(id=>categories.value.some(category=>category.id===id))}}catch{toast.error($t("category.toast.fetchError"))}loading.value=!1};return{categories,loading,saveLoading,totalCategories,currentPage,pageSize,showFilter,currentFilters,showEditDialog,currentEditCategory,showCreateDialog,selectedCategoryIds,fetchCategoryList,handleFilter:filters=>{Object.assign(currentFilters,filters),currentPage.value=1,selectedCategoryIds.value=[],fetchCategoryList(),showFilter.value=!1},handlePageChange:page=>{currentPage.value=page,fetchCategoryList()},handlePageSizeChange:size=>{pageSize.value=size,currentPage.value=1,fetchCategoryList()},editCategory:category=>{currentEditCategory.value=JSON.parse(JSON.stringify(category)),showEditDialog.value=!0},saveCategoryChanges:async()=>{if(currentEditCategory.value){saveLoading.value=!0;try{(await updateCategory({id:currentEditCategory.value.id,name:currentEditCategory.value.name,description:currentEditCategory.value.description,sort_order:currentEditCategory.value.sort_order})).success&&(toast.success($t("category.toast.updateSuccess")),showEditDialog.value=!1,fetchCategoryList())}catch{toast.error($t("category.toast.updateError"))}saveLoading.value=!1}},toggleCategoryStatus:async category=>{const newStatus=category.status==="active"?"archived":"active",isArchiving=newStatus==="archived";if(await showConfirmDialog({title:$t(`category.actions.${isArchiving?"archive":"activate"}`),message:$t(`category.batch.${isArchiving?"archiveConfirm":"activateConfirm"}`,{count:1}),type:"warning"}))try{(await updateCategoryStatus({id:category.id,status:newStatus})).success&&(toast.success($t(`category.toast.${isArchiving?"archiveSuccess":"activateSuccess"}`)),fetchCategoryList())}catch{toast.error($t(`category.toast.${isArchiving?"archiveError":"activateError"}`))}},deleteCategoryItem:async id=>{try{(await deleteCategory({id})).success&&(toast.success($t("category.toast.deleteSuccess")),fetchCategoryList())}catch{toast.error($t("category.toast.deleteError"))}},handleBatchDelete:async()=>{if(selectedCategoryIds.value.length===0){toast.warning($t("category.toast.selectWarning"));return}if(await showConfirmDialog({title:$t("category.batch.delete"),message:$t("category.batch.deleteConfirm",{count:selectedCategoryIds.value.length}),type:"danger",confirmText:$t("common.confirmDelete")}))try{const result=await batchDelete({ids:selectedCategoryIds.value});result.success&&(toast.success($t("category.toast.batchDeleteSuccess",{count:result.data.deleted_count})),selectedCategoryIds.value=[],fetchCategoryList())}catch{toast.error($t("category.toast.batchDeleteError"))}},handleRefresh:()=>{selectedCategoryIds.value=[],fetchCategoryList()},handleCategoryCreated:()=>{toast.success($t("category.toast.createSuccess")),fetchCategoryList()},handleBatchCompleted:()=>{selectedCategoryIds.value=[],fetchCategoryList()},handleSelectionChange:selectedRows=>{selectedCategoryIds.value=selectedRows.map(id=>Number(id))}}}function getSourceMap($t){return{user:{text:$t("category.sourceInfo.manual"),class:"bg-purple-500/10 text-purple-400 border border-purple-500/30",icon:"fas fa-user",style:{backgroundColor:"var(--color-badge-accent-bg)",color:"var(--color-badge-accent-text)",borderColor:"var(--color-badge-accent-border)"}},ai_suggestion:{text:$t("category.sourceInfo.aiSuggestion"),class:"bg-success-500/10 text-success-400 border border-success-500/30",icon:"fas fa-robot",style:{backgroundColor:"var(--color-badge-success-bg)",color:"var(--color-badge-success-text)",borderColor:"var(--color-badge-success-border)"}},system_template:{text:$t("category.sourceInfo.system"),class:"bg-brand-500/10 text-brand-400 border border-brand-500/30",icon:"fas fa-cube",style:{backgroundColor:"var(--color-badge-primary-bg)",color:"var(--color-badge-primary-text)",borderColor:"var(--color-badge-primary-border)"}},imported:{text:$t("category.sourceInfo.imported"),class:"bg-info-500/10 text-info-400 border border-info-500/30",icon:"fas fa-file-import",style:{backgroundColor:"var(--color-badge-info-bg)",color:"var(--color-badge-info-text)",borderColor:"var(--color-badge-info-border)"}}}}function getSourceInfo(source){const{$t}=useTexts();return getSourceMap($t)[source]||{text:source,class:"bg-background-700 text-content-muted border border-border-default",icon:"fas fa-question",style:{}}}function getStatusStyle(status){const{$t}=useTexts(),isActive=status==="active";return{containerStyle:isActive?{backgroundColor:"var(--color-badge-success-bg)",color:"var(--color-badge-success-text)",borderColor:"var(--color-badge-success-border)"}:{backgroundColor:"var(--color-badge-neutral-bg)",color:"var(--color-badge-neutral-text)",borderColor:"var(--color-badge-neutral-border)"},dotStyle:{backgroundColor:isActive?"var(--color-badge-success-text)":"var(--color-badge-neutral-text)"},text:$t(`category.statusInfo.${isActive?"active":"archived"}`)}}const _hoisted_1$4={key:0,class:"category-form space-y-4 p-4"},_hoisted_2$4={class:"form-group"},_hoisted_3$4={class:"mb-2 block text-sm font-medium text-content"},_hoisted_4$4={class:"form-group"},_hoisted_5$4={class:"mb-2 block text-sm font-medium text-content"},_hoisted_6$3={class:"form-group"},_hoisted_7$2={class:"mb-2 block text-sm font-medium text-content"},_hoisted_8$2={class:"mt-1 text-xs text-content-muted"},_sfc_main$4=defineComponent({name:"CategoryForm",__name:"CategoryForm",props:{modelValue:{required:!0},modelModifiers:{}},emits:["update:modelValue"],setup(__props){const{$t}=useTexts(),category=useModel(__props,"modelValue");return(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput");return category.value?(openBlock(),createElementBlock("div",_hoisted_1$4,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("label",_hoisted_3$4,[createTextVNode(toDisplayString(unref($t)("category.form.name.label"))+" ",1),_cache[3]||(_cache[3]=createBaseVNode("span",{class:"text-error-400"},"*",-1))]),createVNode(_component_CyberInput,{modelValue:category.value.name,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>category.value.name=$event),placeholder:unref($t)("category.placeholders.name"),maxlength:50,class:"w-full"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$4,[createBaseVNode("label",_hoisted_5$4,toDisplayString(unref($t)("category.form.description.label")),1),createVNode(_component_CyberInput,{modelValue:category.value.description,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>category.value.description=$event),type:"textarea",placeholder:unref($t)("category.placeholders.description"),maxlength:500,rows:4,class:"w-full"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_6$3,[createBaseVNode("label",_hoisted_7$2,toDisplayString(unref($t)("category.form.sortOrder.label")),1),createVNode(_component_CyberInput,{modelValue:category.value.sort_order,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>category.value.sort_order=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("category.placeholders.sortOrder"),class:"w-full"},null,8,["modelValue","placeholder"]),createBaseVNode("p",_hoisted_8$2,toDisplayString(unref($t)("category.form.sortOrder.hint")),1)])])):createCommentVNode("",!0)}}});const CategoryForm=_export_sfc(_sfc_main$4,[["__scopeId","data-v-68a4207b"]]),_hoisted_1$3={class:"filter-panel mb-4 p-3"},_hoisted_2$3={class:"flex flex-wrap items-center gap-3"},_hoisted_3$3={class:"filter-item min-w-[200px] max-w-[300px] flex-1"},_hoisted_4$3={class:"filter-item min-w-[150px]"},_hoisted_5$3={class:"filter-item min-w-[150px]"},_hoisted_6$2={class:"filter-actions ml-auto flex items-center gap-2"},_sfc_main$3=defineComponent({name:"CategoryFilterPanel",__name:"CategoryFilterPanel",props:{initialFilters:{}},emits:["filter"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,filters=ref({...props.initialFilters}),statusOptions=computed(()=>[{label:$t("category.filter.status.all"),value:""},{label:$t("category.filter.status.active"),value:"active"},{label:$t("category.filter.status.archived"),value:"archived"}]),sortOptions=computed(()=>[{label:$t("category.table.columns.sortOrder"),value:"sort_order"},{label:$t("category.table.columns.name"),value:"name"},{label:$t("category.table.columns.fileCount"),value:"file_count"},{label:$t("category.table.columns.createdAt"),value:"created_at"}]),handleSearch=()=>{emit("filter",{...filters.value})},handleReset=()=>{filters.value={keyword:"",status:"",sort_by:"sort_order",sort_order_dir:"asc"},emit("filter",{...filters.value})};return(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberDropdown=resolveComponent("CyberDropdown"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[createVNode(_component_CyberInput,{modelValue:filters.value.keyword,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>filters.value.keyword=$event),placeholder:unref($t)("category.placeholders.search"),"prefix-icon":"search",onKeyup:withKeys(handleSearch,["enter"])},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$3,[createVNode(_component_CyberDropdown,{modelValue:filters.value.status,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>filters.value.status=$event),options:statusOptions.value,placeholder:unref($t)("category.placeholders.status")},null,8,["modelValue","options","placeholder"])]),createBaseVNode("div",_hoisted_5$3,[createVNode(_component_CyberDropdown,{modelValue:filters.value.sort_by,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>filters.value.sort_by=$event),options:sortOptions.value,placeholder:unref($t)("category.filter.sortBy")},null,8,["modelValue","options","placeholder"])]),createBaseVNode("div",_hoisted_6$2,[createVNode(_component_CyberButton,{type:"text",size:"small",onClick:handleReset},{default:withCtx(()=>[_cache[3]||(_cache[3]=createBaseVNode("i",{class:"fas fa-redo mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.filter.reset")),1)]),_:1}),createVNode(_component_CyberButton,{type:"primary",size:"small",onClick:handleSearch},{default:withCtx(()=>[_cache[4]||(_cache[4]=createBaseVNode("i",{class:"fas fa-check mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.filter.apply")),1)]),_:1})])])])}}});const CategoryFilterPanel=_export_sfc(_sfc_main$3,[["__scopeId","data-v-78329b56"]]),_hoisted_1$2={class:"create-category-form space-y-4 p-4"},_hoisted_2$2={class:"form-group"},_hoisted_3$2={class:"mb-2 block text-sm font-medium text-content"},_hoisted_4$2={class:"form-group"},_hoisted_5$2={class:"mb-2 block text-sm font-medium text-content"},_hoisted_6$1={class:"form-group"},_hoisted_7$1={class:"mb-2 block text-sm font-medium text-content"},_hoisted_8$1={class:"mt-1 text-xs text-content-muted"},_hoisted_9$1={class:"flex justify-end gap-2 p-4"},_sfc_main$2=defineComponent({name:"CreateCategoryDialog",__name:"CreateCategoryDialog",props:{modelValue:{type:Boolean,required:!0},modelModifiers:{}},emits:mergeModels(["categoryCreated"],["update:modelValue"]),setup(__props,{emit:__emit}){const{$t}=useTexts(),visible=useModel(__props,"modelValue"),R=getValidationRules($t),emit=__emit,toast=useToast(),newCategory=ref({name:"",description:"",sort_order:0}),loading=ref(!1),handleCreate=async()=>{const nameCheck=Validator.validate(newCategory.value.name||"",[R.required,R.maxLength(50)],$t);if(!nameCheck.valid){toast.error(nameCheck.message||$t("utils.validation.errors.required"));return}loading.value=!0;try{const result=await createCategory(newCategory.value);result.success&&(emit("categoryCreated",result.data),visible.value=!1,resetForm())}catch{toast.error($t("category.toast.createError"))}loading.value=!1},resetForm=()=>{newCategory.value={name:"",description:"",sort_order:0}},handleClose=()=>{visible.value=!1,resetForm()};return(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberButton=resolveComponent("CyberButton"),_component_CyberDialog=resolveComponent("CyberDialog");return openBlock(),createBlock(_component_CyberDialog,{modelValue:visible.value,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>visible.value=$event),title:unref($t)("category.dialog.create.title"),width:"500px"},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_9$1,[createVNode(_component_CyberButton,{type:"secondary",onClick:handleClose},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("category.dialog.create.cancel")),1)]),_:1}),createVNode(_component_CyberButton,{type:"primary",loading:loading.value,onClick:handleCreate},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("category.dialog.create.create")),1)]),_:1},8,["loading"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("label",_hoisted_3$2,[createTextVNode(toDisplayString(unref($t)("category.form.name.label"))+" ",1),_cache[4]||(_cache[4]=createBaseVNode("span",{class:"text-error-400"},"*",-1))]),createVNode(_component_CyberInput,{modelValue:newCategory.value.name,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>newCategory.value.name=$event),placeholder:unref($t)("category.placeholders.name"),maxlength:"50",class:"w-full"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_4$2,[createBaseVNode("label",_hoisted_5$2,toDisplayString(unref($t)("category.form.description.label")),1),createVNode(_component_CyberInput,{modelValue:newCategory.value.description,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>newCategory.value.description=$event),type:"textarea",placeholder:unref($t)("category.placeholders.description"),maxlength:"500",rows:4,class:"w-full"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_6$1,[createBaseVNode("label",_hoisted_7$1,toDisplayString(unref($t)("category.form.sortOrder.label")),1),createVNode(_component_CyberInput,{modelValue:newCategory.value.sort_order,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>newCategory.value.sort_order=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("category.placeholders.sortOrder"),class:"w-full"},null,8,["modelValue","placeholder"]),createBaseVNode("p",_hoisted_8$1,toDisplayString(unref($t)("category.form.sortOrder.hint")),1)])])]),_:1},8,["modelValue","title"])}}});const CreateCategoryDialog=_export_sfc(_sfc_main$2,[["__scopeId","data-v-6afb0bad"]]),_hoisted_1$1={class:"batch-operations mb-4 p-3"},_hoisted_2$1={class:"flex items-center justify-between"},_hoisted_3$1={class:"flex items-center gap-3"},_hoisted_4$1={class:"text-sm text-content"},_hoisted_5$1={class:"flex gap-2"},_sfc_main$1=defineComponent({name:"BatchOperations",__name:"BatchOperations",props:{selectedCategories:{},allCategories:{}},emits:["clearSelection","batchDelete","batchCompleted"],setup(__props,{emit:__emit}){const emit=__emit,{$t}=useTexts(),handleClearSelection=()=>{emit("clearSelection")},handleBatchDelete=()=>{emit("batchDelete")};return(_ctx,_cache)=>{const _component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$1,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("div",_hoisted_3$1,[createBaseVNode("span",_hoisted_4$1,toDisplayString(unref($t)("category.batch.selected",{count:__props.selectedCategories.length})),1),createBaseVNode("button",{class:"text-xs text-content-muted transition-colors hover:text-content",onClick:handleClearSelection},[_cache[0]||(_cache[0]=createBaseVNode("i",{class:"fas fa-times mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.batch.clearSelection")),1)])]),createBaseVNode("div",_hoisted_5$1,[createVNode(_component_CyberButton,{type:"danger",size:"small",onClick:handleBatchDelete},{default:withCtx(()=>[_cache[1]||(_cache[1]=createBaseVNode("i",{class:"fas fa-trash mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.batch.delete")),1)]),_:1})])])])}}});const BatchOperations=_export_sfc(_sfc_main$1,[["__scopeId","data-v-c09684b6"]]),_hoisted_1={class:"category-manage-page"},_hoisted_2={class:"page-header mb-4 p-4"},_hoisted_3={class:"flex items-center justify-between gap-4"},_hoisted_4={class:"flex items-center gap-3"},_hoisted_5={class:"flex items-center gap-2"},_hoisted_6={class:"text-lg font-bold text-content-heading"},_hoisted_7={class:"inline-flex items-center rounded-full px-2 py-0.5 text-xs font-medium text-brand-400",style:{backgroundColor:"rgba(var(--color-brand-500-rgb), 0.1)"}},_hoisted_8={class:"mt-0.5 text-xs text-content-muted"},_hoisted_9={class:"flex gap-2"},_hoisted_10={class:"table-container mt-4 overflow-hidden"},_hoisted_11={class:"table-wrapper"},_hoisted_12={key:0,class:"category-empty-state"},_hoisted_13={class:"mt-4 text-lg font-medium text-content"},_hoisted_14={class:"mt-2 max-w-md text-center text-sm text-content-muted"},_hoisted_15={class:"action-buttons"},_hoisted_16=["title","onClick"],_hoisted_17=["title","onClick"],_hoisted_18=["title","onClick"],_hoisted_19={key:0,class:"pagination-wrapper bg-background-800/50 border-t border-subtle p-4 backdrop-blur-sm"},_hoisted_20={class:"flex justify-end gap-2 p-4"},_sfc_main=defineComponent({name:"CategoryManage",__name:"index",setup(__props){const router=useRouter(),{$t}=useTexts(),{dialogState,showConfirmDialog,handleConfirm,handleCancel}=useConfirmDialog(),{categories,loading,saveLoading,totalCategories,currentPage,pageSize,showFilter,currentFilters,showEditDialog,currentEditCategory,showCreateDialog,selectedCategoryIds,fetchCategoryList,handleFilter,handlePageChange,handlePageSizeChange,editCategory,saveCategoryChanges,toggleCategoryStatus,deleteCategoryItem,handleBatchDelete,handleRefresh,handleCategoryCreated,handleBatchCompleted,handleSelectionChange}=useCategoryManagement(),goToResourceByCategory=category=>{router.push({path:"/resource",query:{categoryId:String(category.id),category_name:category.name}})},dataTableColumns=[{key:"name",title:$t("category.table.columns.name"),width:200,align:"left",render:(value,record)=>h("div",{class:"flex flex-col"},[h("div",{class:"font-medium text-content border-b border-dashed border-content-muted/30 cursor-pointer hover:text-brand-400 hover:border-brand-400/60 transition-colors w-fit",title:$t("category.table.clickToView"),onClick:e=>{e.stopPropagation(),goToResourceByCategory(record)}},record.name),h("div",{class:"text-xs text-content-muted"},`ID: ${record.id}`)])},{key:"description",title:$t("category.table.columns.description"),dataIndex:"description",width:250,align:"left",ellipsis:!0,render:value=>h("span",{class:"text-content-muted"},value||$t("category.table.noDescription"))},{key:"source",title:$t("category.table.columns.source"),width:110,align:"center",render:(value,record)=>{const source=getSourceInfo(record.source);return h("span",{class:"inline-flex items-center gap-1 whitespace-nowrap rounded-md px-2 py-1 text-xs font-medium transition-all border",style:source.style},[h("i",{class:source.icon}),h("span",source.text)])}},{key:"file_count",title:$t("category.table.columns.fileCount"),width:100,align:"center",render:value=>h("span",{class:"font-mono text-brand-400"},value||0)},{key:"sort_order",title:$t("category.table.columns.sortOrder"),width:80,align:"center",render:value=>h("span",{class:"font-mono text-content-muted"},value)},{key:"status",title:$t("category.table.columns.status"),width:90,align:"center",render:(value,record)=>{const statusInfo=getStatusStyle(record.status);return h("span",{class:"inline-flex items-center gap-1.5 whitespace-nowrap rounded-md px-2.5 py-1 text-xs font-medium transition-all border",style:statusInfo.containerStyle},[h("span",{class:"w-1.5 h-1.5 rounded-full",style:statusInfo.dotStyle}),h("span",statusInfo.text)])}},{key:"created_at",title:$t("category.table.columns.createdAt"),width:160,align:"center",render:value=>h("span",{class:"text-content-muted"},formatDate(value))},{key:"actions",title:$t("category.table.columns.actions"),width:160,align:"center",slot:"actions"}],handleRowClick=(_row,_index)=>{},handleDeleteCategory=async category=>{await showConfirmDialog({title:$t("category.dialog.delete.title"),message:$t("category.dialog.delete.message"),type:"danger"})&&deleteCategoryItem(category.id)};return onMounted(()=>{fetchCategoryList()}),(_ctx,_cache)=>{const _component_CyberButton=resolveComponent("CyberButton"),_component_CyberSkeleton=__unplugin_components_0,_component_CyberDataTable=resolveComponent("CyberDataTable"),_component_CyberPagination=resolveComponent("CyberPagination"),_component_CyberDialog=resolveComponent("CyberDialog"),_component_CyberConfirmDialog=resolveComponent("CyberConfirmDialog");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[_cache[10]||(_cache[10]=createBaseVNode("div",{class:"page-header-icon flex h-9 w-9 items-center justify-center rounded-lg border"},[createBaseVNode("i",{class:"fas fa-folder-tree text-lg text-brand-400"})],-1)),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_5,[createBaseVNode("h1",_hoisted_6,toDisplayString(unref($t)("category.page.title")),1),createBaseVNode("span",_hoisted_7,toDisplayString(unref(totalCategories)),1)]),createBaseVNode("p",_hoisted_8,toDisplayString(unref($t)("category.page.subtitle")),1)])]),createBaseVNode("div",_hoisted_9,[createVNode(_component_CyberButton,{type:"primary",size:"small",onClick:_cache[0]||(_cache[0]=$event=>showCreateDialog.value=!0)},{default:withCtx(()=>[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-plus mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.page.create")),1)]),_:1}),createVNode(_component_CyberButton,{type:"outlined",size:"small",loading:unref(loading),onClick:unref(handleRefresh)},{default:withCtx(()=>[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-sync-alt mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.page.refresh")),1)]),_:1},8,["loading","onClick"]),createVNode(_component_CyberButton,{type:"outlined",size:"small",class:normalizeClass({"bg-brand-500/5 border-brand-400 text-brand-400":unref(showFilter)}),onClick:_cache[1]||(_cache[1]=$event=>showFilter.value=!unref(showFilter))},{default:withCtx(()=>[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-filter mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref(showFilter)?unref($t)("category.page.hideFilter"):unref($t)("category.page.filter")),1)]),_:1},8,["class"])])])]),createVNode(Transition,{name:"filter-slide"},{default:withCtx(()=>[unref(showFilter)?(openBlock(),createBlock(CategoryFilterPanel,{key:0,"initial-filters":unref(currentFilters),onFilter:unref(handleFilter)},null,8,["initial-filters","onFilter"])):createCommentVNode("",!0)]),_:1}),unref(selectedCategoryIds).length>0?(openBlock(),createBlock(BatchOperations,{key:0,"selected-categories":unref(selectedCategoryIds),"all-categories":unref(categories),onClearSelection:_cache[2]||(_cache[2]=()=>selectedCategoryIds.value=[]),onBatchDelete:unref(handleBatchDelete),onBatchCompleted:unref(handleBatchCompleted)},null,8,["selected-categories","all-categories","onBatchDelete","onBatchCompleted"])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_10,[createBaseVNode("div",_hoisted_11,[createVNode(_component_CyberSkeleton,{type:"table",count:unref(pageSize),loading:unref(loading)},null,8,["count","loading"]),!unref(loading)&&unref(categories).length===0?(openBlock(),createElementBlock("div",_hoisted_12,[_cache[15]||(_cache[15]=createBaseVNode("div",{class:"category-icon-wrapper"},[createBaseVNode("i",{class:"fas fa-folder-open text-content-muted/30 text-5xl"})],-1)),createBaseVNode("h3",_hoisted_13,toDisplayString(unref($t)("category.empty.title")),1),createBaseVNode("p",_hoisted_14,toDisplayString(unref($t)("category.empty.description")),1),createVNode(_component_CyberButton,{type:"primary",size:"medium",class:"mt-4",onClick:_cache[3]||(_cache[3]=$event=>showCreateDialog.value=!0)},{default:withCtx(()=>[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-plus mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("category.empty.action")),1)]),_:1})])):createCommentVNode("",!0),!unref(loading)&&unref(categories).length>0?(openBlock(),createBlock(_component_CyberDataTable,{key:1,data:unref(categories),columns:dataTableColumns,loading:unref(loading),selectable:!0,hoverable:!0,striped:!0,bordered:!0,size:"small","row-key":"id","max-height":"calc(100vh - 200px)","selected-row-keys":unref(selectedCategoryIds),"loading-text":unref($t)("category.table.loading"),"onUpdate:selectedRowKeys":unref(handleSelectionChange),onRowClick:handleRowClick},{actions:withCtx(({record})=>[createBaseVNode("div",_hoisted_15,[createBaseVNode("button",{class:"action-btn action-btn-edit",title:unref($t)("category.actions.edit"),onClick:withModifiers($event=>unref(editCategory)(record),["stop"])},[..._cache[16]||(_cache[16]=[createBaseVNode("i",{class:"fas fa-edit"},null,-1)])],8,_hoisted_16),createBaseVNode("button",{class:"action-btn action-btn-toggle",title:record.status==="active"?unref($t)("category.actions.archive"):unref($t)("category.actions.activate"),onClick:withModifiers($event=>unref(toggleCategoryStatus)(record),["stop"])},[createBaseVNode("i",{class:normalizeClass(record.status==="active"?"fas fa-archive":"fas fa-undo")},null,2)],8,_hoisted_17),createBaseVNode("button",{class:"action-btn action-btn-delete",title:unref($t)("category.actions.delete"),onClick:withModifiers($event=>handleDeleteCategory(record),["stop"])},[..._cache[17]||(_cache[17]=[createBaseVNode("i",{class:"fas fa-trash"},null,-1)])],8,_hoisted_18)])]),_:1},8,["data","loading","selected-row-keys","loading-text","onUpdate:selectedRowKeys"])):createCommentVNode("",!0)]),unref(totalCategories)>0?(openBlock(),createElementBlock("div",_hoisted_19,[createVNode(_component_CyberPagination,{"current-page":unref(currentPage),"onUpdate:currentPage":[_cache[4]||(_cache[4]=$event=>isRef(currentPage)?currentPage.value=$event:null),unref(handlePageChange)],total:unref(totalCategories),"page-size":unref(pageSize),"show-page-size-selector":!0,"show-quick-jumper":!0,"onUpdate:pageSize":unref(handlePageSizeChange)},null,8,["current-page","total","page-size","onUpdate:currentPage","onUpdate:pageSize"])])):createCommentVNode("",!0)]),createVNode(_component_CyberDialog,{modelValue:unref(showEditDialog),"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>isRef(showEditDialog)?showEditDialog.value=$event:null),title:unref($t)("category.dialog.edit.title"),width:"500px"},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_20,[createVNode(_component_CyberButton,{type:"secondary",onClick:_cache[6]||(_cache[6]=$event=>showEditDialog.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("category.dialog.edit.cancel")),1)]),_:1}),createVNode(_component_CyberButton,{type:"primary",loading:unref(saveLoading),onClick:unref(saveCategoryChanges)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("category.dialog.edit.save")),1)]),_:1},8,["loading","onClick"])])]),default:withCtx(()=>[createVNode(CategoryForm,{modelValue:unref(currentEditCategory),"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>isRef(currentEditCategory)?currentEditCategory.value=$event:null)},null,8,["modelValue"])]),_:1},8,["modelValue","title"]),createVNode(CreateCategoryDialog,{modelValue:unref(showCreateDialog),"onUpdate:modelValue":_cache[8]||(_cache[8]=$event=>isRef(showCreateDialog)?showCreateDialog.value=$event:null),onCategoryCreated:unref(handleCategoryCreated)},null,8,["modelValue","onCategoryCreated"]),unref(dialogState).isVisible?(openBlock(),createBlock(_component_CyberConfirmDialog,{key:1,modelValue:unref(dialogState).isVisible,"onUpdate:modelValue":_cache[9]||(_cache[9]=$event=>unref(dialogState).isVisible=$event),title:unref(dialogState).config.title,message:unref(dialogState).config.message,type:unref(dialogState).config.type,"confirm-text":unref(dialogState).config.confirmText,"cancel-text":unref(dialogState).config.cancelText,"show-input":unref(dialogState).config.showInput,"input-placeholder":unref(dialogState).config.inputPlaceholder,"input-value":unref(dialogState).config.inputValue,"input-validator":unref(dialogState).config.inputValidator,onConfirm:unref(handleConfirm),onCancel:unref(handleCancel)},null,8,["modelValue","title","message","type","confirm-text","cancel-text","show-input","input-placeholder","input-value","input-validator","onConfirm","onCancel"])):createCommentVNode("",!0)])}}});const index=_export_sfc(_sfc_main,[["__scopeId","data-v-b95e01c4"]]);export{index as default};
