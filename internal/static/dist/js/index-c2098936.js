import{d as defineComponent,r as ref,c as computed,b as onMounted,w as watch,I as createElementBlock,a0 as createBaseVNode,a1 as toDisplayString,u as unref,ab as createTextVNode,K as createCommentVNode,a5 as withModifiers,R as normalizeClass,H as withDirectives,$ as vShow,f as createVNode,L as withCtx,a6 as Transition,E as resolveComponent,a3 as useRouter,z as openBlock}from"./vue-vendor-31320f47.js";import{n as useAuthStore,m as useSettingsStore,j as useTexts,aM as setupApi,q as useToast,_ as _export_sfc}from"./index-ae9c3219.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";const _hoisted_1={class:"setup-page"},_hoisted_2={key:0,class:"state-box loading-state"},_hoisted_3={class:"state-text"},_hoisted_4={key:1,class:"success-page"},_hoisted_5={class:"success-header"},_hoisted_6={class:"success-title"},_hoisted_7={class:"success-subtitle"},_hoisted_8={class:"quick-entry-grid"},_hoisted_9={class:"card-title"},_hoisted_10={class:"card-desc"},_hoisted_11={class:"card-title"},_hoisted_12={class:"card-desc"},_hoisted_13={class:"card-title"},_hoisted_14={class:"card-desc"},_hoisted_15={class:"card-title"},_hoisted_16={class:"card-desc"},_hoisted_17={class:"success-footer"},_hoisted_18={class:"footer-tip"},_hoisted_19={key:2,class:"install-form"},_hoisted_20={class:"form-header"},_hoisted_21={class:"logo-title"},_hoisted_22={class:"header-subtitle"},_hoisted_23={key:0,class:"deploy-mode-badge"},_hoisted_24={key:0},_hoisted_25={key:1},_hoisted_26={key:0,class:"form-section db-section"},_hoisted_27={class:"section-header"},_hoisted_28={class:"db-type-tabs"},_hoisted_29={class:"config-area"},_hoisted_30={class:"config-content"},_hoisted_31={class:"field"},_hoisted_32={class:"config-content"},_hoisted_33={class:"field-row"},_hoisted_34={class:"field"},_hoisted_35={class:"field field-sm"},_hoisted_36={class:"field-row"},_hoisted_37={class:"field"},_hoisted_38={class:"field"},_hoisted_39={class:"field"},_hoisted_40={class:"form-section admin-section"},_hoisted_41={class:"section-header"},_hoisted_42={class:"field-row"},_hoisted_43={class:"field"},_hoisted_44={class:"field"},_hoisted_45={class:"optional-badge"},_hoisted_46={class:"redis-config"},_hoisted_47={class:"field-row"},_hoisted_48={class:"field"},_hoisted_49={class:"field field-sm"},_hoisted_50={class:"field-row"},_hoisted_51={class:"field"},_hoisted_52={class:"field field-sm"},_hoisted_53={class:"optional-badge"},_hoisted_54={class:"vector-config"},_hoisted_55={class:"config-hint"},_hoisted_56={class:"vector-mode-selector"},_hoisted_57={class:"mode-title"},_hoisted_58={class:"mode-desc"},_hoisted_59={class:"mode-badge"},_hoisted_60={class:"mode-title"},_hoisted_61={class:"mode-desc"},_hoisted_62={key:0,class:"builtin-advanced"},_hoisted_63={class:"builtin-advanced-content"},_hoisted_64={class:"port-hint"},_hoisted_65={class:"field"},_hoisted_66={class:"port-desc"},_hoisted_67={class:"field"},_hoisted_68={class:"port-desc"},_hoisted_69={key:1,class:"field"},_hoisted_70={class:"field field-sm"},_hoisted_71={class:"field"},_hoisted_72=["disabled"],_hoisted_73={class:"form-footer"},_hoisted_74=["disabled"],_hoisted_75=["disabled"],_sfc_main=defineComponent({name:"SetupPage",__name:"index",setup(__props){const router=useRouter(),toast=useToast(),authStore=useAuthStore(),settingsStore=useSettingsStore(),{$t}=useTexts(),isLoading=ref(!0),isInstalling=ref(!1),isTestingConnection=ref(!1),installCompleted=ref(!1),showRedisConfig=ref(!1),showVectorConfig=ref(!1),connectionTestResult=ref(null),vectorTestResult=ref(null),isTestingVector=ref(!1),vectorMode=ref("builtin"),showAdvancedConfig=ref(!1),builtinPorts=ref({http:6333,grpc:6334}),setupStatus=ref(null),needsFullConfig=computed(()=>setupStatus.value?.setup_level===2),isDockerMode=computed(()=>{const deployMode=setupStatus.value?.deploy_mode;return deployMode==="docker"||deployMode==="compose"}),form=ref({database:{type:"mysql",host:"127.0.0.1",port:3306,username:"root",password:"",name:"pixelpunk",path:"./pixelpunk.db"},redis:{host:"localhost",port:6379,password:"",db:0},vector:{qdrant_url:"http://localhost:6333",qdrant_timeout:30,use_builtin:!0,http_port:6333,grpc_port:6334},admin_username:"root",admin_password:""}),checkInstallStatus=async()=>{try{const result=await setupApi.getInstallStatus();result.success&&result.data&&(setupStatus.value=result.data,result.data.installed&&(installCompleted.value=!0))}catch{}finally{isLoading.value=!1}},testConnection=async()=>{if(form.value.database.type==="mysql"){if(!form.value.database.host||!form.value.database.username||!form.value.database.name){connectionTestResult.value={success:!1,message:$t("setup.database.validation.mysqlRequired")};return}}else if(form.value.database.type==="sqlite"&&!form.value.database.path){connectionTestResult.value={success:!1,message:$t("setup.database.validation.sqliteRequired")};return}isTestingConnection.value=!0,connectionTestResult.value=null;try{const result=await setupApi.testDatabaseConnection(form.value.database);connectionTestResult.value={success:result.success,message:result.success?form.value.database.type==="sqlite"?$t("setup.database.test.success.sqlite"):$t("setup.database.test.success.mysql"):result.message||$t("setup.database.validation.connectionFailed")}}catch(error){connectionTestResult.value={success:!1,message:`${$t("setup.database.validation.connectionFailed")}: ${error?.response?.data?.message||error?.message||$t("setup.database.validation.unknownError")}`}}finally{isTestingConnection.value=!1}},testVectorConnection=async()=>{const testUrl=vectorMode.value==="builtin"?"http://localhost:6333":form.value.vector?.qdrant_url;if(!testUrl){vectorTestResult.value={success:!1,message:$t("setup.vector.validation.urlRequired")};return}isTestingVector.value=!0,vectorTestResult.value=null;try{const url=new URL(testUrl);if(!url.protocol||!url.hostname)throw new Error($t("setup.vector.validation.invalidUrl"));vectorTestResult.value={success:!0,message:vectorMode.value==="builtin"?$t("setup.vector.test.success.builtin"):$t("setup.vector.test.success.external")}}catch(error){vectorTestResult.value={success:!1,message:`${$t("setup.vector.validation.urlInvalid")}: ${error?.message||$t("setup.vector.validation.formatError")}`}}finally{isTestingVector.value=!1}},handleSubmit=async()=>{if(needsFullConfig.value){if(form.value.database.type==="mysql"&&(!form.value.database.host||!form.value.database.username||!form.value.database.name)){toast.error($t("setup.admin.validation.mysqlInfoRequired"));return}if(form.value.database.type==="sqlite"&&!form.value.database.path){toast.error($t("setup.admin.validation.sqlitePathRequired"));return}}if(!form.value.admin_username||form.value.admin_username.length<3){toast.error($t("setup.admin.validation.usernameRequired"));return}if(!form.value.admin_password){toast.error($t("setup.admin.validation.passwordRequired"));return}if(form.value.admin_password.length<6){toast.error($t("setup.admin.validation.passwordTooShort"));return}isInstalling.value=!0;try{form.value.vector&&(vectorMode.value==="builtin"?(form.value.vector.qdrant_url=`http://localhost:${builtinPorts.value.http}`,form.value.vector.use_builtin=!0,form.value.vector.http_port=builtinPorts.value.http,form.value.vector.grpc_port=builtinPorts.value.grpc):form.value.vector.use_builtin=!1);const result=await setupApi.installSystem(form.value);if(result.success){result.data?.token&&result.data?.user&&(authStore.setToken(result.data.token),authStore.setUserInfo(result.data.user));try{await settingsStore.loadGlobalSettings()}catch{}installCompleted.value=!0}}catch{}finally{isInstalling.value=!1}};return onMounted(()=>checkInstallStatus()),watch(()=>form.value.database.type,()=>{connectionTestResult.value=null}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1,[_cache[53]||(_cache[53]=createBaseVNode("div",{class:"cyber-bg"},[createBaseVNode("div",{class:"cyber-grid"}),createBaseVNode("div",{class:"scan-line"})],-1)),createBaseVNode("div",{class:normalizeClass(["setup-container",{"docker-mode":isDockerMode.value}])},[isLoading.value?(openBlock(),createElementBlock("div",_hoisted_2,[_cache[27]||(_cache[27]=createBaseVNode("div",{class:"spinner"},null,-1)),createBaseVNode("p",_hoisted_3,toDisplayString(unref($t)("setup.loading")),1)])):installCompleted.value?(openBlock(),createElementBlock("div",_hoisted_4,[createBaseVNode("div",_hoisted_5,[_cache[28]||(_cache[28]=createBaseVNode("div",{class:"success-icon-wrapper"},[createBaseVNode("div",{class:"success-icon-bg"}),createBaseVNode("i",{class:"fas fa-check-circle success-icon"})],-1)),createBaseVNode("h2",_hoisted_6,toDisplayString(unref($t)("setup.success.title")),1),createBaseVNode("p",_hoisted_7,toDisplayString(unref($t)("setup.success.subtitle")),1)]),createBaseVNode("div",_hoisted_8,[createBaseVNode("div",{class:"entry-card",onClick:_cache[0]||(_cache[0]=$event=>unref(router).push("/"))},[_cache[30]||(_cache[30]=createBaseVNode("div",{class:"card-icon home-icon"},[createBaseVNode("i",{class:"fas fa-home"})],-1)),createBaseVNode("h3",_hoisted_9,[_cache[29]||(_cache[29]=createBaseVNode("i",{class:"fas fa-home title-icon"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.success.entries.home.title")),1)]),createBaseVNode("p",_hoisted_10,toDisplayString(unref($t)("setup.success.entries.home.desc")),1)]),createBaseVNode("div",{class:"entry-card",onClick:_cache[1]||(_cache[1]=$event=>unref(router).push("/upload"))},[_cache[32]||(_cache[32]=createBaseVNode("div",{class:"card-icon upload-icon"},[createBaseVNode("i",{class:"fas fa-cloud-upload-alt"})],-1)),createBaseVNode("h3",_hoisted_11,[_cache[31]||(_cache[31]=createBaseVNode("i",{class:"fas fa-upload title-icon"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.success.entries.upload.title")),1)]),createBaseVNode("p",_hoisted_12,toDisplayString(unref($t)("setup.success.entries.upload.desc")),1)]),createBaseVNode("div",{class:"entry-card",onClick:_cache[2]||(_cache[2]=$event=>unref(router).push("/admin/dashboard"))},[_cache[34]||(_cache[34]=createBaseVNode("div",{class:"card-icon dashboard-icon"},[createBaseVNode("i",{class:"fas fa-chart-line"})],-1)),createBaseVNode("h3",_hoisted_13,[_cache[33]||(_cache[33]=createBaseVNode("i",{class:"fas fa-tachometer-alt title-icon"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.success.entries.dashboard.title")),1)]),createBaseVNode("p",_hoisted_14,toDisplayString(unref($t)("setup.success.entries.dashboard.desc")),1)]),createBaseVNode("div",{class:"entry-card",onClick:_cache[3]||(_cache[3]=$event=>unref(router).push("/admin/settings"))},[_cache[36]||(_cache[36]=createBaseVNode("div",{class:"card-icon settings-icon"},[createBaseVNode("i",{class:"fas fa-cog"})],-1)),createBaseVNode("h3",_hoisted_15,[_cache[35]||(_cache[35]=createBaseVNode("i",{class:"fas fa-sliders-h title-icon"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.success.entries.settings.title")),1)]),createBaseVNode("p",_hoisted_16,toDisplayString(unref($t)("setup.success.entries.settings.desc")),1)])]),createBaseVNode("div",_hoisted_17,[createBaseVNode("p",_hoisted_18,[_cache[37]||(_cache[37]=createBaseVNode("i",{class:"fas fa-info-circle"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.success.tip")),1)])])])):(openBlock(),createElementBlock("div",_hoisted_19,[createBaseVNode("div",_hoisted_20,[_cache[39]||(_cache[39]=createBaseVNode("div",{class:"header-icon"},[createBaseVNode("i",{class:"fas fa-rocket"})],-1)),createBaseVNode("h1",_hoisted_21,toDisplayString(unref($t)("setup.title")),1),createBaseVNode("p",_hoisted_22,toDisplayString(unref($t)("setup.subtitle")),1),setupStatus.value?.deploy_mode&&setupStatus.value.deploy_mode!=="standalone"?(openBlock(),createElementBlock("div",_hoisted_23,[_cache[38]||(_cache[38]=createBaseVNode("i",{class:"fas fa-docker"},null,-1)),setupStatus.value.deploy_mode==="docker"?(openBlock(),createElementBlock("span",_hoisted_24,"Docker Mode")):setupStatus.value.deploy_mode==="compose"?(openBlock(),createElementBlock("span",_hoisted_25,"Docker Compose Mode")):createCommentVNode("",!0)])):createCommentVNode("",!0)]),createBaseVNode("form",{onSubmit:withModifiers(handleSubmit,["prevent"]),class:"form-body"},[needsFullConfig.value?(openBlock(),createElementBlock("div",_hoisted_26,[createBaseVNode("div",_hoisted_27,[_cache[40]||(_cache[40]=createBaseVNode("i",{class:"fas fa-database"},null,-1)),createBaseVNode("h3",null,toDisplayString(unref($t)("setup.database.title")),1)]),createBaseVNode("div",_hoisted_28,[createBaseVNode("button",{type:"button",class:normalizeClass(["db-tab",{active:form.value.database.type==="mysql"}]),onClick:_cache[4]||(_cache[4]=$event=>form.value.database.type="mysql")},[_cache[41]||(_cache[41]=createBaseVNode("i",{class:"fas fa-database"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.database.mysql")),1)],2),createBaseVNode("button",{type:"button",class:normalizeClass(["db-tab",{active:form.value.database.type==="sqlite"}]),onClick:_cache[5]||(_cache[5]=$event=>form.value.database.type="sqlite")},[_cache[42]||(_cache[42]=createBaseVNode("i",{class:"fas fa-file-alt"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.database.sqlite")),1)],2)]),createBaseVNode("div",_hoisted_29,[withDirectives(createBaseVNode("div",_hoisted_30,[createBaseVNode("div",_hoisted_31,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.path")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.path,"onUpdate:modelValue":_cache[6]||(_cache[6]=$event=>form.value.database.path=$event),placeholder:unref($t)("setup.database.placeholders.path"),size:"small"},null,8,["modelValue","placeholder"])])],512),[[vShow,form.value.database.type==="sqlite"]]),withDirectives(createBaseVNode("div",_hoisted_32,[createBaseVNode("div",_hoisted_33,[createBaseVNode("div",_hoisted_34,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.host")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.host,"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>form.value.database.host=$event),placeholder:unref($t)("setup.database.placeholders.host"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_35,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.port")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.port,"onUpdate:modelValue":_cache[8]||(_cache[8]=$event=>form.value.database.port=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.database.placeholders.port"),size:"small"},null,8,["modelValue","placeholder"])])]),createBaseVNode("div",_hoisted_36,[createBaseVNode("div",_hoisted_37,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.user")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.username,"onUpdate:modelValue":_cache[9]||(_cache[9]=$event=>form.value.database.username=$event),placeholder:unref($t)("setup.database.placeholders.user"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_38,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.password")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.password,"onUpdate:modelValue":_cache[10]||(_cache[10]=$event=>form.value.database.password=$event),type:"password",placeholder:unref($t)("setup.database.placeholders.password"),size:"small"},null,8,["modelValue","placeholder"])])]),createBaseVNode("div",_hoisted_39,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.database.fields.name")),1),createVNode(_component_CyberInput,{modelValue:form.value.database.name,"onUpdate:modelValue":_cache[11]||(_cache[11]=$event=>form.value.database.name=$event),placeholder:unref($t)("setup.database.placeholders.name"),size:"small"},null,8,["modelValue","placeholder"])])],512),[[vShow,form.value.database.type==="mysql"]])]),connectionTestResult.value?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["test-result",connectionTestResult.value.success?"success":"error"])},[createBaseVNode("i",{class:normalizeClass(["fas",connectionTestResult.value.success?"fa-check-circle":"fa-times-circle"])},null,2),createTextVNode(" "+toDisplayString(connectionTestResult.value.message),1)],2)):createCommentVNode("",!0)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_40,[createBaseVNode("div",_hoisted_41,[_cache[43]||(_cache[43]=createBaseVNode("i",{class:"fas fa-user-shield"},null,-1)),createBaseVNode("h3",null,toDisplayString(unref($t)("setup.admin.title")),1)]),createBaseVNode("div",_hoisted_42,[createBaseVNode("div",_hoisted_43,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.admin.fields.username")),1),createVNode(_component_CyberInput,{modelValue:form.value.admin_username,"onUpdate:modelValue":_cache[12]||(_cache[12]=$event=>form.value.admin_username=$event),placeholder:unref($t)("setup.admin.placeholders.username"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_44,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.admin.fields.password")),1),createVNode(_component_CyberInput,{modelValue:form.value.admin_password,"onUpdate:modelValue":_cache[13]||(_cache[13]=$event=>form.value.admin_password=$event),type:"password",placeholder:unref($t)("setup.admin.placeholders.password"),size:"small"},null,8,["modelValue","placeholder"])])])]),needsFullConfig.value?(openBlock(),createElementBlock("div",{key:1,class:normalizeClass(["form-section","redis-section",{collapsed:!showRedisConfig.value}])},[createBaseVNode("div",{class:"section-header clickable",onClick:_cache[14]||(_cache[14]=$event=>showRedisConfig.value=!showRedisConfig.value)},[_cache[44]||(_cache[44]=createBaseVNode("i",{class:"fas fa-memory"},null,-1)),createBaseVNode("h3",null,toDisplayString(unref($t)("setup.redis.title")),1),createBaseVNode("span",_hoisted_45,toDisplayString(unref($t)("setup.redis.optional")),1),createBaseVNode("i",{class:normalizeClass(["fas","chevron",showRedisConfig.value?"fa-chevron-up":"fa-chevron-down"])},null,2)]),createVNode(Transition,{name:"redis-collapse"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_46,[createBaseVNode("div",_hoisted_47,[createBaseVNode("div",_hoisted_48,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.redis.fields.host")),1),createVNode(_component_CyberInput,{modelValue:form.value.redis.host,"onUpdate:modelValue":_cache[15]||(_cache[15]=$event=>form.value.redis.host=$event),placeholder:unref($t)("setup.redis.placeholders.host"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_49,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.redis.fields.port")),1),createVNode(_component_CyberInput,{modelValue:form.value.redis.port,"onUpdate:modelValue":_cache[16]||(_cache[16]=$event=>form.value.redis.port=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.redis.placeholders.port"),size:"small"},null,8,["modelValue","placeholder"])])]),createBaseVNode("div",_hoisted_50,[createBaseVNode("div",_hoisted_51,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.redis.fields.password")),1),createVNode(_component_CyberInput,{modelValue:form.value.redis.password,"onUpdate:modelValue":_cache[17]||(_cache[17]=$event=>form.value.redis.password=$event),type:"password",placeholder:unref($t)("setup.redis.placeholders.password"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_52,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.redis.fields.db")),1),createVNode(_component_CyberInput,{modelValue:form.value.redis.db,"onUpdate:modelValue":_cache[18]||(_cache[18]=$event=>form.value.redis.db=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.redis.placeholders.db"),size:"small"},null,8,["modelValue","placeholder"])])])],512),[[vShow,showRedisConfig.value]])]),_:1})],2)):createCommentVNode("",!0),needsFullConfig.value?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["form-section","vector-section",{collapsed:!showVectorConfig.value}])},[createBaseVNode("div",{class:"section-header clickable",onClick:_cache[19]||(_cache[19]=$event=>showVectorConfig.value=!showVectorConfig.value)},[_cache[45]||(_cache[45]=createBaseVNode("i",{class:"fas fa-vector-square"},null,-1)),createBaseVNode("h3",null,toDisplayString(unref($t)("setup.vector.title")),1),createBaseVNode("span",_hoisted_53,toDisplayString(unref($t)("setup.vector.optional")),1),createBaseVNode("i",{class:normalizeClass(["fas","chevron",showVectorConfig.value?"fa-chevron-up":"fa-chevron-down"])},null,2)]),createVNode(Transition,{name:"vector-collapse"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_54,[createBaseVNode("div",_hoisted_55,[_cache[46]||(_cache[46]=createBaseVNode("i",{class:"fas fa-info-circle"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("setup.vector.hint")),1)]),createBaseVNode("div",_hoisted_56,[createBaseVNode("div",{class:normalizeClass(["mode-option",{active:vectorMode.value==="builtin"}]),onClick:_cache[20]||(_cache[20]=$event=>vectorMode.value="builtin")},[createBaseVNode("div",_hoisted_57,[_cache[47]||(_cache[47]=createBaseVNode("i",{class:"fas fa-box"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.vector.mode.builtin.title")),1)]),createBaseVNode("div",_hoisted_58,toDisplayString(unref($t)("setup.vector.mode.builtin.desc")),1),createBaseVNode("div",_hoisted_59,toDisplayString(unref($t)("setup.vector.mode.builtin.badge")),1)],2),createBaseVNode("div",{class:normalizeClass(["mode-option",{active:vectorMode.value==="external"}]),onClick:_cache[21]||(_cache[21]=$event=>vectorMode.value="external")},[createBaseVNode("div",_hoisted_60,[_cache[48]||(_cache[48]=createBaseVNode("i",{class:"fas fa-network-wired"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("setup.vector.mode.external.title")),1)]),createBaseVNode("div",_hoisted_61,toDisplayString(unref($t)("setup.vector.mode.external.desc")),1)],2)]),vectorMode.value==="builtin"?(openBlock(),createElementBlock("div",_hoisted_62,[createBaseVNode("div",{class:normalizeClass(["builtin-advanced-header",{expanded:showAdvancedConfig.value}]),onClick:_cache[22]||(_cache[22]=$event=>showAdvancedConfig.value=!showAdvancedConfig.value)},[_cache[49]||(_cache[49]=createBaseVNode("i",{class:"fas fa-chevron-right"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("setup.vector.advanced.title")),1)],2),createVNode(Transition,{name:"fade"},{default:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_63,[createBaseVNode("div",_hoisted_64,[_cache[50]||(_cache[50]=createBaseVNode("i",{class:"fas fa-info-circle"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("setup.vector.advanced.hint")),1)]),createBaseVNode("div",_hoisted_65,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.vector.advanced.httpPort.label")),1),createVNode(_component_CyberInput,{modelValue:builtinPorts.value.http,"onUpdate:modelValue":_cache[23]||(_cache[23]=$event=>builtinPorts.value.http=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.vector.placeholders.httpPort"),size:"small"},null,8,["modelValue","placeholder"]),createBaseVNode("p",_hoisted_66,toDisplayString(unref($t)("setup.vector.advanced.httpPort.desc")),1)]),createBaseVNode("div",_hoisted_67,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.vector.advanced.grpcPort.label")),1),createVNode(_component_CyberInput,{modelValue:builtinPorts.value.grpc,"onUpdate:modelValue":_cache[24]||(_cache[24]=$event=>builtinPorts.value.grpc=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.vector.placeholders.grpcPort"),size:"small"},null,8,["modelValue","placeholder"]),createBaseVNode("p",_hoisted_68,toDisplayString(unref($t)("setup.vector.advanced.grpcPort.desc")),1)])],512),[[vShow,showAdvancedConfig.value]])]),_:1})])):createCommentVNode("",!0),vectorMode.value==="external"?(openBlock(),createElementBlock("div",_hoisted_69,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.vector.fields.url")),1),createVNode(_component_CyberInput,{modelValue:form.value.vector.qdrant_url,"onUpdate:modelValue":_cache[25]||(_cache[25]=$event=>form.value.vector.qdrant_url=$event),placeholder:unref($t)("setup.vector.placeholders.url"),size:"small"},null,8,["modelValue","placeholder"])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_70,[createBaseVNode("label",null,toDisplayString(unref($t)("setup.vector.fields.timeout")),1),createVNode(_component_CyberInput,{modelValue:form.value.vector.qdrant_timeout,"onUpdate:modelValue":_cache[26]||(_cache[26]=$event=>form.value.vector.qdrant_timeout=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("setup.vector.placeholders.timeout"),size:"small"},null,8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_71,[createBaseVNode("button",{type:"button",disabled:isTestingVector.value,onClick:testVectorConnection,class:"vector-test-btn"},[createBaseVNode("i",{class:normalizeClass(["fas",isTestingVector.value?"fa-spinner fa-spin":"fa-plug"])},null,2),createTextVNode(" "+toDisplayString(isTestingVector.value?unref($t)("setup.vector.test.testing"):vectorMode.value==="builtin"?unref($t)("setup.vector.test.button.builtin"):unref($t)("setup.vector.test.button.external")),1)],8,_hoisted_72)]),vectorTestResult.value?(openBlock(),createElementBlock("div",{key:2,class:normalizeClass(["test-result",vectorTestResult.value.success?"success":"error"])},[createBaseVNode("i",{class:normalizeClass(["fas",vectorTestResult.value.success?"fa-check-circle":"fa-times-circle"])},null,2),createTextVNode(" "+toDisplayString(vectorTestResult.value.message),1)],2)):createCommentVNode("",!0)],512),[[vShow,showVectorConfig.value]])]),_:1})],2)):createCommentVNode("",!0),createBaseVNode("div",_hoisted_73,[needsFullConfig.value?(openBlock(),createElementBlock("button",{key:0,type:"button",disabled:isTestingConnection.value,onClick:testConnection,class:"test-btn"},[_cache[51]||(_cache[51]=createBaseVNode("i",{class:"fas fa-plug"},null,-1)),createTextVNode(" "+toDisplayString(isTestingConnection.value?unref($t)("setup.database.test.testing"):unref($t)("setup.database.test.button")),1)],8,_hoisted_74)):createCommentVNode("",!0),createBaseVNode("button",{type:"button",disabled:isInstalling.value,onClick:handleSubmit,class:"install-btn"},[_cache[52]||(_cache[52]=createBaseVNode("i",{class:"fas fa-rocket"},null,-1)),createTextVNode(" "+toDisplayString(isInstalling.value?unref($t)("setup.actions.installing"):unref($t)("setup.actions.install")),1)],8,_hoisted_75)])],32)]))],2)])}}});const index=_export_sfc(_sfc_main,[["__scopeId","data-v-c3307419"]]);export{index as default};
