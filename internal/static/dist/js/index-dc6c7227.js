import{j as useTexts,_ as _export_sfc,q as useToast,x as get,a3 as getValidationRules,a6 as Validator,aO as checkBaiduAnalytics,aP as checkGoogleAnalytics,g as getSettings,b as batchUpsertSettings,aQ as __unplugin_components_0$1}from"./index-4d0dab4c.js";import{d as defineComponent,a as reactive,w as watch,b as onMounted,E as resolveComponent,z as openBlock,I as createElementBlock,a0 as createBaseVNode,ab as createTextVNode,a1 as toDisplayString,u as unref,f as createVNode,L as withCtx,r as ref,R as normalizeClass,K as createCommentVNode,F as Fragment,M as renderList,aa as withKeys,J as renderSlot,c as computed,ad as useSlots,p as provide,e as inject,H as withDirectives,$ as vShow,a4 as useRoute,a3 as useRouter,A as createBlock}from"./vue-vendor-31320f47.js";import{d as defaultSettings,t as testMailServer}from"./defaults-27db9993.js";import{t as testProxy}from"./oauth-8e481577.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";const _hoisted_1$h={class:"space-y-5"},_hoisted_2$e={class:"space-y-5"},_hoisted_3$e={class:"space-y-5"},_hoisted_4$e={class:"flex flex-col md:flex-row md:items-start"},_hoisted_5$d={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_6$d={class:"flex-1"},_hoisted_7$c={class:"text-content-subtle mt-1 text-xs"},_hoisted_8$c={class:"flex flex-col md:flex-row md:items-center"},_hoisted_9$c={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_10$b={class:"flex-1"},_sfc_main$h=defineComponent({__name:"WebsiteSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,websiteDefaults=defaultSettings.website.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),localSettings=reactive({admin_email:websiteDefaults.admin_email||"",site_base_url:websiteDefaults.site_base_url||""}),getSettingsArray=()=>defaultSettings.website.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"website",description:defaultSetting.description}}),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;settingsRecord[key]=setting.value}})};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1$h,[createBaseVNode("div",_hoisted_2$e,[createBaseVNode("div",_hoisted_3$e,[createBaseVNode("div",_hoisted_4$e,[createBaseVNode("label",_hoisted_5$d,[_cache[2]||(_cache[2]=createBaseVNode("i",{class:"fas fa-globe mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.website.siteUrl.label")),1)]),createBaseVNode("div",_hoisted_6$d,[createVNode(_component_CyberInput,{modelValue:localSettings.site_base_url,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.site_base_url=$event),placeholder:unref($t)("admin.settings.website.siteUrl.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_7$c,toDisplayString(unref($t)("admin.settings.website.siteUrl.description")),1)])]),createBaseVNode("div",_hoisted_8$c,[createBaseVNode("label",_hoisted_9$c,[_cache[3]||(_cache[3]=createBaseVNode("i",{class:"fas fa-envelope mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.website.contactEmail.label")),1)]),createBaseVNode("div",_hoisted_10$b,[createVNode(_component_CyberInput,{modelValue:localSettings.admin_email,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.admin_email=$event),placeholder:unref($t)("admin.settings.website.contactEmail.placeholder"),width:"500px"},null,8,["modelValue","placeholder"])])])])])])}}});const WebsiteSettings=_export_sfc(_sfc_main$h,[["__scopeId","data-v-6b36b2fd"]]),_hoisted_1$g={class:"space-y-5"},_hoisted_2$d={class:"space-y-5"},_hoisted_3$d={class:"space-y-5"},_hoisted_4$d={class:"flex flex-col md:flex-row md:items-center"},_hoisted_5$c={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_6$c={class:"flex flex-1 items-center"},_hoisted_7$b={class:"ml-3 text-sm text-content-muted"},_hoisted_8$b={class:"flex flex-col md:flex-row md:items-center"},_hoisted_9$b={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_10$a={class:"flex flex-1 items-center"},_hoisted_11$a={class:"ml-3 text-sm text-content-muted"},_hoisted_12$a={class:"flex flex-col md:flex-row md:items-center"},_hoisted_13$9={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_14$9={class:"flex-1"},_hoisted_15$9={class:"flex items-center"},_hoisted_16$9={class:"text-content-subtle mt-1 text-xs"},_hoisted_17$9={class:"flex flex-col md:flex-row md:items-center"},_hoisted_18$9={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_19$9={class:"flex-1"},_hoisted_20$9={class:"flex items-center"},_hoisted_21$7={class:"text-content-subtle mt-1 text-xs"},_sfc_main$g=defineComponent({__name:"RegistrationSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,registrationDefaults=defaultSettings.registration.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),localSettings=reactive({user_initial_storage:registrationDefaults.user_initial_storage||100,enable_registration:registrationDefaults.enable_registration??!0,email_verification:registrationDefaults.email_verification??!0,user_initial_bandwidth:registrationDefaults.user_initial_bandwidth||1024}),getSettingsArray=()=>defaultSettings.registration.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"registration",description:defaultSetting.description}}),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;settingsRecord[key]=setting.value}})};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1$g,[createBaseVNode("div",_hoisted_2$d,[createBaseVNode("div",_hoisted_3$d,[createBaseVNode("div",_hoisted_4$d,[createBaseVNode("label",_hoisted_5$c,[_cache[4]||(_cache[4]=createBaseVNode("i",{class:"fas fa-door-open mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.registration.enableRegistration.label")),1)]),createBaseVNode("div",_hoisted_6$c,[createVNode(_component_CyberSwitch,{modelValue:localSettings.enable_registration,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.enable_registration=$event)},null,8,["modelValue"]),createBaseVNode("span",_hoisted_7$b,toDisplayString(localSettings.enable_registration?unref($t)("admin.settings.registration.enableRegistration.enabled"):unref($t)("admin.settings.registration.enableRegistration.disabled")),1)])]),createBaseVNode("div",_hoisted_8$b,[createBaseVNode("label",_hoisted_9$b,[_cache[5]||(_cache[5]=createBaseVNode("i",{class:"fas fa-check-circle mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.registration.emailVerification.label")),1)]),createBaseVNode("div",_hoisted_10$a,[createVNode(_component_CyberSwitch,{modelValue:localSettings.email_verification,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.email_verification=$event)},null,8,["modelValue"]),createBaseVNode("span",_hoisted_11$a,toDisplayString(localSettings.email_verification?unref($t)("admin.settings.registration.emailVerification.enabled"):unref($t)("admin.settings.registration.emailVerification.disabled")),1)])]),createBaseVNode("div",_hoisted_12$a,[createBaseVNode("label",_hoisted_13$9,[_cache[6]||(_cache[6]=createBaseVNode("i",{class:"fas fa-hdd mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.registration.initialStorage.label")),1)]),createBaseVNode("div",_hoisted_14$9,[createBaseVNode("div",_hoisted_15$9,[createVNode(_component_CyberInput,{modelValue:localSettings.user_initial_storage,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.user_initial_storage=$event),type:"number",placeholder:unref($t)("admin.settings.registration.initialStorage.placeholder"),width:"500px"},{unit:withCtx(()=>[..._cache[7]||(_cache[7]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder"])]),createBaseVNode("p",_hoisted_16$9,toDisplayString(unref($t)("admin.settings.registration.initialStorage.hint")),1)])]),createBaseVNode("div",_hoisted_17$9,[createBaseVNode("label",_hoisted_18$9,[_cache[8]||(_cache[8]=createBaseVNode("i",{class:"fas fa-tachometer-alt mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.registration.initialBandwidth.label")),1)]),createBaseVNode("div",_hoisted_19$9,[createBaseVNode("div",_hoisted_20$9,[createVNode(_component_CyberInput,{modelValue:localSettings.user_initial_bandwidth,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.user_initial_bandwidth=$event),type:"number",placeholder:unref($t)("admin.settings.registration.initialBandwidth.placeholder"),width:"500px"},{unit:withCtx(()=>[..._cache[9]||(_cache[9]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder"])]),createBaseVNode("p",_hoisted_21$7,toDisplayString(unref($t)("admin.settings.registration.initialBandwidth.hint")),1)])])])])])}}});const RegistrationSettings=_export_sfc(_sfc_main$g,[["__scopeId","data-v-7a7f5cbe"]]),_hoisted_1$f={class:"space-y-6"},_hoisted_2$c={class:"space-y-5"},_hoisted_3$c={class:"mb-4 border-b border-subtle pb-2 text-lg font-medium text-content-heading"},_hoisted_4$c={class:"space-y-4"},_hoisted_5$b={class:"flex flex-col md:flex-row md:items-center"},_hoisted_6$b={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_7$a={class:"flex-1"},_hoisted_8$a={class:"flex flex-col md:flex-row md:items-center"},_hoisted_9$a={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_10$9={class:"flex-1"},_hoisted_11$9={class:"flex flex-col md:flex-row md:items-center"},_hoisted_12$9={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_13$8={class:"flex flex-1 gap-4"},_hoisted_14$8={class:"flex flex-col md:flex-row md:items-center"},_hoisted_15$8={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_16$8={class:"flex-1"},_hoisted_17$8={class:"flex flex-col md:flex-row md:items-center"},_hoisted_18$8={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_19$8={class:"flex-1"},_hoisted_20$8={class:"flex flex-col md:flex-row md:items-center"},_hoisted_21$6={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_22$6={class:"flex-1"},_hoisted_23$7={class:"flex flex-col md:flex-row md:items-center"},_hoisted_24$7={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_25$7={class:"flex-1"},_hoisted_26$7={class:"space-y-5"},_hoisted_27$7={class:"mb-4 border-b border-subtle pb-2 text-lg font-medium text-content-heading"},_hoisted_28$7={class:"space-y-4"},_hoisted_29$7={class:"flex flex-col md:flex-row md:items-center"},_hoisted_30$7={class:"w-full text-sm text-content-muted md:w-48 md:py-2"},_hoisted_31$7={class:"flex-1"},_hoisted_32$7={class:"flex flex-col md:flex-row md:items-center"},_hoisted_33$7={class:"flex-1"},_sfc_main$f=defineComponent({__name:"MailSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),testEmail=ref(""),isSending=ref(!1),testResult=ref(null),mailDefaults=defaultSettings.mail.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),localSettings=reactive({smtp_host:mailDefaults.smtp_host||"smtp.example.com",smtp_port:mailDefaults.smtp_port||587,smtp_encryption:mailDefaults.smtp_encryption||"tls",smtp_username:mailDefaults.smtp_username||"",smtp_password:mailDefaults.smtp_password||"",smtp_from_address:mailDefaults.smtp_from_address||"",smtp_from_name:mailDefaults.smtp_from_name||""}),getSettingsArray=()=>defaultSettings.mail.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"mail",description:defaultSetting.description}}),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;settingsRecord[key]=setting.value}})};watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0});const sendTestEmail=async()=>{if(!testEmail.value){testResult.value={success:!1,message:$t("admin.settings.mail.enterTestEmail")};return}isSending.value=!0,testResult.value=null;try{await testMailServer({email:testEmail.value,smtp_host:localSettings.smtp_host||"",smtp_port:localSettings.smtp_port||587,smtp_encryption:localSettings.smtp_encryption||"tls",smtp_username:localSettings.smtp_username||"",smtp_password:localSettings.smtp_password||"",smtp_from_address:localSettings.smtp_from_address||"",smtp_from_name:localSettings.smtp_from_name||""}),testResult.value={success:!0,message:$t("admin.settings.mail.sendSuccess")},toast.success($t("admin.settings.mail.testSuccess"))}catch(error){testResult.value={success:!1,message:$t("admin.settings.mail.sendFailed",{error:error.message||$t("admin.settings.mail.unknownError")})},toast.error(error.message)}isSending.value=!1};return onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberRadioGroup=resolveComponent("CyberRadioGroup"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$f,[createBaseVNode("div",_hoisted_2$c,[createBaseVNode("h3",_hoisted_3$c,toDisplayString(unref($t)("admin.settings.mail.smtpConfig")),1),createBaseVNode("div",_hoisted_4$c,[createBaseVNode("div",_hoisted_5$b,[createBaseVNode("label",_hoisted_6$b,toDisplayString(unref($t)("admin.settings.mail.smtpHost")),1),createBaseVNode("div",_hoisted_7$a,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_host,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.smtp_host=$event),placeholder:"smtp.example.com",width:"500px"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_8$a,[createBaseVNode("label",_hoisted_9$a,toDisplayString(unref($t)("admin.settings.mail.smtpPort")),1),createBaseVNode("div",_hoisted_10$9,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_port,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.smtp_port=$event),type:"number",placeholder:"587",width:"500px"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_11$9,[createBaseVNode("label",_hoisted_12$9,toDisplayString(unref($t)("admin.settings.mail.encryption")),1),createBaseVNode("div",_hoisted_13$8,[createVNode(_component_CyberRadioGroup,{modelValue:localSettings.smtp_encryption,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.smtp_encryption=$event),options:[{label:unref($t)("admin.settings.mail.encryptionNone"),value:"none"},{label:"TLS",value:"tls"},{label:"SSL",value:"ssl"}]},null,8,["modelValue","options"])])]),createBaseVNode("div",_hoisted_14$8,[createBaseVNode("label",_hoisted_15$8,toDisplayString(unref($t)("admin.settings.mail.smtpUsername")),1),createBaseVNode("div",_hoisted_16$8,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_username,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.smtp_username=$event),placeholder:"username@example.com",width:"500px"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_17$8,[createBaseVNode("label",_hoisted_18$8,toDisplayString(unref($t)("admin.settings.mail.smtpPassword")),1),createBaseVNode("div",_hoisted_19$8,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_password,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>localSettings.smtp_password=$event),type:"password",placeholder:unref($t)("admin.settings.mail.passwordPlaceholder"),width:"500px"},null,8,["modelValue","placeholder"])])]),createBaseVNode("div",_hoisted_20$8,[createBaseVNode("label",_hoisted_21$6,toDisplayString(unref($t)("admin.settings.mail.fromAddress")),1),createBaseVNode("div",_hoisted_22$6,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_from_address,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.smtp_from_address=$event),placeholder:"noreply@example.com",width:"500px"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_23$7,[createBaseVNode("label",_hoisted_24$7,toDisplayString(unref($t)("admin.settings.mail.fromName")),1),createBaseVNode("div",_hoisted_25$7,[createVNode(_component_CyberInput,{modelValue:localSettings.smtp_from_name,"onUpdate:modelValue":_cache[6]||(_cache[6]=$event=>localSettings.smtp_from_name=$event),placeholder:unref($t)("admin.settings.mail.fromNamePlaceholder"),width:"500px"},null,8,["modelValue","placeholder"])])])])]),createBaseVNode("div",_hoisted_26$7,[createBaseVNode("h3",_hoisted_27$7,toDisplayString(unref($t)("admin.settings.mail.testEmail")),1),createBaseVNode("div",_hoisted_28$7,[createBaseVNode("div",_hoisted_29$7,[createBaseVNode("label",_hoisted_30$7,toDisplayString(unref($t)("admin.settings.mail.testEmailAddress")),1),createBaseVNode("div",_hoisted_31$7,[createVNode(_component_CyberInput,{modelValue:testEmail.value,"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>testEmail.value=$event),placeholder:"test@example.com",width:"500px"},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_32$7,[_cache[8]||(_cache[8]=createBaseVNode("div",{class:"w-full md:w-48"},null,-1)),createBaseVNode("div",_hoisted_33$7,[createVNode(_component_CyberButton,{type:"primary",loading:isSending.value,onClick:sendTestEmail},{default:withCtx(()=>[createTextVNode(toDisplayString(isSending.value?unref($t)("admin.settings.mail.sending"):unref($t)("admin.settings.mail.sendTestEmail")),1)]),_:1},8,["loading"]),testResult.value?(openBlock(),createElementBlock("span",{key:0,class:normalizeClass(["ml-3 text-sm",testResult.value.success?"text-green-400":"text-red-400"])},toDisplayString(testResult.value.message),3)):createCommentVNode("",!0)])])])])])}}}),_hoisted_1$e={class:"space-y-5"},_hoisted_2$b={class:"space-y-5"},_hoisted_3$b={class:"mb-3 border-b border-default pb-2 text-lg font-medium text-content-heading"},_hoisted_4$b={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},_hoisted_5$a={class:"flex flex-col space-y-1"},_hoisted_6$a={class:"text-sm text-content-muted"},_hoisted_7$9={class:"flex items-center"},_hoisted_8$9={class:"text-xs text-content-muted"},_hoisted_9$9={class:"flex flex-col space-y-1"},_hoisted_10$8={class:"text-sm text-content-muted"},_hoisted_11$8={class:"flex items-center"},_hoisted_12$8={class:"text-xs text-content-muted"},_hoisted_13$7={class:"flex flex-col space-y-1"},_hoisted_14$7={class:"text-sm text-content-muted"},_hoisted_15$7={class:"flex items-center"},_hoisted_16$7={class:"text-xs text-content-muted"},_hoisted_17$7={class:"flex flex-col space-y-1"},_hoisted_18$7={class:"text-sm text-content-muted"},_hoisted_19$7={class:"flex items-center"},_hoisted_20$7={class:"text-xs text-content-muted"},_hoisted_21$5={class:"rounded-xl border border-default bg-background-700 p-5"},_hoisted_22$5={class:"mb-3 flex items-center justify-between border-b border-default pb-2"},_hoisted_23$6={class:"text-lg font-medium text-content-heading"},_hoisted_24$6={key:0,class:"mb-4 rounded-md border border-default bg-background-700 p-2.5"},_hoisted_25$6={class:"flex items-start"},_hoisted_26$6={class:"text-xs text-content"},_hoisted_27$6={class:"mb-1 font-medium text-info-300"},_hoisted_28$6={class:"space-y-1 text-content-muted"},_hoisted_29$6={class:"text-success-400"},_hoisted_30$6={class:"text-warning-400"},_hoisted_31$6={class:"text-info-400"},_hoisted_32$6={class:"flex items-center justify-between"},_hoisted_33$6={class:"flex items-center text-sm text-content"},_hoisted_34$6={class:"mt-1 text-xs text-content-muted"},_hoisted_35$6={class:"flex items-center"},_hoisted_36$6={class:"rounded-xl border border-default bg-background-700 p-5"},_hoisted_37$6={class:"mb-3 flex items-center justify-between border-b border-default pb-2"},_hoisted_38$6={class:"text-lg font-medium text-content-heading"},_hoisted_39$6={key:0,class:"mb-4 rounded-md border border-default bg-background-700 p-2.5"},_hoisted_40$6={class:"flex items-start"},_hoisted_41$2={class:"text-xs text-content"},_hoisted_42$1={class:"font-medium"},_hoisted_43$1={class:"text-warning-400"},_hoisted_44$1={class:"text-content-muted"},_hoisted_45$1={class:"mb-4 grid grid-cols-1 gap-4 md:grid-cols-2"},_hoisted_46$1={class:"flex flex-col"},_hoisted_47$1={class:"mb-1.5 text-sm text-content-muted"},_hoisted_48$1={class:"rounded-lg border border-default bg-background-700 p-2.5"},_hoisted_49$1={class:"mb-2 flex min-h-[30px] flex-wrap gap-1.5"},_hoisted_50=["onClick"],_hoisted_51={key:0,class:"text-xs italic text-content-muted"},_hoisted_52={class:"flex items-center border-t border-default pt-2.5"},_hoisted_53={key:0,class:"mt-1 text-xs text-error-400"},_hoisted_54={class:"flex flex-col"},_hoisted_55={class:"mb-1.5 text-sm text-content-muted"},_hoisted_56={class:"rounded-lg border border-default bg-background-700 p-2.5"},_hoisted_57={class:"mb-2 flex min-h-[30px] flex-wrap gap-1.5"},_hoisted_58=["onClick"],_hoisted_59={key:0,class:"text-xs italic text-content-muted"},_hoisted_60={class:"flex items-center border-t border-default pt-2.5"},_hoisted_61={key:0,class:"mt-1 text-xs text-error-400"},_hoisted_62={class:"grid grid-cols-1 gap-4 md:grid-cols-2"},_hoisted_63={class:"flex flex-col"},_hoisted_64={class:"mb-1.5 text-sm text-content-muted"},_hoisted_65={class:"rounded-lg border border-default bg-background-700 p-2.5"},_hoisted_66={class:"mb-2 flex min-h-[30px] flex-wrap gap-1.5"},_hoisted_67=["onClick"],_hoisted_68={key:0,class:"text-xs italic text-content-muted"},_hoisted_69={class:"flex items-center border-t border-default pt-2.5"},_hoisted_70={key:0,class:"mt-1 text-xs text-error-400"},_hoisted_71={class:"flex flex-col"},_hoisted_72={class:"mb-1.5 text-sm text-content-muted"},_hoisted_73={class:"rounded-lg border border-default bg-background-700 p-2.5"},_hoisted_74={class:"mb-2 flex min-h-[30px] flex-wrap gap-1.5"},_hoisted_75=["onClick"],_hoisted_76={key:0,class:"text-xs italic text-content-muted"},_hoisted_77={class:"flex items-center border-t border-default pt-2.5"},_hoisted_78={key:0,class:"mt-1 text-xs text-error-400"},_sfc_main$e=defineComponent({__name:"SecuritySettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,securityDefaults=defaultSettings.security.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),showSecret=ref(!1),showAccessWarning=ref(!0),showStorageWarning=ref(!1),localSettings=reactive({max_login_attempts:securityDefaults.max_login_attempts||5,account_lockout_minutes:securityDefaults.account_lockout_minutes||30,login_expire_hours:securityDefaults.login_expire_hours||60,ip_whitelist:securityDefaults.ip_whitelist||"",ip_blacklist:securityDefaults.ip_blacklist||"",domain_whitelist:securityDefaults.domain_whitelist||"",domain_blacklist:securityDefaults.domain_blacklist||"",jwt_secret:securityDefaults.jwt_secret||"",hide_remote_url:securityDefaults.hide_remote_url!==void 0?securityDefaults.hide_remote_url:!0}),whitelistIPs=ref(localSettings.ip_whitelist?localSettings.ip_whitelist.split(",").filter(ip=>ip):[]),blacklistIPs=ref(localSettings.ip_blacklist?localSettings.ip_blacklist.split(",").filter(ip=>ip):[]),newWhitelistIP=ref(""),newBlacklistIP=ref(""),whitelistDomains=ref(localSettings.domain_whitelist?localSettings.domain_whitelist.split(",").filter(domain=>domain):[]),blacklistDomains=ref(localSettings.domain_blacklist?localSettings.domain_blacklist.split(",").filter(domain=>domain):[]),newWhitelistDomain=ref(""),newBlacklistDomain=ref(""),isValidIP=ip=>{if(!ip)return!1;const ipv4Regex=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)$/,cidrRegex=/^(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.(25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\/(3[0-2]|[1-2][0-9]|[0-9])$/,ipv6Regex=/^([0-9a-fA-F]{1,4}:){7}[0-9a-fA-F]{1,4}$|^([0-9a-fA-F]{1,4}:){1,7}:|^([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}$|^([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}$|^([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}$|^([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}$|^([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}$|^[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})$|^:((:[0-9a-fA-F]{1,4}){1,7}|:)$/;return ipv4Regex.test(ip)||cidrRegex.test(ip)||ipv6Regex.test(ip)},isValidDomain=domain=>domain?(domain.startsWith("*.")&&(domain=domain.substring(2)),/^(?:[a-z0-9](?:[a-z0-9-]{0,61}[a-z0-9])?\.)+[a-z0-9][a-z0-9-]{0,61}[a-z0-9]$/i.test(domain)):!1,getSettingsArray=()=>(updateIPLists(),updateDomainLists(),defaultSettings.security.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"security",description:defaultSetting.description}})),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings)if(key==="ip_whitelist"&&typeof setting.value=="string")localSettings.ip_whitelist=setting.value,whitelistIPs.value=setting.value?setting.value.split(",").filter(ip=>ip):[];else if(key==="ip_blacklist"&&typeof setting.value=="string")localSettings.ip_blacklist=setting.value,blacklistIPs.value=setting.value?setting.value.split(",").filter(ip=>ip):[];else if(key==="domain_whitelist"&&typeof setting.value=="string")localSettings.domain_whitelist=setting.value,whitelistDomains.value=setting.value?setting.value.split(",").filter(domain=>domain):[];else if(key==="domain_blacklist"&&typeof setting.value=="string")localSettings.domain_blacklist=setting.value,blacklistDomains.value=setting.value?setting.value.split(",").filter(domain=>domain):[];else{const settingsRecord=localSettings;settingsRecord[key]=setting.value}})},addWhitelistIP=()=>{newWhitelistIP.value&&isValidIP(newWhitelistIP.value)&&(whitelistIPs.value.includes(newWhitelistIP.value)||(whitelistIPs.value.push(newWhitelistIP.value),newWhitelistIP.value="",updateIPLists()))},removeWhitelistIP=index2=>{whitelistIPs.value.splice(index2,1),updateIPLists()},addBlacklistIP=()=>{newBlacklistIP.value&&isValidIP(newBlacklistIP.value)&&(blacklistIPs.value.includes(newBlacklistIP.value)||(blacklistIPs.value.push(newBlacklistIP.value),newBlacklistIP.value="",updateIPLists()))},removeBlacklistIP=index2=>{blacklistIPs.value.splice(index2,1),updateIPLists()},addWhitelistDomain=()=>{newWhitelistDomain.value&&isValidDomain(newWhitelistDomain.value)&&(whitelistDomains.value.includes(newWhitelistDomain.value)||(whitelistDomains.value.push(newWhitelistDomain.value),newWhitelistDomain.value="",updateDomainLists()))},removeWhitelistDomain=index2=>{whitelistDomains.value.splice(index2,1),updateDomainLists()},addBlacklistDomain=()=>{newBlacklistDomain.value&&isValidDomain(newBlacklistDomain.value)&&(blacklistDomains.value.includes(newBlacklistDomain.value)||(blacklistDomains.value.push(newBlacklistDomain.value),newBlacklistDomain.value="",updateDomainLists()))},removeBlacklistDomain=index2=>{blacklistDomains.value.splice(index2,1),updateDomainLists()},updateIPLists=()=>{localSettings.ip_whitelist=whitelistIPs.value.filter(ip=>ip.trim()).join(","),localSettings.ip_blacklist=blacklistIPs.value.filter(ip=>ip.trim()).join(",")},updateDomainLists=()=>{localSettings.domain_whitelist=whitelistDomains.value.filter(domain=>domain.trim()).join(","),localSettings.domain_blacklist=blacklistDomains.value.filter(domain=>domain.trim()).join(",")};return watch([whitelistIPs,blacklistIPs],()=>{updateIPLists()},{deep:!0}),watch([whitelistDomains,blacklistDomains],()=>{updateDomainLists()},{deep:!0}),watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$e,[createBaseVNode("div",_hoisted_2$b,[createBaseVNode("h3",_hoisted_3$b,toDisplayString(unref($t)("admin.settings.security.loginSecurity.title")),1),createBaseVNode("div",_hoisted_4$b,[createBaseVNode("div",_hoisted_5$a,[createBaseVNode("label",_hoisted_6$a,toDisplayString(unref($t)("admin.settings.security.loginSecurity.maxAttempts")),1),createBaseVNode("div",_hoisted_7$9,[createVNode(_component_CyberInput,{modelValue:localSettings.max_login_attempts,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.max_login_attempts=$event),type:"number",placeholder:"5",class:"w-24"},null,8,["modelValue"])]),createBaseVNode("span",_hoisted_8$9,toDisplayString(unref($t)("admin.settings.security.loginSecurity.maxAttemptsHint")),1)]),createBaseVNode("div",_hoisted_9$9,[createBaseVNode("label",_hoisted_10$8,toDisplayString(unref($t)("admin.settings.security.loginSecurity.lockoutTime")),1),createBaseVNode("div",_hoisted_11$8,[createVNode(_component_CyberInput,{modelValue:localSettings.account_lockout_minutes,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.account_lockout_minutes=$event),type:"number",placeholder:"30",class:"w-24"},null,8,["modelValue"])]),createBaseVNode("span",_hoisted_12$8,toDisplayString(unref($t)("admin.settings.security.loginSecurity.lockoutTimeHint")),1)]),createBaseVNode("div",_hoisted_13$7,[createBaseVNode("label",_hoisted_14$7,toDisplayString(unref($t)("admin.settings.security.loginSecurity.expireTime")),1),createBaseVNode("div",_hoisted_15$7,[createVNode(_component_CyberInput,{modelValue:localSettings.login_expire_hours,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.login_expire_hours=$event),type:"number",placeholder:"60",class:"w-24"},null,8,["modelValue"])]),createBaseVNode("span",_hoisted_16$7,toDisplayString(unref($t)("admin.settings.security.loginSecurity.expireTimeHint")),1)]),createBaseVNode("div",_hoisted_17$7,[createBaseVNode("label",_hoisted_18$7,toDisplayString(unref($t)("admin.settings.security.loginSecurity.jwtSecret")),1),createBaseVNode("div",_hoisted_19$7,[createVNode(_component_CyberInput,{modelValue:localSettings.jwt_secret,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.jwt_secret=$event),type:showSecret.value?"text":"password",placeholder:unref($t)("admin.settings.security.loginSecurity.jwtSecretPlaceholder"),class:"w-full"},null,8,["modelValue","type","placeholder"])]),createBaseVNode("span",_hoisted_20$7,toDisplayString(unref($t)("admin.settings.security.loginSecurity.jwtSecretHint")),1)])])]),createBaseVNode("div",_hoisted_21$5,[createBaseVNode("div",_hoisted_22$5,[createBaseVNode("h3",_hoisted_23$6,toDisplayString(unref($t)("admin.settings.security.storage.title")),1),createBaseVNode("button",{class:"flex items-center text-sm text-info-400 hover:text-info-300",onClick:_cache[4]||(_cache[4]=$event=>showStorageWarning.value=!showStorageWarning.value)},[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-info-circle mr-1"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.security.storage.viewInfo")),1)])]),showStorageWarning.value?(openBlock(),createElementBlock("div",_hoisted_24$6,[createBaseVNode("div",_hoisted_25$6,[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-cloud mr-2 mt-0.5 text-info-400"},null,-1)),createBaseVNode("div",_hoisted_26$6,[createBaseVNode("p",_hoisted_27$6,toDisplayString(unref($t)("admin.settings.security.storage.infoTitle")),1),createBaseVNode("div",_hoisted_28$6,[createBaseVNode("p",null,[createBaseVNode("span",_hoisted_29$6,"✓ "+toDisplayString(unref($t)("admin.settings.security.storage.secureLabel"))+"：",1),createTextVNode(toDisplayString(unref($t)("admin.settings.security.storage.secureDesc")),1)]),createBaseVNode("p",null,[createBaseVNode("span",_hoisted_30$6,"! "+toDisplayString(unref($t)("admin.settings.security.storage.openLabel"))+"：",1),createTextVNode(toDisplayString(unref($t)("admin.settings.security.storage.openDesc")),1)]),createBaseVNode("p",null,[createBaseVNode("span",_hoisted_31$6,"ℹ "+toDisplayString(unref($t)("admin.settings.security.storage.suggestLabel"))+"：",1),createTextVNode(toDisplayString(unref($t)("admin.settings.security.storage.suggestDesc")),1)])])])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_32$6,[createBaseVNode("div",null,[createBaseVNode("div",_hoisted_33$6,[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-shield-alt mr-2 text-brand-600"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.security.storage.hideRemoteUrl")),1)]),createBaseVNode("div",_hoisted_34$6,toDisplayString(unref($t)("admin.settings.security.storage.hideRemoteUrlHint")),1)]),createBaseVNode("div",_hoisted_35$6,[createBaseVNode("span",{class:normalizeClass(["mr-2 text-xs",localSettings.hide_remote_url?"text-success-400":"text-warning-400"])},toDisplayString(localSettings.hide_remote_url?unref($t)("admin.settings.security.storage.globalSecure"):unref($t)("admin.settings.security.storage.byChannel")),3),createVNode(_component_CyberSwitch,{modelValue:localSettings.hide_remote_url,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.hide_remote_url=$event)},null,8,["modelValue"])])])]),createBaseVNode("div",_hoisted_36$6,[createBaseVNode("div",_hoisted_37$6,[createBaseVNode("h3",_hoisted_38$6,toDisplayString(unref($t)("admin.settings.security.accessControl.title")),1),createBaseVNode("button",{class:"flex items-center text-sm text-warning-400 hover:text-warning-300",onClick:_cache[6]||(_cache[6]=$event=>showAccessWarning.value=!showAccessWarning.value)},[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-exclamation-triangle mr-1"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.security.accessControl.viewWarning")),1)])]),showAccessWarning.value?(openBlock(),createElementBlock("div",_hoisted_39$6,[createBaseVNode("div",_hoisted_40$6,[_cache[15]||(_cache[15]=createBaseVNode("i",{class:"fas fa-exclamation-triangle mr-2 mt-0.5 text-warning-400"},null,-1)),createBaseVNode("div",_hoisted_41$2,[createBaseVNode("p",_hoisted_42$1,[createTextVNode(toDisplayString(unref($t)("admin.settings.security.accessControl.warningTitle")),1),createBaseVNode("span",_hoisted_43$1,toDisplayString(unref($t)("admin.settings.security.accessControl.allUsers")),1),createTextVNode(toDisplayString(unref($t)("admin.settings.security.accessControl.warningEffect")),1)]),createBaseVNode("p",_hoisted_44$1,toDisplayString(unref($t)("admin.settings.security.accessControl.warningDesc")),1)])])])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_45$1,[createBaseVNode("div",_hoisted_46$1,[createBaseVNode("label",_hoisted_47$1,toDisplayString(unref($t)("admin.settings.security.accessControl.ipWhitelist")),1),createBaseVNode("div",_hoisted_48$1,[createBaseVNode("div",_hoisted_49$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(whitelistIPs.value,(ip,index2)=>(openBlock(),createElementBlock("div",{key:index2,class:"flex items-center rounded border border-brand-500 bg-background-600 px-1.5 py-0.5 text-xs text-content"},[createTextVNode(toDisplayString(ip)+" ",1),createBaseVNode("button",{class:"ml-1.5 text-content-muted hover:text-error-400",onClick:()=>removeWhitelistIP(index2)},[..._cache[16]||(_cache[16]=[createBaseVNode("i",{class:"fas fa-times text-xs"},null,-1)])],8,_hoisted_50)]))),128)),whitelistIPs.value.length===0?(openBlock(),createElementBlock("div",_hoisted_51,toDisplayString(unref($t)("admin.settings.security.accessControl.ipWhitelistEmpty")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_52,[createVNode(_component_CyberInput,{modelValue:newWhitelistIP.value,"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>newWhitelistIP.value=$event),placeholder:unref($t)("admin.settings.security.accessControl.ipPlaceholder"),class:"mr-2 flex-1 text-xs",onKeyup:withKeys(addWhitelistIP,["enter"])},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{type:"secondary",disabled:!isValidIP(newWhitelistIP.value)&&newWhitelistIP.value!=="",onClick:addWhitelistIP},{default:withCtx(()=>[..._cache[17]||(_cache[17]=[createBaseVNode("i",{class:"fas fa-plus"},null,-1)])]),_:1},8,["disabled"])]),newWhitelistIP.value&&!isValidIP(newWhitelistIP.value)?(openBlock(),createElementBlock("div",_hoisted_53,toDisplayString(unref($t)("admin.settings.security.accessControl.invalidIP")),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_54,[createBaseVNode("label",_hoisted_55,toDisplayString(unref($t)("admin.settings.security.accessControl.ipBlacklist")),1),createBaseVNode("div",_hoisted_56,[createBaseVNode("div",_hoisted_57,[(openBlock(!0),createElementBlock(Fragment,null,renderList(blacklistIPs.value,(ip,index2)=>(openBlock(),createElementBlock("div",{key:index2,class:"flex items-center rounded border border-brand-500 bg-background-600 px-1.5 py-0.5 text-xs text-content"},[createTextVNode(toDisplayString(ip)+" ",1),createBaseVNode("button",{class:"ml-1.5 text-content-muted hover:text-error-400",onClick:()=>removeBlacklistIP(index2)},[..._cache[18]||(_cache[18]=[createBaseVNode("i",{class:"fas fa-times text-xs"},null,-1)])],8,_hoisted_58)]))),128)),blacklistIPs.value.length===0?(openBlock(),createElementBlock("div",_hoisted_59,toDisplayString(unref($t)("admin.settings.security.accessControl.ipBlacklistEmpty")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_60,[createVNode(_component_CyberInput,{modelValue:newBlacklistIP.value,"onUpdate:modelValue":_cache[8]||(_cache[8]=$event=>newBlacklistIP.value=$event),placeholder:unref($t)("admin.settings.security.accessControl.ipPlaceholder"),class:"mr-2 flex-1 text-xs",onKeyup:withKeys(addBlacklistIP,["enter"])},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{type:"secondary",disabled:!isValidIP(newBlacklistIP.value)&&newBlacklistIP.value!=="",onClick:addBlacklistIP},{default:withCtx(()=>[..._cache[19]||(_cache[19]=[createBaseVNode("i",{class:"fas fa-plus"},null,-1)])]),_:1},8,["disabled"])]),newBlacklistIP.value&&!isValidIP(newBlacklistIP.value)?(openBlock(),createElementBlock("div",_hoisted_61,toDisplayString(unref($t)("admin.settings.security.accessControl.invalidIP")),1)):createCommentVNode("",!0)])])]),createBaseVNode("div",_hoisted_62,[createBaseVNode("div",_hoisted_63,[createBaseVNode("label",_hoisted_64,toDisplayString(unref($t)("admin.settings.security.accessControl.domainWhitelist")),1),createBaseVNode("div",_hoisted_65,[createBaseVNode("div",_hoisted_66,[(openBlock(!0),createElementBlock(Fragment,null,renderList(whitelistDomains.value,(domain,index2)=>(openBlock(),createElementBlock("div",{key:index2,class:"flex items-center rounded border border-brand-500 bg-background-600 px-1.5 py-0.5 text-xs text-content"},[createTextVNode(toDisplayString(domain)+" ",1),createBaseVNode("button",{class:"ml-1.5 text-content-muted hover:text-error-400",onClick:()=>removeWhitelistDomain(index2)},[..._cache[20]||(_cache[20]=[createBaseVNode("i",{class:"fas fa-times text-xs"},null,-1)])],8,_hoisted_67)]))),128)),whitelistDomains.value.length===0?(openBlock(),createElementBlock("div",_hoisted_68,toDisplayString(unref($t)("admin.settings.security.accessControl.domainWhitelistEmpty")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_69,[createVNode(_component_CyberInput,{modelValue:newWhitelistDomain.value,"onUpdate:modelValue":_cache[9]||(_cache[9]=$event=>newWhitelistDomain.value=$event),placeholder:unref($t)("admin.settings.security.accessControl.domainPlaceholder"),class:"mr-2 flex-1 text-xs",onKeyup:withKeys(addWhitelistDomain,["enter"])},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{type:"secondary",disabled:!isValidDomain(newWhitelistDomain.value)&&newWhitelistDomain.value!=="",onClick:addWhitelistDomain},{default:withCtx(()=>[..._cache[21]||(_cache[21]=[createBaseVNode("i",{class:"fas fa-plus"},null,-1)])]),_:1},8,["disabled"])]),newWhitelistDomain.value&&!isValidDomain(newWhitelistDomain.value)?(openBlock(),createElementBlock("div",_hoisted_70,toDisplayString(unref($t)("admin.settings.security.accessControl.invalidDomain")),1)):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_71,[createBaseVNode("label",_hoisted_72,toDisplayString(unref($t)("admin.settings.security.accessControl.domainBlacklist")),1),createBaseVNode("div",_hoisted_73,[createBaseVNode("div",_hoisted_74,[(openBlock(!0),createElementBlock(Fragment,null,renderList(blacklistDomains.value,(domain,index2)=>(openBlock(),createElementBlock("div",{key:index2,class:"flex items-center rounded border border-brand-500 bg-background-600 px-1.5 py-0.5 text-xs text-content"},[createTextVNode(toDisplayString(domain)+" ",1),createBaseVNode("button",{class:"ml-1.5 text-content-muted hover:text-error-400",onClick:()=>removeBlacklistDomain(index2)},[..._cache[22]||(_cache[22]=[createBaseVNode("i",{class:"fas fa-times text-xs"},null,-1)])],8,_hoisted_75)]))),128)),blacklistDomains.value.length===0?(openBlock(),createElementBlock("div",_hoisted_76,toDisplayString(unref($t)("admin.settings.security.accessControl.domainBlacklistEmpty")),1)):createCommentVNode("",!0)]),createBaseVNode("div",_hoisted_77,[createVNode(_component_CyberInput,{modelValue:newBlacklistDomain.value,"onUpdate:modelValue":_cache[10]||(_cache[10]=$event=>newBlacklistDomain.value=$event),placeholder:unref($t)("admin.settings.security.accessControl.domainPlaceholder"),class:"mr-2 flex-1 text-xs",onKeyup:withKeys(addBlacklistDomain,["enter"])},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{type:"secondary",disabled:!isValidDomain(newBlacklistDomain.value)&&newBlacklistDomain.value!=="",onClick:addBlacklistDomain},{default:withCtx(()=>[..._cache[23]||(_cache[23]=[createBaseVNode("i",{class:"fas fa-plus"},null,-1)])]),_:1},8,["disabled"])]),newBlacklistDomain.value&&!isValidDomain(newBlacklistDomain.value)?(openBlock(),createElementBlock("div",_hoisted_78,toDisplayString(unref($t)("admin.settings.security.accessControl.invalidDomain")),1)):createCommentVNode("",!0)])])])])])}}}),_hoisted_1$d={class:"flex flex-col md:flex-row md:items-start"},_hoisted_2$a={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_3$a={class:"flex-1"},_hoisted_4$a={key:0,class:"text-content-subtle mt-2 text-xs"},_sfc_main$d=defineComponent({__name:"SettingItem",props:{label:{},icon:{},description:{}},setup(__props){return(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$d,[createBaseVNode("label",_hoisted_2$a,[__props.icon?(openBlock(),createElementBlock("i",{key:0,class:normalizeClass(`fas fa-${__props.icon} mr-2 text-brand-600`)},null,2)):createCommentVNode("",!0),createTextVNode(" "+toDisplayString(__props.label),1)]),createBaseVNode("div",_hoisted_3$a,[renderSlot(_ctx.$slots,"default"),__props.description?(openBlock(),createElementBlock("p",_hoisted_4$a,toDisplayString(__props.description),1)):createCommentVNode("",!0)])]))}}),_hoisted_1$c={class:"space-y-5"},_hoisted_2$9={class:"space-y-5"},_hoisted_3$9={class:"mb-4 border-b border-subtle pb-2 text-lg font-medium text-content-heading"},_hoisted_4$9={class:"space-y-4"},_hoisted_5$9={class:"flex items-center gap-3"},_hoisted_6$9={class:"flex items-center"},_hoisted_7$8={class:"text-content-content-muted mr-2 whitespace-nowrap text-sm"},_hoisted_8$8={class:"ml-4 flex items-center"},_hoisted_9$8={class:"text-content-content-muted mr-2 whitespace-nowrap text-sm"},_hoisted_10$7={class:"flex items-center gap-3"},_hoisted_11$7={class:"flex items-center"},_hoisted_12$7={class:"text-content-content-muted mr-2 whitespace-nowrap text-sm"},_hoisted_13$6={class:"ml-4 flex items-center"},_hoisted_14$6={class:"text-content-content-muted mr-2 whitespace-nowrap text-sm"},_hoisted_15$6={class:"flex items-center"},_hoisted_16$6={class:"text-content-content-muted ml-3 text-sm"},_hoisted_17$6={class:"flex items-center"},_hoisted_18$6={class:"text-content-content-muted ml-3 text-sm"},_hoisted_19$6={class:"space-y-5"},_hoisted_20$6={class:"mb-4 border-b border-subtle pb-2 text-lg font-medium text-content-heading"},_hoisted_21$4={class:"space-y-4"},_hoisted_22$4={class:"flex items-center"},_hoisted_23$5={class:"text-content-content-muted ml-3 text-sm"},_hoisted_24$5={class:"flex items-center"},_hoisted_25$5={class:"text-content-content-muted ml-3 text-sm"},_hoisted_26$5={class:"flex items-center"},_hoisted_27$5={class:"text-content-content-muted ml-3 text-sm"},_hoisted_28$5={class:"space-y-5"},_hoisted_29$5={class:"mb-4 border-b border-subtle pb-2 text-lg font-medium text-content-heading"},_hoisted_30$5={class:"space-y-4"},_hoisted_31$5={class:"flex flex-col md:flex-row md:items-center"},_hoisted_32$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_33$5={class:"flex-1"},_hoisted_34$5={class:"text-content-content-disabled mt-1 text-xs"},_hoisted_35$5={class:"flex flex-col md:flex-row md:items-center"},_hoisted_36$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_37$5={class:"flex-1"},_hoisted_38$5={class:"inline-flex h-[34px] w-[500px] items-center gap-2 rounded-lg border px-3 py-1.5",style:{background:"rgba(var(--color-background-800-rgb), 0.6)",borderColor:"rgba(var(--color-brand-500-rgb), 0.2)"}},_hoisted_39$5={class:"text-content-default text-sm font-medium"},_hoisted_40$5={class:"text-content-content-disabled mt-1 text-xs"},_sfc_main$c=defineComponent({__name:"UploadSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,uploadDefaults=defaultSettings.upload.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),localSettings=reactive({allowed_image_formats:[...uploadDefaults.allowed_image_formats||[]],max_file_size:uploadDefaults.max_file_size||20,max_batch_size:uploadDefaults.max_batch_size||100,thumbnail_quality:uploadDefaults.thumbnail_quality||50,thumbnail_max_width:uploadDefaults.thumbnail_max_width||200,thumbnail_max_height:uploadDefaults.thumbnail_max_height||200,preserve_exif:uploadDefaults.preserve_exif??!0,daily_upload_limit:uploadDefaults.daily_upload_limit||50,client_max_concurrent_uploads:uploadDefaults.client_max_concurrent_uploads||3,chunked_upload_enabled:uploadDefaults.chunked_upload_enabled??!0,chunked_threshold:uploadDefaults.chunked_threshold||20,chunk_size:uploadDefaults.chunk_size||2,max_concurrency:uploadDefaults.max_concurrency||5,session_timeout:uploadDefaults.session_timeout||24,retry_count:uploadDefaults.retry_count||3,cleanup_interval:uploadDefaults.cleanup_interval||60,content_detection_enabled:uploadDefaults.content_detection_enabled??!1,sensitive_content_handling:uploadDefaults.sensitive_content_handling||"mark_only",ai_analysis_enabled:uploadDefaults.ai_analysis_enabled??!1,user_allowed_storage_durations:uploadDefaults.user_allowed_storage_durations||["1h","3d","7d","30d","permanent"],user_default_storage_duration:uploadDefaults.user_default_storage_duration||"permanent"}),imageFormatOptions=ref([{label:"JPG",value:"jpg"},{label:"JPEG",value:"jpeg"},{label:"PNG",value:"png"},{label:"GIF",value:"gif"},{label:"WebP",value:"webp"},{label:"BMP",value:"bmp"},{label:"SVG",value:"svg"},{label:"ICO",value:"ico"},{label:"APNG",value:"apng"},{label:"TIFF",value:"tiff"},{label:"TIF",value:"tif"},{label:"HEIC",value:"heic"},{label:"HEIF",value:"heif"}]),caps=ref(null),getSettingsArray=()=>defaultSettings.upload.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"upload",description:defaultSetting.description}}),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings)if(key==="allowed_image_formats"&&Array.isArray(setting.value)){const validFormats=setting.value.filter(format=>imageFormatOptions.value.some(option=>option.value===format));localSettings.allowed_image_formats=validFormats}else{const settingsRecord=localSettings;settingsRecord[key]=setting.value}})};watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0});const ensurePermanentSelected=()=>{localSettings.user_allowed_storage_durations.includes("permanent")||(localSettings.user_allowed_storage_durations=[...localSettings.user_allowed_storage_durations,"permanent"])};watch(()=>localSettings.user_allowed_storage_durations,newDurations=>{ensurePermanentSelected(),newDurations&&localSettings.user_default_storage_duration!=="permanent"&&(newDurations.includes(localSettings.user_default_storage_duration)||(localSettings.user_default_storage_duration=newDurations[0]||"permanent"))},{deep:!0});const loadCapabilities=async()=>{try{const resp=await get("/config/upload/capabilities");caps.value=resp?.data||null;const exts=resp?.data?.supported_extensions||[];Array.isArray(exts)&&exts.length>0&&(imageFormatOptions.value=exts.map(e=>({label:e.toUpperCase(),value:e})),props.settings&&props.settings.length>0&&applySettings(props.settings))}catch{}},handleAddUserOption=_option=>{},handleRemoveUserOption=value=>{localSettings.user_default_storage_duration===value&&(localSettings.user_default_storage_duration="permanent")},handleValidationError=()=>{};return onMounted(()=>{loadCapabilities(),props.settings&&props.settings.length>0&&applySettings(props.settings),ensurePermanentSelected()}),(_ctx,_cache)=>{const _component_CyberDropdown=resolveComponent("CyberDropdown"),_component_CyberInput=resolveComponent("CyberInput"),_component_CyberSlider=resolveComponent("CyberSlider"),_component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberMultiSelector=resolveComponent("CyberMultiSelector");return openBlock(),createElementBlock("div",_hoisted_1$c,[createBaseVNode("div",_hoisted_2$9,[createBaseVNode("h3",_hoisted_3$9,toDisplayString(unref($t)("admin.settings.upload.general.title")),1),createBaseVNode("div",_hoisted_4$9,[createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.formats.label"),icon:"file-image",description:unref($t)("admin.settings.upload.formats.description")},{default:withCtx(()=>[createVNode(_component_CyberDropdown,{modelValue:localSettings.allowed_image_formats,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.allowed_image_formats=$event),options:imageFormatOptions.value,placeholder:unref($t)("admin.settings.upload.formats.placeholder"),multiple:"",style:{width:"500px"}},null,8,["modelValue","options","placeholder"])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.sizeLimit.label"),icon:"weight-hanging",description:unref($t)("admin.settings.upload.sizeLimit.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_5$9,[createBaseVNode("div",_hoisted_6$9,[createBaseVNode("span",_hoisted_7$8,toDisplayString(unref($t)("admin.settings.upload.sizeLimit.singleFile"))+":",1),createVNode(_component_CyberInput,{modelValue:localSettings.max_file_size,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.max_file_size=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.sizeLimit.singlePlaceholder"),width:"120px",min:"0",max:"1024"},{unit:withCtx(()=>[..._cache[17]||(_cache[17]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_8$8,[createBaseVNode("span",_hoisted_9$8,toDisplayString(unref($t)("admin.settings.upload.multiFile"))+":",1),createVNode(_component_CyberInput,{modelValue:localSettings.max_batch_size,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.max_batch_size=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.batchSize.placeholder"),width:"120px",min:"0",max:"2048"},{unit:withCtx(()=>[..._cache[18]||(_cache[18]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder"])])])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.thumbnailSize.label"),icon:"arrows-alt",description:unref($t)("admin.settings.upload.thumbnailSize.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_10$7,[createBaseVNode("div",_hoisted_11$7,[createBaseVNode("span",_hoisted_12$7,toDisplayString(unref($t)("admin.settings.upload.thumbnailSize.maxWidth"))+":",1),createVNode(_component_CyberInput,{modelValue:localSettings.thumbnail_max_width,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.thumbnail_max_width=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.thumbnailSize.widthPlaceholder"),width:"120px",min:"100",max:1e4},{unit:withCtx(()=>[..._cache[19]||(_cache[19]=[createTextVNode("px",-1)])]),_:1},8,["modelValue","placeholder"])]),createBaseVNode("div",_hoisted_13$6,[createBaseVNode("span",_hoisted_14$6,toDisplayString(unref($t)("admin.settings.upload.thumbnailSize.maxHeight"))+":",1),createVNode(_component_CyberInput,{modelValue:localSettings.thumbnail_max_height,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>localSettings.thumbnail_max_height=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.thumbnailSize.heightPlaceholder"),width:"120px",min:"100",max:1e4},{unit:withCtx(()=>[..._cache[20]||(_cache[20]=[createTextVNode("px",-1)])]),_:1},8,["modelValue","placeholder"])])])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.thumbnailQuality.label"),icon:"compress",description:unref($t)("admin.settings.upload.thumbnailQuality.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_15$6,[createVNode(_component_CyberSlider,{modelValue:localSettings.thumbnail_quality,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.thumbnail_quality=$event),min:0,max:100,step:1,width:"460px"},null,8,["modelValue"]),createBaseVNode("span",_hoisted_16$6,toDisplayString(localSettings.thumbnail_quality)+"%",1)])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.preserveExif.label"),icon:"info-circle",description:unref($t)("admin.settings.upload.preserveExif.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_17$6,[createVNode(_component_CyberSwitch,{modelValue:localSettings.preserve_exif,"onUpdate:modelValue":_cache[6]||(_cache[6]=$event=>localSettings.preserve_exif=$event)},null,8,["modelValue"]),createBaseVNode("span",_hoisted_18$6,toDisplayString(localSettings.preserve_exif?unref($t)("admin.settings.upload.preserveExif.enabled"):unref($t)("admin.settings.upload.preserveExif.disabled")),1)])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.dailyUploadLimit.label"),icon:"upload",description:unref($t)("admin.settings.upload.dailyUploadLimit.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.daily_upload_limit,"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>localSettings.daily_upload_limit=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.dailyLimit.placeholder"),width:"500px",min:"0"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.clientMaxConcurrent.label"),icon:"rocket",description:unref($t)("admin.settings.upload.clientMaxConcurrent.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.client_max_concurrent_uploads,"onUpdate:modelValue":_cache[8]||(_cache[8]=$event=>localSettings.client_max_concurrent_uploads=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.maxConcurrent.placeholder"),width:"500px",min:"1",max:"10"},null,8,["modelValue","placeholder"])]),_:1},8,["label","description"])])]),createBaseVNode("div",_hoisted_19$6,[createBaseVNode("h3",_hoisted_20$6,toDisplayString(unref($t)("admin.settings.upload.chunkedUpload.title")),1),createBaseVNode("div",_hoisted_21$4,[createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.enabled.label"),icon:"toggle-on",description:unref($t)("admin.settings.upload.chunkedUpload.enabled.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_22$4,[createVNode(_component_CyberSwitch,{modelValue:localSettings.chunked_upload_enabled,"onUpdate:modelValue":_cache[9]||(_cache[9]=$event=>localSettings.chunked_upload_enabled=$event)},null,8,["modelValue"]),createBaseVNode("span",_hoisted_23$5,toDisplayString(localSettings.chunked_upload_enabled?unref($t)("admin.settings.upload.chunkedUpload.enabled.on"):unref($t)("admin.settings.upload.chunkedUpload.enabled.off")),1)])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.threshold.label"),icon:"ruler",description:unref($t)("admin.settings.upload.chunkedUpload.threshold.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.chunked_threshold,"onUpdate:modelValue":_cache[10]||(_cache[10]=$event=>localSettings.chunked_threshold=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.chunkedThreshold.placeholder"),width:"500px",min:"1",max:"100",disabled:!localSettings.chunked_upload_enabled},{unit:withCtx(()=>[..._cache[21]||(_cache[21]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.size.label"),icon:"cut",description:unref($t)("admin.settings.upload.chunkedUpload.size.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.chunk_size,"onUpdate:modelValue":_cache[11]||(_cache[11]=$event=>localSettings.chunk_size=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.chunkSize.placeholder"),width:"500px",min:"1",max:"10",disabled:!localSettings.chunked_upload_enabled},{unit:withCtx(()=>[..._cache[22]||(_cache[22]=[createTextVNode("MB",-1)])]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.maxConcurrency.label"),icon:"layer-group",description:unref($t)("admin.settings.upload.chunkedUpload.maxConcurrency.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_24$5,[createVNode(_component_CyberSlider,{modelValue:localSettings.max_concurrency,"onUpdate:modelValue":_cache[12]||(_cache[12]=$event=>localSettings.max_concurrency=$event),min:1,max:10,step:1,width:"460px",disabled:!localSettings.chunked_upload_enabled},null,8,["modelValue","disabled"]),createBaseVNode("span",_hoisted_25$5,toDisplayString(localSettings.max_concurrency)+" "+toDisplayString(unref($t)("admin.settings.upload.units.count")),1)])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.retryCount.label"),icon:"redo",description:unref($t)("admin.settings.upload.chunkedUpload.retryCount.description")},{default:withCtx(()=>[createBaseVNode("div",_hoisted_26$5,[createVNode(_component_CyberSlider,{modelValue:localSettings.retry_count,"onUpdate:modelValue":_cache[13]||(_cache[13]=$event=>localSettings.retry_count=$event),min:1,max:10,step:1,width:"460px",disabled:!localSettings.chunked_upload_enabled},null,8,["modelValue","disabled"]),createBaseVNode("span",_hoisted_27$5,toDisplayString(localSettings.retry_count)+" "+toDisplayString(unref($t)("admin.settings.upload.units.times")),1)])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.sessionTimeout.label"),icon:"clock",description:unref($t)("admin.settings.upload.chunkedUpload.sessionTimeout.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.session_timeout,"onUpdate:modelValue":_cache[14]||(_cache[14]=$event=>localSettings.session_timeout=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.sessionTimeout.placeholder"),width:"500px",min:"1",max:"168",disabled:!localSettings.chunked_upload_enabled},{unit:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("admin.settings.upload.units.hours")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","description"]),createVNode(_sfc_main$d,{label:unref($t)("admin.settings.upload.chunkedUpload.cleanupInterval.label"),icon:"broom",description:unref($t)("admin.settings.upload.chunkedUpload.cleanupInterval.description")},{default:withCtx(()=>[createVNode(_component_CyberInput,{modelValue:localSettings.cleanup_interval,"onUpdate:modelValue":_cache[15]||(_cache[15]=$event=>localSettings.cleanup_interval=$event),modelModifiers:{number:!0},type:"number",placeholder:unref($t)("admin.settings.upload.cleanupInterval.placeholder"),width:"500px",min:"10",max:"1440",disabled:!localSettings.chunked_upload_enabled},{unit:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("admin.settings.upload.units.minutes")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),_:1},8,["label","description"])])]),createBaseVNode("div",_hoisted_28$5,[createBaseVNode("h3",_hoisted_29$5,toDisplayString(unref($t)("admin.settings.upload.storageDuration.title")),1),createBaseVNode("div",_hoisted_30$5,[createBaseVNode("div",_hoisted_31$5,[createBaseVNode("label",_hoisted_32$5,[_cache[23]||(_cache[23]=createBaseVNode("i",{class:"fas fa-clock mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.upload.storageDuration.userAllowed")),1)]),createBaseVNode("div",_hoisted_33$5,[createVNode(_component_CyberMultiSelector,{modelValue:localSettings.user_allowed_storage_durations,"onUpdate:modelValue":_cache[16]||(_cache[16]=$event=>localSettings.user_allowed_storage_durations=$event),"input-id-prefix":"user-duration","forced-value":"permanent",size:"sm",rounded:"sm","default-icon":"fas fa-clock","forced-icon":"fas fa-infinity",editable:!0,"add-text":unref($t)("admin.settings.upload.storageDuration.addNew"),"max-options":15,"is-guest":!1,onAddOption:handleAddUserOption,onRemoveOption:handleRemoveUserOption,onValidationError:handleValidationError},null,8,["modelValue","add-text"]),createBaseVNode("p",_hoisted_34$5,toDisplayString(unref($t)("admin.settings.upload.storageDuration.userAllowedHint")),1)])]),createBaseVNode("div",_hoisted_35$5,[createBaseVNode("label",_hoisted_36$5,[_cache[24]||(_cache[24]=createBaseVNode("i",{class:"fas fa-hourglass-half mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.upload.storageDuration.defaultDuration")),1)]),createBaseVNode("div",_hoisted_37$5,[createBaseVNode("div",_hoisted_38$5,[_cache[25]||(_cache[25]=createBaseVNode("i",{class:"fas fa-infinity text-sm text-brand-400"},null,-1)),createBaseVNode("span",_hoisted_39$5,toDisplayString(unref($t)("admin.settings.upload.storageDuration.permanent")),1),_cache[26]||(_cache[26]=createBaseVNode("i",{class:"fas fa-lock ml-auto text-xs text-content-muted"},null,-1))]),createBaseVNode("p",_hoisted_40$5,toDisplayString(unref($t)("admin.settings.upload.storageDuration.defaultDurationHint")),1)])])])])])}}});const UploadSettings=_export_sfc(_sfc_main$c,[["__scopeId","data-v-cafd3ea5"]]),_hoisted_1$b={class:"space-y-5"},_hoisted_2$8={class:"space-y-5"},_hoisted_3$8={class:"space-y-5"},_hoisted_4$8={class:"flex flex-col md:flex-row md:items-center"},_hoisted_5$8={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_6$8={class:"flex flex-1 items-center"},_hoisted_7$7={class:"ml-3 text-sm text-content-muted"},_hoisted_8$7={class:"flex flex-col md:flex-row md:items-center"},_hoisted_9$7={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_10$6={class:"flex-1"},_hoisted_11$6={class:"flex items-center"},_hoisted_12$6={class:"text-content-subtle mt-1 text-xs"},_hoisted_23$4={class:"flex flex-col md:flex-row md:items-center"},_hoisted_24$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_25$4={class:"flex-1"},_hoisted_26$4={class:"access-level-badge"},_hoisted_27$4={class:"badge-text"},_hoisted_28$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_29$4={class:"flex flex-col md:flex-row md:items-center"},_hoisted_30$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_31$4={class:"flex-1"},_hoisted_32$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_33$4={class:"flex flex-col md:flex-row md:items-center"},_hoisted_34$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_35$4={class:"flex-1"},_hoisted_36$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_37$4={class:"flex flex-col md:flex-row md:items-center"},_hoisted_38$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_39$4={class:"flex-1"},_hoisted_40$4={class:"flex items-center"},_hoisted_41$1={class:"text-content-subtle mt-1 text-xs"},_sfc_main$b=defineComponent({__name:"GuestSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit;computed(()=>[{label:$t("admin.settings.guest.accessPublic"),value:"public"},{label:$t("admin.settings.guest.accessPrivate"),value:"private"}]);const guestDefaults=defaultSettings.guest.reduce((acc,setting)=>(acc[setting.key]=setting.value,acc),{}),localSettings=reactive({enable_guest_upload:guestDefaults.enable_guest_upload??!0,guest_daily_limit:guestDefaults.guest_daily_limit??10,guest_default_access_level:"public",guest_allowed_storage_durations:guestDefaults.guest_allowed_storage_durations??["3d","7d","30d"],guest_default_storage_duration:guestDefaults.guest_default_storage_duration??"7d",guest_ip_daily_limit:guestDefaults.guest_ip_daily_limit??50}),guestDefaultOptions=computed(()=>localSettings.guest_allowed_storage_durations?.length?localSettings.guest_allowed_storage_durations.map(duration=>({value:duration,label:formatDurationLabel(duration)})):[]),formatDurationLabel=duration=>duration==="permanent"?$t("admin.settings.guest.durationPermanent"):duration.endsWith("m")?duration.replace("m",$t("admin.settings.guest.durationMinutes")):duration.endsWith("h")?duration.replace("h",$t("admin.settings.guest.durationHours")):duration.endsWith("d")?duration.replace("d",$t("admin.settings.guest.durationDays")):duration,getSettingsArray=()=>defaultSettings.guest.map(defaultSetting=>{const settingKey=defaultSetting.key;return{key:defaultSetting.key,value:localSettings[settingKey],type:defaultSetting.type,group:"guest",description:defaultSetting.description}}),applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings)if(key==="guest_allowed_storage_durations"&&Array.isArray(setting.value))localSettings[key]=setting.value;else{const settingsRecord=localSettings;settingsRecord[key]=setting.value}})};watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),watch(()=>localSettings.guest_allowed_storage_durations,newDurations=>{newDurations&&newDurations.length>0?newDurations.includes(localSettings.guest_default_storage_duration)||(localSettings.guest_default_storage_duration=newDurations[0]):localSettings.guest_default_storage_duration=""},{deep:!0});const handleAddGuestOption=_option=>{},handleRemoveGuestOption=value=>{if(localSettings.guest_default_storage_duration===value){const remaining=localSettings.guest_allowed_storage_durations.filter(d=>d!==value);localSettings.guest_default_storage_duration=remaining[0]||""}},handleGuestValidationError=()=>{};return onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput"),_component_CyberDropdown=resolveComponent("CyberDropdown"),_component_CyberMultiSelector=resolveComponent("CyberMultiSelector");return openBlock(),createElementBlock("div",_hoisted_1$b,[createBaseVNode("div",_hoisted_2$8,[createBaseVNode("div",_hoisted_3$8,[createBaseVNode("div",_hoisted_4$8,[createBaseVNode("label",_hoisted_5$8,[_cache[6]||(_cache[6]=createBaseVNode("i",{class:"fas fa-user-secret mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.enableUpload")),1)]),createBaseVNode("div",_hoisted_6$8,[createVNode(_component_CyberSwitch,{modelValue:localSettings.enable_guest_upload,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.enable_guest_upload=$event)},null,8,["modelValue"]),createBaseVNode("span",_hoisted_7$7,toDisplayString(localSettings.enable_guest_upload?unref($t)("admin.settings.guest.uploadAllowed"):unref($t)("admin.settings.guest.uploadDisabled")),1)])]),createBaseVNode("div",_hoisted_8$7,[createBaseVNode("label",_hoisted_9$7,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-calendar-day mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.dailyLimit")),1)]),createBaseVNode("div",_hoisted_10$6,[createBaseVNode("div",_hoisted_11$6,[createVNode(_component_CyberInput,{modelValue:localSettings.guest_daily_limit,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.guest_daily_limit=$event),type:"number",placeholder:unref($t)("admin.settings.guest.dailyLimitPlaceholder"),width:"500px",disabled:!localSettings.enable_guest_upload},{unit:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("admin.settings.guest.times")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),createBaseVNode("p",_hoisted_12$6,toDisplayString(unref($t)("admin.settings.guest.dailyLimitDesc")),1)])]),createCommentVNode("",!0),createBaseVNode("div",_hoisted_23$4,[createBaseVNode("label",_hoisted_24$4,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-globe mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.accessPermission")),1)]),createBaseVNode("div",_hoisted_25$4,[createBaseVNode("div",_hoisted_26$4,[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-globe badge-icon"},null,-1)),createBaseVNode("span",_hoisted_27$4,toDisplayString(unref($t)("admin.settings.guest.publicAccess")),1)]),createBaseVNode("p",_hoisted_28$4,toDisplayString(unref($t)("admin.settings.guest.publicAccessDesc")),1)])]),createBaseVNode("div",_hoisted_29$4,[createBaseVNode("label",_hoisted_30$4,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-clock mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.allowedDurations")),1)]),createBaseVNode("div",_hoisted_31$4,[createVNode(_component_CyberMultiSelector,{modelValue:localSettings.guest_allowed_storage_durations,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.guest_allowed_storage_durations=$event),disabled:!localSettings.enable_guest_upload,"input-id-prefix":"guest-duration",size:"sm",rounded:"sm","default-icon":"fas fa-clock",editable:!0,"add-text":unref($t)("admin.settings.guest.addDuration"),"max-options":10,"is-guest":!0,onAddOption:handleAddGuestOption,onRemoveOption:handleRemoveGuestOption,onValidationError:handleGuestValidationError},null,8,["modelValue","disabled","add-text"]),createBaseVNode("p",_hoisted_32$4,toDisplayString(unref($t)("admin.settings.guest.allowedDurationsDesc")),1)])]),createBaseVNode("div",_hoisted_33$4,[createBaseVNode("label",_hoisted_34$4,[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-hourglass-half mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.defaultDuration")),1)]),createBaseVNode("div",_hoisted_35$4,[createVNode(_component_CyberDropdown,{modelValue:localSettings.guest_default_storage_duration,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>localSettings.guest_default_storage_duration=$event),options:guestDefaultOptions.value,placeholder:unref($t)("admin.settings.guest.selectDefaultDuration"),style:{width:"500px"},class:"h-[30px]",disabled:!localSettings.enable_guest_upload||localSettings.guest_allowed_storage_durations?.length===0},{"option-icon":withCtx(()=>[..._cache[13]||(_cache[13]=[createBaseVNode("i",{class:"fas fa-calendar-alt text-sm text-content"},null,-1)])]),"selected-icon":withCtx(()=>[..._cache[14]||(_cache[14]=[createBaseVNode("i",{class:"fas fa-calendar-alt text-sm text-content"},null,-1)])]),_:1},8,["modelValue","options","placeholder","disabled"]),createBaseVNode("p",_hoisted_36$4,toDisplayString(unref($t)("admin.settings.guest.defaultDurationDesc")),1)])]),createBaseVNode("div",_hoisted_37$4,[createBaseVNode("label",_hoisted_38$4,[_cache[15]||(_cache[15]=createBaseVNode("i",{class:"fas fa-network-wired mr-2 text-brand-600"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.guest.ipDailyLimit")),1)]),createBaseVNode("div",_hoisted_39$4,[createBaseVNode("div",_hoisted_40$4,[createVNode(_component_CyberInput,{modelValue:localSettings.guest_ip_daily_limit,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.guest_ip_daily_limit=$event),type:"number",placeholder:unref($t)("admin.settings.guest.ipDailyLimitPlaceholder"),width:"500px",disabled:!localSettings.enable_guest_upload},{unit:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("admin.settings.guest.times")),1)]),_:1},8,["modelValue","placeholder","disabled"])]),createBaseVNode("p",_hoisted_41$1,toDisplayString(unref($t)("admin.settings.guest.ipDailyLimitDesc")),1)])])])])])}}});const GuestSettings=_export_sfc(_sfc_main$b,[["__scopeId","data-v-f58ef0c0"]]),_hoisted_1$a={class:"cyber-tabs"},_hoisted_2$7={class:"tabs-header"},_hoisted_3$7=["onClick"],_hoisted_4$7={class:"tab-label"},_hoisted_5$7={key:0,class:"tab-indicator"},_hoisted_6$7={class:"tabs-content"},_sfc_main$a=defineComponent({name:"CyberTabs",__name:"index",props:{modelValue:{default:""}},emits:["update:modelValue","change"],setup(__props,{emit:__emit}){const props=__props,emit=__emit,activeTab=ref(props.modelValue),slots=useSlots();watch(()=>props.modelValue,newVal=>{activeTab.value=newVal});const tabs=(()=>(slots.default?.()||[]).filter(vnode=>vnode.type&&typeof vnode.type=="object"&&vnode.type.name==="CyberTabPane").map(vnode=>({name:vnode.props?.name||"",label:vnode.props?.label||"",disabled:vnode.props?.disabled||!1})))(),handleTabClick=(tabName,disabled)=>{disabled||(activeTab.value=tabName,emit("update:modelValue",tabName),emit("change",tabName))};return provide("activeTab",activeTab),(_ctx,_cache)=>(openBlock(),createElementBlock("div",_hoisted_1$a,[createBaseVNode("div",_hoisted_2$7,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(tabs),tab=>(openBlock(),createElementBlock("div",{key:tab.name,class:normalizeClass(["tab-item",{active:activeTab.value===tab.name,disabled:tab.disabled}]),onClick:$event=>handleTabClick(tab.name,tab.disabled)},[createBaseVNode("span",_hoisted_4$7,toDisplayString(tab.label),1),activeTab.value===tab.name?(openBlock(),createElementBlock("div",_hoisted_5$7)):createCommentVNode("",!0)],10,_hoisted_3$7))),128))]),createBaseVNode("div",_hoisted_6$7,[renderSlot(_ctx.$slots,"default",{},void 0,!0)])]))}});const __unplugin_components_1=_export_sfc(_sfc_main$a,[["__scopeId","data-v-0ccbe966"]]),_hoisted_1$9={class:"cyber-tab-pane"},_sfc_main$9=defineComponent({name:"CyberTabPane",__name:"CyberTabPane",props:{name:{},label:{},disabled:{type:Boolean}},setup(__props){const props=__props,activeTab=inject("activeTab"),isActive=computed(()=>activeTab?.value===props.name);return(_ctx,_cache)=>withDirectives((openBlock(),createElementBlock("div",_hoisted_1$9,[renderSlot(_ctx.$slots,"default",{},void 0,!0)],512)),[[vShow,isActive.value]])}});const __unplugin_components_0=_export_sfc(_sfc_main$9,[["__scopeId","data-v-e111c190"]]),_hoisted_1$8={class:"space-y-4 py-3"},_hoisted_2$6={class:"flex flex-col md:flex-row md:items-center"},_hoisted_3$6={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_4$6={class:"flex-1"},_hoisted_5$6={class:"flex flex-col md:flex-row md:items-start"},_hoisted_6$6={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$6={class:"flex-1"},_hoisted_8$6={class:"text-content-subtle mt-1 text-xs"},_hoisted_9$6={class:"flex flex-col md:flex-row md:items-start"},_hoisted_10$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_11$5={class:"flex-1"},_hoisted_12$5={class:"text-content-subtle mt-1 text-xs"},_hoisted_13$5={class:"flex flex-col md:flex-row md:items-start"},_hoisted_14$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_15$5={class:"flex-1"},_hoisted_16$5={class:"flex items-center gap-2"},_hoisted_17$5={class:"text-content-subtle mt-1 text-xs"},_hoisted_18$5={class:"flex flex-col md:flex-row md:items-start"},_hoisted_19$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_20$5={class:"flex-1"},_hoisted_21$3={class:"text-content-subtle mt-1 text-xs"},_hoisted_22$3={class:"flex flex-col md:flex-row md:items-center"},_hoisted_23$3={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_24$3={class:"flex-1"},_hoisted_25$3={class:"text-content-subtle mt-1 text-xs"},_hoisted_26$3={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_27$3={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_28$3={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_29$3={class:"flex gap-2"},_hoisted_30$3={href:"https://github.com/settings/developers",target:"_blank",class:"text-brand-400 hover:text-brand-300"},_hoisted_31$3={class:"flex gap-2"},_hoisted_32$3={class:"flex gap-2"},_hoisted_33$3={class:"flex-1"},_hoisted_34$3={class:"text-brand-400"},_hoisted_35$3={class:"mt-1 rounded bg-background-900 px-2 py-1 font-mono text-brand-300"},_hoisted_36$3={class:"mt-1 text-[11px] text-content-muted"},_hoisted_37$3={class:"flex gap-2"},_hoisted_38$3={class:"text-brand-400"},_hoisted_39$3={class:"text-brand-400"},_hoisted_40$3={class:"flex gap-2"},_sfc_main$8=defineComponent({__name:"GithubOAuthSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({github_oauth_enabled:!1,github_oauth_client_id:"",github_oauth_client_secret:"",github_oauth_redirect_uri:"",github_oauth_scope:"user:email",github_oauth_proxy_enabled:!1}),getSettingsArray=()=>[{key:"github_oauth_enabled",value:localSettings.github_oauth_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.github.desc.enabled")},{key:"github_oauth_client_id",value:localSettings.github_oauth_client_id,type:"string",group:"oauth",description:$t("admin.settings.oauth.github.desc.clientId")},{key:"github_oauth_client_secret",value:localSettings.github_oauth_client_secret,type:"string",group:"oauth",description:$t("admin.settings.oauth.github.desc.clientSecret")},{key:"github_oauth_redirect_uri",value:localSettings.github_oauth_redirect_uri,type:"string",group:"oauth",description:$t("admin.settings.oauth.github.desc.redirectUri")},{key:"github_oauth_scope",value:"user:email",type:"string",group:"oauth",description:$t("admin.settings.oauth.github.desc.scope")},{key:"github_oauth_proxy_enabled",value:localSettings.github_oauth_proxy_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.github.desc.proxyEnabled")}],applySettings=settings=>{if(settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}}),!localSettings.github_oauth_redirect_uri){const baseUrl=window.location.origin;localSettings.github_oauth_redirect_uri=`${baseUrl}/auth`}localSettings.github_oauth_scope="user:email"},copyToClipboard=async text=>{try{await navigator.clipboard.writeText(text),toast.success($t("common.copySuccess"))}catch{toast.error($t("common.copyFailed"))}};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1$8,[createBaseVNode("div",_hoisted_2$6,[createBaseVNode("label",_hoisted_3$6,[_cache[6]||(_cache[6]=createBaseVNode("i",{class:"fab fa-github mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.enabled.label")),1)]),createBaseVNode("div",_hoisted_4$6,[createVNode(_component_CyberSwitch,{modelValue:localSettings.github_oauth_enabled,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.github_oauth_enabled=$event)},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_5$6,[createBaseVNode("label",_hoisted_6$6,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-key mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.clientId.label")),1)]),createBaseVNode("div",_hoisted_7$6,[createVNode(_component_CyberInput,{modelValue:localSettings.github_oauth_client_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.github_oauth_client_id=$event),placeholder:unref($t)("admin.settings.oauth.github.clientId.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_8$6,toDisplayString(unref($t)("admin.settings.oauth.github.clientId.description")),1)])]),createBaseVNode("div",_hoisted_9$6,[createBaseVNode("label",_hoisted_10$5,[_cache[8]||(_cache[8]=createBaseVNode("i",{class:"fas fa-lock mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.clientSecret.label")),1)]),createBaseVNode("div",_hoisted_11$5,[createVNode(_component_CyberInput,{modelValue:localSettings.github_oauth_client_secret,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.github_oauth_client_secret=$event),type:"password",placeholder:unref($t)("admin.settings.oauth.github.clientSecret.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_12$5,toDisplayString(unref($t)("admin.settings.oauth.github.clientSecret.description")),1)])]),createBaseVNode("div",_hoisted_13$5,[createBaseVNode("label",_hoisted_14$5,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-link mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.callbackUrl.label")),1)]),createBaseVNode("div",_hoisted_15$5,[createBaseVNode("div",_hoisted_16$5,[createVNode(_component_CyberInput,{modelValue:localSettings.github_oauth_redirect_uri,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.github_oauth_redirect_uri=$event),placeholder:unref($t)("admin.settings.oauth.github.callbackUrl.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("button",{class:"rounded bg-background-700 px-3 py-2 text-sm text-content transition-colors hover:bg-background-600",onClick:_cache[4]||(_cache[4]=$event=>copyToClipboard(localSettings.github_oauth_redirect_uri))},[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-copy mr-1"},null,-1)),createTextVNode(toDisplayString(unref($t)("actions.copy")),1)])]),createBaseVNode("div",_hoisted_17$5,toDisplayString(unref($t)("admin.settings.oauth.github.callbackUrl.description")),1)])]),createBaseVNode("div",_hoisted_18$5,[createBaseVNode("label",_hoisted_19$5,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-shield-alt mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.scopes.label")),1)]),createBaseVNode("div",_hoisted_20$5,[_cache[12]||(_cache[12]=createBaseVNode("div",{class:"flex items-center gap-2"},[createBaseVNode("code",{class:"rounded bg-background-800 px-3 py-2 text-sm text-brand-400",style:{"font-family":"'Courier New', monospace"}}," user:email ")],-1)),createBaseVNode("div",_hoisted_21$3,toDisplayString(unref($t)("admin.settings.oauth.github.scopes.description")),1)])]),_cache[20]||(_cache[20]=createBaseVNode("div",{class:"border-brand-500/20 my-4 border-t"},null,-1)),createBaseVNode("div",_hoisted_22$3,[createBaseVNode("label",_hoisted_23$3,[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-network-wired mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.proxy.label")),1)]),createBaseVNode("div",_hoisted_24$3,[createVNode(_component_CyberSwitch,{modelValue:localSettings.github_oauth_proxy_enabled,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.github_oauth_proxy_enabled=$event)},null,8,["modelValue"]),createBaseVNode("div",_hoisted_25$3,toDisplayString(unref($t)("admin.settings.oauth.common.proxy.githubDescription")),1)])]),createBaseVNode("div",_hoisted_26$3,[createBaseVNode("div",_hoisted_27$3,[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.common.setup.title")),1)]),createBaseVNode("ol",_hoisted_28$3,[createBaseVNode("li",_hoisted_29$3,[_cache[15]||(_cache[15]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.setup.step1"))+" ",1),createBaseVNode("a",_hoisted_30$3,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step1Link")),1)])]),createBaseVNode("li",_hoisted_31$3,[_cache[16]||(_cache[16]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step2")),1)]),createBaseVNode("li",_hoisted_32$3,[_cache[17]||(_cache[17]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("div",_hoisted_33$3,[createBaseVNode("div",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.setup.step3"))+" ",1),createBaseVNode("span",_hoisted_34$3,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step3Field")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.github.setup.step3Suffix")),1)]),createBaseVNode("div",_hoisted_35$3,toDisplayString(unref($t)("admin.settings.oauth.common.callback.exampleUrl")),1),createBaseVNode("div",_hoisted_36$3,toDisplayString(unref($t)("admin.settings.oauth.common.callback.examplePrefix")),1)])]),createBaseVNode("li",_hoisted_37$3,[_cache[18]||(_cache[18]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.github.setup.step4"))+" ",1),createBaseVNode("span",_hoisted_38$3,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step4Field1")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.github.setup.step4And"))+" ",1),createBaseVNode("span",_hoisted_39$3,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step4Field2")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.github.setup.step4Suffix")),1)])]),createBaseVNode("li",_hoisted_40$3,[_cache[19]||(_cache[19]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.github.setup.step5")),1)])])])])}}});const GithubOAuthSettings=_export_sfc(_sfc_main$8,[["__scopeId","data-v-b9687ae6"]]),_hoisted_1$7={class:"space-y-4 py-3"},_hoisted_2$5={class:"flex flex-col md:flex-row md:items-center"},_hoisted_3$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_4$5={class:"flex-1"},_hoisted_5$5={class:"flex flex-col md:flex-row md:items-start"},_hoisted_6$5={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$5={class:"flex-1"},_hoisted_8$5={class:"text-content-subtle mt-1 text-xs"},_hoisted_9$5={class:"flex flex-col md:flex-row md:items-start"},_hoisted_10$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_11$4={class:"flex-1"},_hoisted_12$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_13$4={class:"flex flex-col md:flex-row md:items-start"},_hoisted_14$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_15$4={class:"flex-1"},_hoisted_16$4={class:"flex items-center gap-2"},_hoisted_17$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_18$4={class:"flex flex-col md:flex-row md:items-start"},_hoisted_19$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_20$4={class:"flex-1"},_hoisted_21$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_22$2={class:"flex flex-col md:flex-row md:items-center"},_hoisted_23$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_24$2={class:"flex-1"},_hoisted_25$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_26$2={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_27$2={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_28$2={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_29$2={class:"flex gap-2"},_hoisted_30$2={href:"https://console.cloud.google.com/apis/credentials",target:"_blank",class:"text-brand-400 hover:text-brand-300"},_hoisted_31$2={class:"flex gap-2"},_hoisted_32$2={class:"flex gap-2"},_hoisted_33$2={class:"flex-1"},_hoisted_34$2={class:"text-brand-400"},_hoisted_35$2={class:"mt-1 rounded bg-background-900 px-2 py-1 font-mono text-brand-300"},_hoisted_36$2={class:"mt-1 text-[11px] text-content-muted"},_hoisted_37$2={class:"flex gap-2"},_hoisted_38$2={class:"text-brand-400"},_hoisted_39$2={class:"text-brand-400"},_hoisted_40$2={class:"flex gap-2"},_sfc_main$7=defineComponent({__name:"GoogleOAuthSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({google_oauth_enabled:!1,google_oauth_client_id:"",google_oauth_client_secret:"",google_oauth_redirect_uri:"",google_oauth_scope:"openid email profile",google_oauth_proxy_enabled:!1}),getSettingsArray=()=>[{key:"google_oauth_enabled",value:localSettings.google_oauth_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.google.desc.enabled")},{key:"google_oauth_client_id",value:localSettings.google_oauth_client_id,type:"string",group:"oauth",description:$t("admin.settings.oauth.google.desc.clientId")},{key:"google_oauth_client_secret",value:localSettings.google_oauth_client_secret,type:"string",group:"oauth",description:$t("admin.settings.oauth.google.desc.clientSecret")},{key:"google_oauth_redirect_uri",value:localSettings.google_oauth_redirect_uri,type:"string",group:"oauth",description:$t("admin.settings.oauth.google.desc.redirectUri")},{key:"google_oauth_scope",value:"openid email profile",type:"string",group:"oauth",description:$t("admin.settings.oauth.google.desc.scope")},{key:"google_oauth_proxy_enabled",value:localSettings.google_oauth_proxy_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.google.desc.proxyEnabled")}],applySettings=settings=>{if(settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}}),!localSettings.google_oauth_redirect_uri){const baseUrl=window.location.origin;localSettings.google_oauth_redirect_uri=`${baseUrl}/auth`}localSettings.google_oauth_scope="openid email profile"},copyToClipboard=async text=>{try{await navigator.clipboard.writeText(text),toast.success($t("admin.settings.oauth.toast.copied"))}catch{toast.error($t("admin.settings.oauth.toast.copyFailed"))}};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1$7,[createBaseVNode("div",_hoisted_2$5,[createBaseVNode("label",_hoisted_3$5,[_cache[6]||(_cache[6]=createBaseVNode("i",{class:"fab fa-google mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.enabled.labelFull")),1)]),createBaseVNode("div",_hoisted_4$5,[createVNode(_component_CyberSwitch,{modelValue:localSettings.google_oauth_enabled,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.google_oauth_enabled=$event)},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_5$5,[createBaseVNode("label",_hoisted_6$5,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-key mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.clientId.label")),1)]),createBaseVNode("div",_hoisted_7$5,[createVNode(_component_CyberInput,{modelValue:localSettings.google_oauth_client_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.google_oauth_client_id=$event),placeholder:unref($t)("admin.settings.oauth.google.clientId.placeholderFull"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_8$5,toDisplayString(unref($t)("admin.settings.oauth.google.clientId.descriptionFull")),1)])]),createBaseVNode("div",_hoisted_9$5,[createBaseVNode("label",_hoisted_10$4,[_cache[8]||(_cache[8]=createBaseVNode("i",{class:"fas fa-lock mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.clientSecret.label")),1)]),createBaseVNode("div",_hoisted_11$4,[createVNode(_component_CyberInput,{modelValue:localSettings.google_oauth_client_secret,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.google_oauth_client_secret=$event),type:"password",placeholder:unref($t)("admin.settings.oauth.google.clientSecret.placeholderFull"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_12$4,toDisplayString(unref($t)("admin.settings.oauth.google.clientSecret.descriptionFull")),1)])]),createBaseVNode("div",_hoisted_13$4,[createBaseVNode("label",_hoisted_14$4,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-link mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.callbackUrl.label")),1)]),createBaseVNode("div",_hoisted_15$4,[createBaseVNode("div",_hoisted_16$4,[createVNode(_component_CyberInput,{modelValue:localSettings.google_oauth_redirect_uri,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.google_oauth_redirect_uri=$event),placeholder:unref($t)("admin.settings.oauth.google.callbackUrl.placeholderSimple"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("button",{class:"rounded bg-background-700 px-3 py-2 text-sm text-content transition-colors hover:bg-background-600",onClick:_cache[4]||(_cache[4]=$event=>copyToClipboard(localSettings.google_oauth_redirect_uri))},[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-copy mr-1"},null,-1)),createTextVNode(toDisplayString(unref($t)("actions.copy")),1)])]),createBaseVNode("div",_hoisted_17$4,toDisplayString(unref($t)("admin.settings.oauth.common.callback.format")),1)])]),createBaseVNode("div",_hoisted_18$4,[createBaseVNode("label",_hoisted_19$4,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-shield-alt mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.scopes.label")),1)]),createBaseVNode("div",_hoisted_20$4,[_cache[12]||(_cache[12]=createBaseVNode("div",{class:"flex items-center gap-2"},[createBaseVNode("code",{class:"rounded bg-background-800 px-3 py-2 text-sm text-brand-400",style:{"font-family":"'Courier New', monospace"}}," openid email profile ")],-1)),createBaseVNode("div",_hoisted_21$2,toDisplayString(unref($t)("admin.settings.oauth.google.scopes.fixed")),1)])]),_cache[20]||(_cache[20]=createBaseVNode("div",{class:"border-brand-500/20 my-4 border-t"},null,-1)),createBaseVNode("div",_hoisted_22$2,[createBaseVNode("label",_hoisted_23$2,[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-network-wired mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.proxy.label")),1)]),createBaseVNode("div",_hoisted_24$2,[createVNode(_component_CyberSwitch,{modelValue:localSettings.google_oauth_proxy_enabled,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.google_oauth_proxy_enabled=$event)},null,8,["modelValue"]),createBaseVNode("div",_hoisted_25$2,toDisplayString(unref($t)("admin.settings.oauth.common.proxy.googleDescription")),1)])]),createBaseVNode("div",_hoisted_26$2,[createBaseVNode("div",_hoisted_27$2,[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.common.setup.title")),1)]),createBaseVNode("ol",_hoisted_28$2,[createBaseVNode("li",_hoisted_29$2,[_cache[15]||(_cache[15]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.setup.step1"))+" ",1),createBaseVNode("a",_hoisted_30$2,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step1Link")),1)])]),createBaseVNode("li",_hoisted_31$2,[_cache[16]||(_cache[16]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step2")),1)]),createBaseVNode("li",_hoisted_32$2,[_cache[17]||(_cache[17]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("div",_hoisted_33$2,[createBaseVNode("div",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.setup.step3"))+" ",1),createBaseVNode("span",_hoisted_34$2,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step3Field")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.google.setup.step3Suffix")),1)]),createBaseVNode("div",_hoisted_35$2,toDisplayString(unref($t)("admin.settings.oauth.common.callback.exampleUrl")),1),createBaseVNode("div",_hoisted_36$2,toDisplayString(unref($t)("admin.settings.oauth.common.callback.examplePrefix")),1)])]),createBaseVNode("li",_hoisted_37$2,[_cache[18]||(_cache[18]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.google.setup.step4"))+" ",1),createBaseVNode("span",_hoisted_38$2,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step4Field1")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.google.setup.step4And"))+" ",1),createBaseVNode("span",_hoisted_39$2,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step4Field2")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.google.setup.step4Suffix")),1)])]),createBaseVNode("li",_hoisted_40$2,[_cache[19]||(_cache[19]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.google.setup.step5")),1)])])])])}}});const GoogleOAuthSettings=_export_sfc(_sfc_main$7,[["__scopeId","data-v-58e73a77"]]),_hoisted_1$6={class:"space-y-4 py-3"},_hoisted_2$4={class:"flex flex-col md:flex-row md:items-center"},_hoisted_3$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_4$4={class:"flex-1"},_hoisted_5$4={class:"flex flex-col md:flex-row md:items-start"},_hoisted_6$4={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$4={class:"flex-1"},_hoisted_8$4={class:"text-content-subtle mt-1 text-xs"},_hoisted_9$4={class:"flex flex-col md:flex-row md:items-start"},_hoisted_10$3={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_11$3={class:"flex-1"},_hoisted_12$3={class:"text-content-subtle mt-1 text-xs"},_hoisted_13$3={class:"flex flex-col md:flex-row md:items-start"},_hoisted_14$3={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_15$3={class:"flex-1"},_hoisted_16$3={class:"flex items-center gap-2"},_hoisted_17$3={class:"text-content-subtle mt-1 text-xs"},_hoisted_18$3={class:"flex flex-col md:flex-row md:items-start"},_hoisted_19$3={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_20$3={class:"flex-1"},_hoisted_21$1={class:"text-content-subtle mt-1 text-xs"},_hoisted_22$1={class:"flex flex-col md:flex-row md:items-center"},_hoisted_23$1={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_24$1={class:"flex-1"},_hoisted_25$1={class:"text-content-subtle mt-1 text-xs"},_hoisted_26$1={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_27$1={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_28$1={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_29$1={class:"flex gap-2"},_hoisted_30$1={href:"https://wiki.linux.do/Community/LinuxDoConnect",target:"_blank",class:"text-brand-400 hover:text-brand-300"},_hoisted_31$1={class:"flex gap-2"},_hoisted_32$1={class:"flex gap-2"},_hoisted_33$1={class:"flex-1"},_hoisted_34$1={class:"text-brand-400"},_hoisted_35$1={class:"mt-1 rounded bg-background-900 px-2 py-1 font-mono text-brand-300"},_hoisted_36$1={class:"mt-1 text-[11px] text-content-muted"},_hoisted_37$1={class:"flex gap-2"},_hoisted_38$1={class:"text-brand-400"},_hoisted_39$1={class:"text-brand-400"},_hoisted_40$1={class:"flex gap-2"},_sfc_main$6=defineComponent({__name:"LinuxdoOAuthSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({linuxdo_oauth_enabled:!1,linuxdo_oauth_client_id:"",linuxdo_oauth_client_secret:"",linuxdo_oauth_redirect_uri:"",linuxdo_oauth_scope:"user",linuxdo_oauth_proxy_enabled:!1}),getSettingsArray=()=>[{key:"linuxdo_oauth_enabled",value:localSettings.linuxdo_oauth_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.enabled")},{key:"linuxdo_oauth_client_id",value:localSettings.linuxdo_oauth_client_id,type:"string",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.clientId")},{key:"linuxdo_oauth_client_secret",value:localSettings.linuxdo_oauth_client_secret,type:"string",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.clientSecret")},{key:"linuxdo_oauth_redirect_uri",value:localSettings.linuxdo_oauth_redirect_uri,type:"string",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.redirectUri")},{key:"linuxdo_oauth_scope",value:"user",type:"string",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.scope")},{key:"linuxdo_oauth_proxy_enabled",value:localSettings.linuxdo_oauth_proxy_enabled,type:"boolean",group:"oauth",description:$t("admin.settings.oauth.linuxdo.desc.proxyEnabled")}],applySettings=settings=>{if(settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}}),!localSettings.linuxdo_oauth_redirect_uri){const baseUrl=window.location.origin;localSettings.linuxdo_oauth_redirect_uri=`${baseUrl}/auth`}localSettings.linuxdo_oauth_scope="user"},copyToClipboard=async text=>{try{await navigator.clipboard.writeText(text),toast.success($t("admin.settings.oauth.toast.copied"))}catch{toast.error($t("admin.settings.oauth.toast.copyFailed"))}};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput");return openBlock(),createElementBlock("div",_hoisted_1$6,[createBaseVNode("div",_hoisted_2$4,[createBaseVNode("label",_hoisted_3$4,[_cache[6]||(_cache[6]=createBaseVNode("i",{class:"fab fa-linux mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.enabled.labelFull")),1)]),createBaseVNode("div",_hoisted_4$4,[createVNode(_component_CyberSwitch,{modelValue:localSettings.linuxdo_oauth_enabled,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.linuxdo_oauth_enabled=$event)},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_5$4,[createBaseVNode("label",_hoisted_6$4,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-key mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.clientId.label")),1)]),createBaseVNode("div",_hoisted_7$4,[createVNode(_component_CyberInput,{modelValue:localSettings.linuxdo_oauth_client_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.linuxdo_oauth_client_id=$event),placeholder:unref($t)("admin.settings.oauth.linuxdo.clientId.placeholderFull"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_8$4,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.clientId.descriptionFull")),1)])]),createBaseVNode("div",_hoisted_9$4,[createBaseVNode("label",_hoisted_10$3,[_cache[8]||(_cache[8]=createBaseVNode("i",{class:"fas fa-lock mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.clientSecret.label")),1)]),createBaseVNode("div",_hoisted_11$3,[createVNode(_component_CyberInput,{modelValue:localSettings.linuxdo_oauth_client_secret,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.linuxdo_oauth_client_secret=$event),type:"password",placeholder:unref($t)("admin.settings.oauth.linuxdo.clientSecret.placeholderFull"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_12$3,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.clientSecret.descriptionFull")),1)])]),createBaseVNode("div",_hoisted_13$3,[createBaseVNode("label",_hoisted_14$3,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-link mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.callbackUrl.label")),1)]),createBaseVNode("div",_hoisted_15$3,[createBaseVNode("div",_hoisted_16$3,[createVNode(_component_CyberInput,{modelValue:localSettings.linuxdo_oauth_redirect_uri,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.linuxdo_oauth_redirect_uri=$event),placeholder:unref($t)("admin.settings.oauth.linuxdo.callbackUrl.placeholderSimple"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("button",{class:"rounded bg-background-700 px-3 py-2 text-sm text-content transition-colors hover:bg-background-600",onClick:_cache[4]||(_cache[4]=$event=>copyToClipboard(localSettings.linuxdo_oauth_redirect_uri))},[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-copy mr-1"},null,-1)),createTextVNode(toDisplayString(unref($t)("actions.copy")),1)])]),createBaseVNode("div",_hoisted_17$3,toDisplayString(unref($t)("admin.settings.oauth.common.callback.format")),1)])]),createBaseVNode("div",_hoisted_18$3,[createBaseVNode("label",_hoisted_19$3,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-shield-alt mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.scopes.label")),1)]),createBaseVNode("div",_hoisted_20$3,[_cache[12]||(_cache[12]=createBaseVNode("div",{class:"flex items-center gap-2"},[createBaseVNode("code",{class:"rounded bg-background-800 px-3 py-2 text-sm text-brand-400",style:{"font-family":"'Courier New', monospace"}}," user ")],-1)),createBaseVNode("div",_hoisted_21$1,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.scopes.fixed")),1)])]),_cache[20]||(_cache[20]=createBaseVNode("div",{class:"border-brand-500/20 my-4 border-t"},null,-1)),createBaseVNode("div",_hoisted_22$1,[createBaseVNode("label",_hoisted_23$1,[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-network-wired mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.common.proxy.label")),1)]),createBaseVNode("div",_hoisted_24$1,[createVNode(_component_CyberSwitch,{modelValue:localSettings.linuxdo_oauth_proxy_enabled,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.linuxdo_oauth_proxy_enabled=$event)},null,8,["modelValue"]),createBaseVNode("div",_hoisted_25$1,toDisplayString(unref($t)("admin.settings.oauth.common.proxy.linuxdoDescription")),1)])]),createBaseVNode("div",_hoisted_26$1,[createBaseVNode("div",_hoisted_27$1,[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.common.setup.title")),1)]),createBaseVNode("ol",_hoisted_28$1,[createBaseVNode("li",_hoisted_29$1,[_cache[15]||(_cache[15]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step1"))+" ",1),createBaseVNode("a",_hoisted_30$1,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step1Link")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step1Suffix")),1)])]),createBaseVNode("li",_hoisted_31$1,[_cache[16]||(_cache[16]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step2")),1)]),createBaseVNode("li",_hoisted_32$1,[_cache[17]||(_cache[17]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("div",_hoisted_33$1,[createBaseVNode("div",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step3"))+" ",1),createBaseVNode("span",_hoisted_34$1,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step3Field")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step3Suffix")),1)]),createBaseVNode("div",_hoisted_35$1,toDisplayString(unref($t)("admin.settings.oauth.common.callback.exampleUrl")),1),createBaseVNode("div",_hoisted_36$1,toDisplayString(unref($t)("admin.settings.oauth.common.callback.examplePrefix")),1)])]),createBaseVNode("li",_hoisted_37$1,[_cache[18]||(_cache[18]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step4"))+" ",1),createBaseVNode("span",_hoisted_38$1,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step4Field1")),1),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step4And"))+" ",1),createBaseVNode("span",_hoisted_39$1,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step4Field2")),1),createTextVNode(toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step4Suffix")),1)])]),createBaseVNode("li",_hoisted_40$1,[_cache[19]||(_cache[19]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.oauth.linuxdo.setup.step5")),1)])])])])}}});const LinuxdoOAuthSettings=_export_sfc(_sfc_main$6,[["__scopeId","data-v-b5b55e99"]]),_hoisted_1$5={class:"space-y-4 py-3"},_hoisted_2$3={class:"border-brand-500/20 bg-background-800/50 rounded-lg border p-3"},_hoisted_3$3={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_4$3={class:"text-content-subtle text-xs"},_hoisted_5$3={class:"flex flex-col md:flex-row md:items-center"},_hoisted_6$3={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$3={class:"flex-1"},_hoisted_8$3={class:"text-content-subtle mt-1 text-xs"},_hoisted_9$3={key:0,class:"flex flex-col md:flex-row md:items-start"},_hoisted_10$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_11$2={class:"flex-1"},_hoisted_12$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_13$2={key:1,class:"flex flex-col md:flex-row md:items-start"},_hoisted_14$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_15$2={class:"flex-1"},_hoisted_16$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_17$2={key:2,class:"flex flex-col md:flex-row md:items-start"},_hoisted_18$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_19$2={class:"flex-1"},_hoisted_20$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_21={key:3,class:"flex flex-col md:flex-row md:items-start"},_hoisted_22={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_23={class:"flex-1"},_hoisted_24={class:"text-content-subtle mt-1 text-xs"},_hoisted_25={class:"flex flex-col md:flex-row md:items-start"},_hoisted_26={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_27={class:"flex-1"},_hoisted_28={class:"text-content-subtle mt-1 text-xs"},_hoisted_29={class:"flex flex-col md:flex-row md:items-start"},_hoisted_30={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_31={class:"flex-1"},_hoisted_32={class:"text-content-subtle mt-1 text-xs"},_hoisted_33={class:"flex flex-col md:flex-row md:items-start"},_hoisted_34={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_35={class:"flex-1"},_hoisted_36={class:"text-content-subtle mt-1 text-xs"},_hoisted_37={key:0,class:"mt-2 flex items-center gap-2 text-xs"},_hoisted_38={key:0,class:"fas fa-check-circle text-success"},_hoisted_39={key:1,class:"fas fa-times-circle text-error-500"},_hoisted_40={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_41={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_42={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_43={class:"flex gap-2"},_hoisted_44=["innerHTML"],_hoisted_45={class:"flex gap-2"},_hoisted_46=["innerHTML"],_hoisted_47={class:"flex gap-2"},_hoisted_48={class:"flex gap-2"},_hoisted_49={class:"flex gap-2"},_sfc_main$5=defineComponent({__name:"ProxySettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),R=getValidationRules($t),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({oauth_proxy_dynamic:!1,oauth_proxy_api_url:"",oauth_proxy_type:"http",oauth_proxy_host:"",oauth_proxy_port:"",oauth_proxy_username:"",oauth_proxy_password:""}),proxyTypeOptions=[{value:"http",label:"HTTP"},{value:"https",label:"HTTPS"},{value:"socks5",label:"SOCKS5"}],isTesting=ref(!1),testResult=ref(null),getSettingsArray=()=>[{key:"oauth_proxy_dynamic",value:localSettings.oauth_proxy_dynamic,type:"boolean",group:"oauth",description:$t("admin.settings.proxy.desc.dynamic")},{key:"oauth_proxy_api_url",value:localSettings.oauth_proxy_api_url,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.apiUrl")},{key:"oauth_proxy_type",value:localSettings.oauth_proxy_type,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.type")},{key:"oauth_proxy_host",value:localSettings.oauth_proxy_host,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.host")},{key:"oauth_proxy_port",value:localSettings.oauth_proxy_port,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.port")},{key:"oauth_proxy_username",value:localSettings.oauth_proxy_username,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.username")},{key:"oauth_proxy_password",value:localSettings.oauth_proxy_password,type:"string",group:"oauth",description:$t("admin.settings.proxy.desc.password")}],applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}})},handleTestProxy=async()=>{if(localSettings.oauth_proxy_dynamic){if(!Validator.validate(localSettings.oauth_proxy_api_url||"",[R.required],$t).valid)return toast.error($t("admin.settings.proxy.toast.apiUrlRequired"));const userCheck=Validator.validate(localSettings.oauth_proxy_username||"",[R.required],$t),passCheck=Validator.validate(localSettings.oauth_proxy_password||"",[R.required],$t);if(!userCheck.valid||!passCheck.valid)return toast.error($t("admin.settings.proxy.toast.credentialsRequired"))}else{const hostCheck=Validator.validate(localSettings.oauth_proxy_host||"",[R.required],$t),portCheck=Validator.validate(localSettings.oauth_proxy_port||"",[R.required],$t);if(!hostCheck.valid||!portCheck.valid)return toast.error($t("admin.settings.proxy.toast.hostPortRequired"))}isTesting.value=!0,testResult.value=null;try{const result=await testProxy({proxy_dynamic:localSettings.oauth_proxy_dynamic,proxy_api_url:localSettings.oauth_proxy_api_url||void 0,proxy_type:localSettings.oauth_proxy_type,proxy_host:localSettings.oauth_proxy_host,proxy_port:localSettings.oauth_proxy_port,proxy_username:localSettings.oauth_proxy_username||void 0,proxy_password:localSettings.oauth_proxy_password||void 0});result.success&&result.data?(testResult.value={success:result.data.success,message:result.data.message},result.data.success?result.data.latency?toast.success($t("admin.settings.proxy.toast.testSuccessWithLatency").replace("{latency}",result.data.latency.toString())):toast.success($t("admin.settings.proxy.toast.testSuccess")):toast.error($t("admin.settings.proxy.toast.testFailed").replace("{message}",result.data.message))):(testResult.value={success:!1,message:result.message||$t("admin.settings.proxy.toast.testRequestFailed")},toast.error(result.message||$t("admin.settings.proxy.toast.testRequestFailed")))}catch(error){const errorMsg=error?.response?.data?.message||error?.message||$t("admin.settings.proxy.toast.networkRequestFailed");testResult.value={success:!1,message:errorMsg},toast.error($t("admin.settings.proxy.toast.testError").replace("{message}",errorMsg))}finally{isTesting.value=!1}};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput"),_component_CyberDropdown=resolveComponent("CyberDropdown"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$5,[createBaseVNode("div",_hoisted_2$3,[createBaseVNode("div",_hoisted_3$3,[_cache[7]||(_cache[7]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.proxy.info.title")),1)]),createBaseVNode("p",_hoisted_4$3,[createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.info.desc1"))+" ",1),_cache[8]||(_cache[8]=createBaseVNode("br",null,null,-1)),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.proxy.info.desc2")),1)])]),createBaseVNode("div",_hoisted_5$3,[createBaseVNode("label",_hoisted_6$3,[_cache[9]||(_cache[9]=createBaseVNode("i",{class:"fas fa-sync-alt mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.dynamic.label")),1)]),createBaseVNode("div",_hoisted_7$3,[createVNode(_component_CyberSwitch,{modelValue:localSettings.oauth_proxy_dynamic,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.oauth_proxy_dynamic=$event)},null,8,["modelValue"]),createBaseVNode("div",_hoisted_8$3,toDisplayString(unref($t)("admin.settings.proxy.dynamic.hint")),1)])]),localSettings.oauth_proxy_dynamic?(openBlock(),createElementBlock("div",_hoisted_9$3,[createBaseVNode("label",_hoisted_10$2,[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-link mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.apiUrl.label")),1)]),createBaseVNode("div",_hoisted_11$2,[createVNode(_component_CyberInput,{modelValue:localSettings.oauth_proxy_api_url,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.oauth_proxy_api_url=$event),placeholder:unref($t)("admin.settings.proxy.apiUrl.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_12$2,toDisplayString(unref($t)("admin.settings.proxy.apiUrl.hint")),1)])])):createCommentVNode("",!0),localSettings.oauth_proxy_dynamic?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_13$2,[createBaseVNode("label",_hoisted_14$2,[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-layer-group mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.type.label")),1)]),createBaseVNode("div",_hoisted_15$2,[createVNode(_component_CyberDropdown,{modelValue:localSettings.oauth_proxy_type,"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>localSettings.oauth_proxy_type=$event),options:proxyTypeOptions,placeholder:unref($t)("admin.settings.proxy.type.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_16$2,toDisplayString(unref($t)("admin.settings.proxy.type.hint")),1)])])),localSettings.oauth_proxy_dynamic?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_17$2,[createBaseVNode("label",_hoisted_18$2,[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-server mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.host.label")),1)]),createBaseVNode("div",_hoisted_19$2,[createVNode(_component_CyberInput,{modelValue:localSettings.oauth_proxy_host,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>localSettings.oauth_proxy_host=$event),placeholder:unref($t)("admin.settings.proxy.host.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_20$2,toDisplayString(unref($t)("admin.settings.proxy.host.hint")),1)])])),localSettings.oauth_proxy_dynamic?createCommentVNode("",!0):(openBlock(),createElementBlock("div",_hoisted_21,[createBaseVNode("label",_hoisted_22,[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-plug mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.port.label")),1)]),createBaseVNode("div",_hoisted_23,[createVNode(_component_CyberInput,{modelValue:localSettings.oauth_proxy_port,"onUpdate:modelValue":_cache[4]||(_cache[4]=$event=>localSettings.oauth_proxy_port=$event),placeholder:unref($t)("admin.settings.proxy.port.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_24,toDisplayString(unref($t)("admin.settings.proxy.port.hint")),1)])])),createBaseVNode("div",_hoisted_25,[createBaseVNode("label",_hoisted_26,[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-user mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.username.label")),1)]),createBaseVNode("div",_hoisted_27,[createVNode(_component_CyberInput,{modelValue:localSettings.oauth_proxy_username,"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>localSettings.oauth_proxy_username=$event),placeholder:unref($t)("admin.settings.proxy.username.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_28,toDisplayString(unref($t)("admin.settings.proxy.username.hint")),1)])]),createBaseVNode("div",_hoisted_29,[createBaseVNode("label",_hoisted_30,[_cache[15]||(_cache[15]=createBaseVNode("i",{class:"fas fa-key mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.password.label")),1)]),createBaseVNode("div",_hoisted_31,[createVNode(_component_CyberInput,{modelValue:localSettings.oauth_proxy_password,"onUpdate:modelValue":_cache[6]||(_cache[6]=$event=>localSettings.oauth_proxy_password=$event),type:"password",placeholder:unref($t)("admin.settings.proxy.password.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createBaseVNode("div",_hoisted_32,toDisplayString(unref($t)("admin.settings.proxy.password.hint")),1)])]),createBaseVNode("div",_hoisted_33,[createBaseVNode("label",_hoisted_34,[_cache[16]||(_cache[16]=createBaseVNode("i",{class:"fas fa-vial mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.proxy.test.label")),1)]),createBaseVNode("div",_hoisted_35,[createVNode(_component_CyberButton,{type:"primary",icon:"flask",loading:isTesting.value,disabled:isTesting.value,onClick:handleTestProxy},{default:withCtx(()=>[createTextVNode(toDisplayString(isTesting.value?unref($t)("admin.settings.proxy.test.testing"):unref($t)("admin.settings.proxy.test.button")),1)]),_:1},8,["loading","disabled"]),createBaseVNode("div",_hoisted_36,toDisplayString(unref($t)("admin.settings.proxy.test.hint")),1),testResult.value&&!isTesting.value?(openBlock(),createElementBlock("div",_hoisted_37,[testResult.value.success?(openBlock(),createElementBlock("i",_hoisted_38)):(openBlock(),createElementBlock("i",_hoisted_39)),createBaseVNode("span",{class:normalizeClass(testResult.value.success?"text-success":"text-error-500")},toDisplayString(testResult.value.message),3)])):createCommentVNode("",!0)])]),createBaseVNode("div",_hoisted_40,[createBaseVNode("div",_hoisted_41,[_cache[17]||(_cache[17]=createBaseVNode("i",{class:"fas fa-book mr-1 text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.proxy.guide.title")),1)]),createBaseVNode("ol",_hoisted_42,[createBaseVNode("li",_hoisted_43,[_cache[18]||(_cache[18]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",{innerHTML:unref($t)("admin.settings.proxy.guide.step1")},null,8,_hoisted_44)]),createBaseVNode("li",_hoisted_45,[_cache[19]||(_cache[19]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",{innerHTML:unref($t)("admin.settings.proxy.guide.step2")},null,8,_hoisted_46)]),createBaseVNode("li",_hoisted_47,[_cache[20]||(_cache[20]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.proxy.guide.step3")),1)]),createBaseVNode("li",_hoisted_48,[_cache[21]||(_cache[21]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.proxy.guide.step4")),1)]),createBaseVNode("li",_hoisted_49,[_cache[22]||(_cache[22]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.proxy.guide.step5")),1)])])])])}}});const ProxySettings=_export_sfc(_sfc_main$5,[["__scopeId","data-v-bcb16f03"]]),_hoisted_1$4={class:"oauth-settings"},_sfc_main$4=defineComponent({__name:"OAuthSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,activeTab=ref("github"),githubSettings=ref([]),googleSettings=ref([]),proxySettings=ref([]),linuxdoSettings=ref([]),filterSettingsByProvider=(settings,provider)=>provider==="proxy"?settings.filter(s=>s.key.startsWith("oauth_proxy_")):settings.filter(s=>s.key.startsWith(`${provider}_oauth_`)),applySettings=settings=>{githubSettings.value=filterSettingsByProvider(settings,"github"),googleSettings.value=filterSettingsByProvider(settings,"google"),proxySettings.value=filterSettingsByProvider(settings,"proxy"),linuxdoSettings.value=filterSettingsByProvider(settings,"linuxdo")},handleGithubUpdate=settings=>{githubSettings.value=settings,emitAllSettings()},handleGoogleUpdate=settings=>{googleSettings.value=settings,emitAllSettings()},handleProxyUpdate=settings=>{proxySettings.value=settings,emitAllSettings()},handleLinuxdoUpdate=settings=>{linuxdoSettings.value=settings,emitAllSettings()},emitAllSettings=()=>{const allSettings=[...githubSettings.value,...googleSettings.value,...proxySettings.value,...linuxdoSettings.value];emit("update",allSettings)};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberTabPane=__unplugin_components_0,_component_CyberTabs=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$4,[createVNode(_component_CyberTabs,{modelValue:activeTab.value,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>activeTab.value=$event)},{default:withCtx(()=>[createVNode(_component_CyberTabPane,{name:"github",label:"GitHub"},{default:withCtx(()=>[createVNode(GithubOAuthSettings,{settings:githubSettings.value,onUpdate:handleGithubUpdate},null,8,["settings"])]),_:1}),createVNode(_component_CyberTabPane,{name:"google",label:"Google"},{default:withCtx(()=>[createVNode(GoogleOAuthSettings,{settings:googleSettings.value,onUpdate:handleGoogleUpdate},null,8,["settings"])]),_:1}),createVNode(_component_CyberTabPane,{name:"linuxdo",label:"Linux.DO"},{default:withCtx(()=>[createVNode(LinuxdoOAuthSettings,{settings:linuxdoSettings.value,onUpdate:handleLinuxdoUpdate},null,8,["settings"])]),_:1}),createVNode(_component_CyberTabPane,{name:"proxy",label:unref($t)("admin.settings.oauth.proxyConfig")},{default:withCtx(()=>[createVNode(ProxySettings,{settings:proxySettings.value,onUpdate:handleProxyUpdate},null,8,["settings"])]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}});const OAuthSettings=_export_sfc(_sfc_main$4,[["__scopeId","data-v-722bdc0b"]]),_hoisted_1$3={class:"space-y-4 py-3"},_hoisted_2$2={class:"flex flex-col md:flex-row md:items-center"},_hoisted_3$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_4$2={class:"flex-1"},_hoisted_5$2={class:"flex flex-col md:flex-row md:items-start"},_hoisted_6$2={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$2={class:"flex-1"},_hoisted_8$2={class:"flex gap-2"},_hoisted_9$2={class:"text-content-subtle mt-1 text-xs"},_hoisted_10$1={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_11$1={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_12$1={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_13$1={class:"flex gap-2"},_hoisted_14$1={href:"https://tongji.baidu.com",target:"_blank",class:"text-brand-400 hover:text-brand-300"},_hoisted_15$1={class:"flex gap-2"},_hoisted_16$1={class:"flex gap-2"},_hoisted_17$1={class:"flex-1"},_hoisted_18$1={class:"mt-1 text-[11px] text-content-muted"},_hoisted_19$1={class:"flex gap-2"},_hoisted_20$1={class:"flex gap-2"},_sfc_main$3=defineComponent({__name:"BaiduAnalyticsSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({baidu_analytics_enabled:!1,baidu_analytics_site_id:""}),getSettingsArray=()=>[{key:"baidu_analytics_enabled",value:localSettings.baidu_analytics_enabled,type:"boolean",group:"analytics",description:$t("admin.settings.analytics.baidu.desc.enabled")},{key:"baidu_analytics_site_id",value:localSettings.baidu_analytics_site_id,type:"string",group:"analytics",description:$t("admin.settings.analytics.baidu.desc.siteId")}],applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}})},checkStatus=()=>{const status=checkBaiduAnalytics();status.scriptLoaded&&status.initialized?toast.success($t("admin.settings.analytics.baidu.status.success",{siteId:status.siteId||"unknown"})):status.initialized&&!status.scriptLoaded?toast.warning($t("admin.settings.analytics.baidu.status.loading")):toast.error($t("admin.settings.analytics.baidu.status.notInitialized"))};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$3,[createBaseVNode("div",_hoisted_2$2,[createBaseVNode("label",_hoisted_3$2,[_cache[2]||(_cache[2]=createBaseVNode("i",{class:"fas fa-chart-bar mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.baidu.enabled.label")),1)]),createBaseVNode("div",_hoisted_4$2,[createVNode(_component_CyberSwitch,{modelValue:localSettings.baidu_analytics_enabled,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.baidu_analytics_enabled=$event)},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_5$2,[createBaseVNode("label",_hoisted_6$2,[_cache[3]||(_cache[3]=createBaseVNode("i",{class:"fas fa-id-card mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.baidu.siteId.label")),1)]),createBaseVNode("div",_hoisted_7$2,[createBaseVNode("div",_hoisted_8$2,[createVNode(_component_CyberInput,{modelValue:localSettings.baidu_analytics_site_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.baidu_analytics_site_id=$event),placeholder:unref($t)("admin.settings.analytics.baidu.siteId.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{size:"small",variant:"secondary",onClick:checkStatus},{default:withCtx(()=>[_cache[4]||(_cache[4]=createBaseVNode("i",{class:"fas fa-check-circle mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.analytics.baidu.checkStatus")),1)]),_:1})]),createBaseVNode("div",_hoisted_9$2,toDisplayString(unref($t)("admin.settings.analytics.baidu.siteId.description")),1)])]),createBaseVNode("div",_hoisted_10$1,[createBaseVNode("div",_hoisted_11$1,[_cache[5]||(_cache[5]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.title")),1)]),createBaseVNode("ol",_hoisted_12$1,[createBaseVNode("li",_hoisted_13$1,[_cache[6]||(_cache[6]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step1"))+" ",1),createBaseVNode("a",_hoisted_14$1,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step1Link")),1)])]),createBaseVNode("li",_hoisted_15$1,[_cache[7]||(_cache[7]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step2")),1)]),createBaseVNode("li",_hoisted_16$1,[_cache[9]||(_cache[9]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("div",_hoisted_17$1,[createBaseVNode("div",null,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step3")),1),_cache[8]||(_cache[8]=createBaseVNode("div",{class:"mt-1 rounded bg-background-900 px-2 py-1 font-mono text-brand-300"},[createTextVNode(" hm.js?"),createBaseVNode("span",{class:"text-error-400"},"xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx")],-1)),createBaseVNode("div",_hoisted_18$1,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step3Hint")),1)])]),createBaseVNode("li",_hoisted_19$1,[_cache[10]||(_cache[10]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step4")),1)]),createBaseVNode("li",_hoisted_20$1,[_cache[11]||(_cache[11]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.baidu.setup.step5")),1)])])])])}}});const BaiduAnalyticsSettings=_export_sfc(_sfc_main$3,[["__scopeId","data-v-13e1e667"]]),_hoisted_1$2={class:"space-y-4 py-3"},_hoisted_2$1={class:"flex flex-col md:flex-row md:items-center"},_hoisted_3$1={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_4$1={class:"flex-1"},_hoisted_5$1={class:"flex flex-col md:flex-row md:items-start"},_hoisted_6$1={class:"flex w-full items-center text-sm text-content md:w-48 md:py-2"},_hoisted_7$1={class:"flex-1"},_hoisted_8$1={class:"flex gap-2"},_hoisted_9$1={class:"text-content-subtle mt-1 text-xs"},_hoisted_10={class:"border-brand-500/20 bg-background-800/50 mt-4 rounded-lg border p-3"},_hoisted_11={class:"mb-2 flex items-center gap-2 text-xs font-medium text-brand-400"},_hoisted_12={class:"text-content-subtle space-y-1.5 text-xs"},_hoisted_13={class:"flex gap-2"},_hoisted_14={href:"https://analytics.google.com",target:"_blank",class:"text-brand-400 hover:text-brand-300"},_hoisted_15={class:"flex gap-2"},_hoisted_16={class:"flex gap-2"},_hoisted_17={class:"flex-1"},_hoisted_18={class:"mt-1 text-[11px] text-content-muted"},_hoisted_19={class:"flex gap-2"},_hoisted_20={class:"flex gap-2"},_sfc_main$2=defineComponent({__name:"GoogleAnalyticsSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,toast=useToast(),localSettings=reactive({google_analytics_enabled:!1,google_analytics_measurement_id:""}),getSettingsArray=()=>[{key:"google_analytics_enabled",value:localSettings.google_analytics_enabled,type:"boolean",group:"analytics",description:$t("admin.settings.analytics.google.desc.enabled")},{key:"google_analytics_measurement_id",value:localSettings.google_analytics_measurement_id,type:"string",group:"analytics",description:$t("admin.settings.analytics.google.desc.measurementId")}],applySettings=settings=>{settings.forEach(setting=>{const key=setting.key;if(key in localSettings){const settingsRecord=localSettings;setting.type==="boolean"?settingsRecord[key]=setting.value===!0||setting.value==="true":settingsRecord[key]=setting.value}})},checkStatus=()=>{const status=checkGoogleAnalytics();status.scriptLoaded&&status.initialized?toast.success($t("admin.settings.analytics.google.status.success",{measurementId:status.measurementId||"unknown"})):status.initialized&&!status.scriptLoaded?toast.warning($t("admin.settings.analytics.google.status.loading")):toast.error($t("admin.settings.analytics.google.status.notInitialized"))};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),watch(localSettings,()=>{emit("update",getSettingsArray())},{deep:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberSwitch=resolveComponent("CyberSwitch"),_component_CyberInput=resolveComponent("CyberInput"),_component_CyberButton=resolveComponent("CyberButton");return openBlock(),createElementBlock("div",_hoisted_1$2,[createBaseVNode("div",_hoisted_2$1,[createBaseVNode("label",_hoisted_3$1,[_cache[2]||(_cache[2]=createBaseVNode("i",{class:"fas fa-chart-line mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.google.enabled.label")),1)]),createBaseVNode("div",_hoisted_4$1,[createVNode(_component_CyberSwitch,{modelValue:localSettings.google_analytics_enabled,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>localSettings.google_analytics_enabled=$event)},null,8,["modelValue"])])]),createBaseVNode("div",_hoisted_5$1,[createBaseVNode("label",_hoisted_6$1,[_cache[3]||(_cache[3]=createBaseVNode("i",{class:"fas fa-fingerprint mr-2 text-brand-500"},null,-1)),createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.google.measurementId.label")),1)]),createBaseVNode("div",_hoisted_7$1,[createBaseVNode("div",_hoisted_8$1,[createVNode(_component_CyberInput,{modelValue:localSettings.google_analytics_measurement_id,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>localSettings.google_analytics_measurement_id=$event),placeholder:unref($t)("admin.settings.analytics.google.measurementId.placeholder"),width:"500px"},null,8,["modelValue","placeholder"]),createVNode(_component_CyberButton,{size:"small",variant:"secondary",onClick:checkStatus},{default:withCtx(()=>[_cache[4]||(_cache[4]=createBaseVNode("i",{class:"fas fa-check-circle mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.analytics.google.checkStatus")),1)]),_:1})]),createBaseVNode("div",_hoisted_9$1,toDisplayString(unref($t)("admin.settings.analytics.google.measurementId.description")),1)])]),createBaseVNode("div",_hoisted_10,[createBaseVNode("div",_hoisted_11,[_cache[5]||(_cache[5]=createBaseVNode("i",{class:"fas fa-info-circle text-xs"},null,-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.google.setup.title")),1)]),createBaseVNode("ol",_hoisted_12,[createBaseVNode("li",_hoisted_13,[_cache[6]||(_cache[6]=createBaseVNode("span",{class:"text-brand-500"},"1.",-1)),createBaseVNode("span",null,[createTextVNode(toDisplayString(unref($t)("admin.settings.analytics.google.setup.step1"))+" ",1),createBaseVNode("a",_hoisted_14,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step1Link")),1)])]),createBaseVNode("li",_hoisted_15,[_cache[7]||(_cache[7]=createBaseVNode("span",{class:"text-brand-500"},"2.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step2")),1)]),createBaseVNode("li",_hoisted_16,[_cache[9]||(_cache[9]=createBaseVNode("span",{class:"text-brand-500"},"3.",-1)),createBaseVNode("div",_hoisted_17,[createBaseVNode("div",null,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step3")),1),_cache[8]||(_cache[8]=createBaseVNode("div",{class:"mt-1 rounded bg-background-900 px-2 py-1 font-mono text-brand-300"},[createBaseVNode("span",{class:"text-error-400"},"G-XXXXXXXXXX")],-1)),createBaseVNode("div",_hoisted_18,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step3Hint")),1)])]),createBaseVNode("li",_hoisted_19,[_cache[10]||(_cache[10]=createBaseVNode("span",{class:"text-brand-500"},"4.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step4")),1)]),createBaseVNode("li",_hoisted_20,[_cache[11]||(_cache[11]=createBaseVNode("span",{class:"text-brand-500"},"5.",-1)),createBaseVNode("span",null,toDisplayString(unref($t)("admin.settings.analytics.google.setup.step5")),1)])])])])}}});const GoogleAnalyticsSettings=_export_sfc(_sfc_main$2,[["__scopeId","data-v-dbaecb4e"]]),_hoisted_1$1={class:"analytics-settings"},_sfc_main$1=defineComponent({__name:"AnalyticsSettings",props:{settings:{}},emits:["update"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,activeTab=ref("baidu"),baiduSettings=ref([]),googleSettings=ref([]),filterSettingsByProvider=(settings,provider)=>settings.filter(s=>s.key.startsWith(`${provider}_analytics_`)),applySettings=settings=>{baiduSettings.value=filterSettingsByProvider(settings,"baidu"),googleSettings.value=filterSettingsByProvider(settings,"google")},handleBaiduUpdate=settings=>{baiduSettings.value=settings,emitAllSettings()},handleGoogleUpdate=settings=>{googleSettings.value=settings,emitAllSettings()},emitAllSettings=()=>{const allSettings=[...baiduSettings.value,...googleSettings.value];emit("update",allSettings)};return watch(()=>props.settings,newSettings=>{newSettings&&newSettings.length>0&&applySettings(newSettings)},{deep:!0,immediate:!0}),onMounted(()=>{props.settings&&props.settings.length>0&&applySettings(props.settings)}),(_ctx,_cache)=>{const _component_CyberTabPane=__unplugin_components_0,_component_CyberTabs=__unplugin_components_1;return openBlock(),createElementBlock("div",_hoisted_1$1,[createVNode(_component_CyberTabs,{modelValue:activeTab.value,"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>activeTab.value=$event)},{default:withCtx(()=>[createVNode(_component_CyberTabPane,{name:"baidu",label:unref($t)("admin.settings.analytics.baidu.title")},{default:withCtx(()=>[createVNode(BaiduAnalyticsSettings,{settings:baiduSettings.value,onUpdate:handleBaiduUpdate},null,8,["settings"])]),_:1},8,["label"]),createVNode(_component_CyberTabPane,{name:"google",label:unref($t)("admin.settings.analytics.google.title")},{default:withCtx(()=>[createVNode(GoogleAnalyticsSettings,{settings:googleSettings.value,onUpdate:handleGoogleUpdate},null,8,["settings"])]),_:1},8,["label"])]),_:1},8,["modelValue"])])}}});const AnalyticsSettings=_export_sfc(_sfc_main$1,[["__scopeId","data-v-be81376f"]]),_hoisted_1={class:"admin-settings-page admin-page-container"},_hoisted_2={class:"settings-section animate-fade-in"},_hoisted_3={class:"settings-section animate-fade-in"},_hoisted_4={class:"settings-section animate-fade-in"},_hoisted_5={class:"settings-section animate-fade-in"},_hoisted_6={class:"settings-section animate-fade-in"},_hoisted_7={class:"settings-section animate-fade-in"},_hoisted_8={class:"settings-section animate-fade-in"},_hoisted_9={class:"settings-section animate-fade-in"},_sfc_main=defineComponent({__name:"index",setup(__props){const toast=useToast(),route=useRoute(),router=useRouter(),{$t}=useTexts(),isLoading=ref(!1),isSaving=ref(!1),tabs=computed(()=>[{key:"website",name:$t("admin.settings.tabs.website"),icon:"fas fa-globe"},{key:"registration",name:$t("admin.settings.tabs.registration"),icon:"fas fa-user-plus"},{key:"mail",name:$t("admin.settings.tabs.mail"),icon:"fas fa-envelope"},{key:"upload",name:$t("admin.settings.tabs.upload"),icon:"fas fa-upload"},{key:"security",name:$t("admin.settings.tabs.security"),icon:"fas fa-shield-alt"},{key:"guest",name:$t("admin.settings.tabs.guest"),icon:"fas fa-user-secret"},{key:"oauth",name:$t("admin.settings.tabs.oauth"),icon:"fas fa-plug"},{key:"analytics",name:$t("admin.settings.tabs.analytics"),icon:"fas fa-chart-line"}]),activeTab=ref(route.query.tab?.toString()||"website"),updateActiveTab=tabId=>{activeTab.value=tabId,router.push({name:route.name,query:{...route.query,tab:tabId}})},websiteSettings=ref([]),registrationSettings=ref([]),mailSettings=ref([]),securitySettings=ref([]),uploadSettings=ref([]),guestSettings=ref([]),oauthSettings=ref([]),analyticsSettings=ref([]),modifiedWebsiteSettings=ref([]),modifiedRegistrationSettings=ref([]),modifiedMailSettings=ref([]),modifiedSecuritySettings=ref([]),modifiedUploadSettings=ref([]),modifiedGuestSettings=ref([]),modifiedOAuthSettings=ref([]),modifiedAnalyticsSettings=ref([]),handleWebsiteSettingsUpdate=updatedSettings=>{modifiedWebsiteSettings.value=updatedSettings},handleRegistrationSettingsUpdate=updatedSettings=>{modifiedRegistrationSettings.value=updatedSettings},handleMailSettingsUpdate=updatedSettings=>{modifiedMailSettings.value=updatedSettings},handleSecuritySettingsUpdate=updatedSettings=>{modifiedSecuritySettings.value=updatedSettings},handleUploadSettingsUpdate=updatedSettings=>{modifiedUploadSettings.value=updatedSettings},handleGuestSettingsUpdate=updatedSettings=>{modifiedGuestSettings.value=updatedSettings},handleOAuthSettingsUpdate=updatedSettings=>{modifiedOAuthSettings.value=updatedSettings},handleAnalyticsSettingsUpdate=updatedSettings=>{modifiedAnalyticsSettings.value=updatedSettings},resetSettings=async()=>{isLoading.value=!0,await loadSettingsForTab(activeTab.value),activeTab.value==="website"?modifiedWebsiteSettings.value=[]:activeTab.value==="registration"?modifiedRegistrationSettings.value=[]:activeTab.value==="mail"?modifiedMailSettings.value=[]:activeTab.value==="security"?modifiedSecuritySettings.value=[]:activeTab.value==="upload"?modifiedUploadSettings.value=[]:activeTab.value==="guest"?modifiedGuestSettings.value=[]:activeTab.value==="oauth"?modifiedOAuthSettings.value=[]:activeTab.value==="analytics"&&(modifiedAnalyticsSettings.value=[]),toast.success($t("admin.settings.toast.reset")),isLoading.value=!1},saveSettings=async()=>{let settingsToUpdate=[];if(activeTab.value==="website"&&modifiedWebsiteSettings.value.length>0?settingsToUpdate=modifiedWebsiteSettings.value:activeTab.value==="registration"&&modifiedRegistrationSettings.value.length>0?settingsToUpdate=modifiedRegistrationSettings.value:activeTab.value==="mail"&&modifiedMailSettings.value.length>0?settingsToUpdate=modifiedMailSettings.value:activeTab.value==="security"&&modifiedSecuritySettings.value.length>0?settingsToUpdate=modifiedSecuritySettings.value:activeTab.value==="upload"&&modifiedUploadSettings.value.length>0?settingsToUpdate=modifiedUploadSettings.value:activeTab.value==="guest"&&modifiedGuestSettings.value.length>0?settingsToUpdate=modifiedGuestSettings.value:activeTab.value==="oauth"&&modifiedOAuthSettings.value.length>0?settingsToUpdate=modifiedOAuthSettings.value:activeTab.value==="analytics"&&modifiedAnalyticsSettings.value.length>0&&(settingsToUpdate=modifiedAnalyticsSettings.value),settingsToUpdate.length===0){toast.info($t("admin.settings.toast.noChanges"));return}try{isSaving.value=!0,(await batchUpsertSettings(settingsToUpdate)).success&&(activeTab.value==="website"?modifiedWebsiteSettings.value=[]:activeTab.value==="registration"?modifiedRegistrationSettings.value=[]:activeTab.value==="mail"?modifiedMailSettings.value=[]:activeTab.value==="security"?modifiedSecuritySettings.value=[]:activeTab.value==="upload"?modifiedUploadSettings.value=[]:activeTab.value==="guest"?modifiedGuestSettings.value=[]:activeTab.value==="oauth"?modifiedOAuthSettings.value=[]:activeTab.value==="analytics"&&(modifiedAnalyticsSettings.value=[]),toast.success($t("admin.settings.toast.saved")),await loadSettingsForTab(activeTab.value))}catch(error){toast.error(error.message)}finally{isSaving.value=!1}},loadSettingsForTab=async tabId=>{isLoading.value=!0;try{const result=await getSettings({group:tabId}),settings=result.success?result.data?.settings||[]:[];settings.length===0?tabId==="website"?websiteSettings.value=defaultSettings.website||[]:tabId==="registration"?registrationSettings.value=defaultSettings.registration||[]:tabId==="mail"?mailSettings.value=defaultSettings.mail||[]:tabId==="security"?securitySettings.value=defaultSettings.security||[]:tabId==="upload"?uploadSettings.value=defaultSettings.upload||[]:tabId==="guest"?guestSettings.value=defaultSettings.guest||[]:tabId==="oauth"?oauthSettings.value=[]:tabId==="analytics"&&(analyticsSettings.value=[]):tabId==="website"?websiteSettings.value=settings:tabId==="registration"?registrationSettings.value=settings:tabId==="mail"?mailSettings.value=settings:tabId==="security"?securitySettings.value=settings:tabId==="upload"?uploadSettings.value=settings:tabId==="guest"?guestSettings.value=settings:tabId==="oauth"?oauthSettings.value=settings:tabId==="analytics"&&(analyticsSettings.value=settings)}catch(error){tabId==="website"?websiteSettings.value=defaultSettings.website||[]:tabId==="registration"?registrationSettings.value=defaultSettings.registration||[]:tabId==="mail"?mailSettings.value=defaultSettings.mail||[]:tabId==="security"?securitySettings.value=defaultSettings.security||[]:tabId==="upload"?uploadSettings.value=defaultSettings.upload||[]:tabId==="guest"?guestSettings.value=defaultSettings.guest||[]:tabId==="oauth"?oauthSettings.value=[]:tabId==="analytics"&&(analyticsSettings.value=[]),toast.error(error.message)}finally{isLoading.value=!1}};return watch(activeTab,async newTab=>{(newTab==="website"&&websiteSettings.value.length===0||newTab==="registration"&&registrationSettings.value.length===0||newTab==="mail"&&mailSettings.value.length===0||newTab==="security"&&securitySettings.value.length===0||newTab==="upload"&&uploadSettings.value.length===0||newTab==="guest"&&guestSettings.value.length===0||newTab==="oauth"&&oauthSettings.value.length===0||newTab==="analytics"&&analyticsSettings.value.length===0)&&await loadSettingsForTab(newTab)}),watch(()=>route.query.tab,newTab=>{newTab&&newTab!==activeTab.value&&(activeTab.value=newTab.toString())},{immediate:!1}),onMounted(async()=>{await loadSettingsForTab(activeTab.value)}),(_ctx,_cache)=>{const _component_CyberButton=resolveComponent("CyberButton"),_component_CyberSidebarNav=__unplugin_components_0$1,_component_CyberLoading=resolveComponent("CyberLoading"),_component_CyberAdminWrapper=resolveComponent("CyberAdminWrapper");return openBlock(),createElementBlock("div",_hoisted_1,[createVNode(_component_CyberAdminWrapper,{title:unref($t)("admin.settings.title"),subtitle:unref($t)("admin.settings.subtitle"),icon:"fas fa-cog","sidebar-layout":!0},{actions:withCtx(()=>[createVNode(_component_CyberButton,{type:"text",class:"min-w-24",onClick:resetSettings},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("admin.settings.buttons.reset")),1)]),_:1}),createVNode(_component_CyberButton,{type:"primary",loading:isSaving.value,class:"min-w-24",onClick:saveSettings},{default:withCtx(()=>[_cache[0]||(_cache[0]=createBaseVNode("i",{class:"fas fa-save mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("admin.settings.buttons.save")),1)]),_:1},8,["loading"])]),sidebar:withCtx(()=>[createVNode(_component_CyberSidebarNav,{tabs:tabs.value,"active-tab":activeTab.value,onTabChange:updateActiveTab},null,8,["tabs","active-tab"])]),content:withCtx(()=>[withDirectives(createBaseVNode("div",_hoisted_2,[createVNode(WebsiteSettings,{settings:websiteSettings.value,onUpdate:handleWebsiteSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="website"]]),withDirectives(createBaseVNode("div",_hoisted_3,[createVNode(RegistrationSettings,{settings:registrationSettings.value,onUpdate:handleRegistrationSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="registration"]]),withDirectives(createBaseVNode("div",_hoisted_4,[createVNode(_sfc_main$f,{settings:mailSettings.value,onUpdate:handleMailSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="mail"]]),withDirectives(createBaseVNode("div",_hoisted_5,[createVNode(_sfc_main$e,{settings:securitySettings.value,onUpdate:handleSecuritySettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="security"]]),withDirectives(createBaseVNode("div",_hoisted_6,[createVNode(UploadSettings,{settings:uploadSettings.value,onUpdate:handleUploadSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="upload"]]),withDirectives(createBaseVNode("div",_hoisted_7,[createVNode(GuestSettings,{settings:guestSettings.value,onUpdate:handleGuestSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="guest"]]),withDirectives(createBaseVNode("div",_hoisted_8,[createVNode(OAuthSettings,{settings:oauthSettings.value,onUpdate:handleOAuthSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="oauth"]]),withDirectives(createBaseVNode("div",_hoisted_9,[createVNode(AnalyticsSettings,{settings:analyticsSettings.value,onUpdate:handleAnalyticsSettingsUpdate},null,8,["settings"])],512),[[vShow,activeTab.value==="analytics"]]),isLoading.value?(openBlock(),createBlock(_component_CyberLoading,{key:0})):createCommentVNode("",!0)]),_:1},8,["title","subtitle"])])}}});const index=_export_sfc(_sfc_main,[["__scopeId","data-v-3bef4c2c"]]);export{index as default};
