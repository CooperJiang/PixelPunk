import{r as ref,a as reactive,c as computed,a3 as useRouter,d as defineComponent,b as onMounted,o as onUnmounted,w as watch,I as createElementBlock,H as withDirectives,u as unref,a0 as createBaseVNode,a1 as toDisplayString,F as Fragment,M as renderList,G as resolveDirective,z as openBlock,ab as createTextVNode,R as normalizeClass,a5 as withModifiers,K as createCommentVNode,f as createVNode,L as withCtx,i as isRef,A as createBlock,E as resolveComponent,aa as withKeys}from"./vue-vendor-31320f47.js";import{aj as post,y as get,j as useTexts,q as useToast,az as useConfirmDialog,_ as _export_sfc}from"./index-ae9c3219.js";import{g as groupTagsByLetter,a as getAvailableLetters}from"./pinyin-291c7dd8.js";import"./editor-markdown-0b2e1ce5.js";import"./axios-c2a59b9f.js";import"./spark-md5-d0a97131.js";import"./highlight-common-d6c232ae.js";import"./comlink-c7be92b7.js";/* empty css                 */import"./vueuse-2480d07f.js";import"./marked-e9418aa8.js";import"./dompurify-76a35038.js";import"./vue-table-79795ca5.js";import"./pinyin-02edb7aa.js";function createTag(data){return post("/user-tags/create",data)}function getTagList(params){return get("/user-tags/list",params)}function updateTag(data){return post("/user-tags/update",data)}function deleteTag(data){return post("/user-tags/delete",data)}function batchDeleteTags(data){return post("/user-tags/batch-delete",data)}function mergeTags(data){return post("/user-tags/merge",data)}function getTagStats(){return get("/user-tags/stats")}function useTagManagement(){const toast=useToast(),router=useRouter(),{showConfirmDialog}=useConfirmDialog(),{$t}=useTexts(),isLoading=ref(!1),allTags=ref([]),totalTags=ref(0),selectedTagIds=ref([]),stats=ref(null),searchKeyword=ref(""),showCreateModal=ref(!1),showEditModal=ref(!1),showMergeModal=ref(!1),editingTag=ref(null),isBatchMode=ref(!1),tagForm=reactive({name:""}),mergeForm=reactive({targetId:null}),showFormModal=computed({get:()=>showCreateModal.value||showEditModal.value,set:value=>{value||closeFormModal()}}),filteredTags=computed(()=>{if(!searchKeyword.value.trim())return allTags.value;const keyword=searchKeyword.value.toLowerCase().trim();return allTags.value.filter(tag=>tag.name.toLowerCase().includes(keyword))}),selectedTags=computed(()=>allTags.value.filter(tag=>selectedTagIds.value.includes(tag.id))),mergeTargetOptions=computed(()=>selectedTags.value.map(tag=>({label:`${tag.name} (${$t("tagManage.tagCloud.usageCount",{count:tag.file_count})})`,value:tag.id}))),loadTags=async()=>{try{isLoading.value=!0;const response=await getTagList({keyword:"",page:1,size:1e4});allTags.value=response.data.items||[],totalTags.value=response.data.total;const newIds=allTags.value.map(tag=>tag.id);selectedTagIds.value=selectedTagIds.value.filter(id=>newIds.includes(id))}catch{}finally{isLoading.value=!1}},loadStats=async()=>{try{const response=await getTagStats();stats.value=response.data}catch(_error){console.error("Failed to fetch tag stats:",_error)}},openCreateModal=()=>{tagForm.name="",showCreateModal.value=!0},openEditModal=tag=>{editingTag.value=tag,tagForm.name=tag.name,showEditModal.value=!0},closeFormModal=()=>{showCreateModal.value=!1,showEditModal.value=!1,editingTag.value=null,tagForm.name=""};return{isLoading,allTags,filteredTags,totalTags,selectedTagIds,stats,searchKeyword,showCreateModal,showEditModal,showMergeModal,showFormModal,editingTag,isBatchMode,tagForm,mergeForm,selectedTags,mergeTargetOptions,loadTags,loadStats,openCreateModal,openEditModal,closeFormModal,submitTagForm:async()=>{if(!tagForm.name.trim()){toast.warning($t("tagManage.toast.nameRequired"));return}try{showEditModal.value&&editingTag.value?(await updateTag({id:editingTag.value.id,name:tagForm.name.trim()}),toast.success($t("tagManage.toast.updateSuccess"))):(await createTag({name:tagForm.name.trim()}),toast.success($t("tagManage.toast.createSuccess"))),closeFormModal(),loadTags(),loadStats()}catch{}},handleDelete:async tag=>{if(await showConfirmDialog({title:$t("tagManage.dialog.delete.title"),message:$t("tagManage.dialog.delete.message",{name:tag.name,count:tag.file_count}),type:"danger",confirmText:$t("tagManage.dialog.delete.confirmText")}))try{await deleteTag({id:tag.id}),toast.success($t("tagManage.toast.deleteSuccess")),loadTags(),loadStats();const index2=selectedTagIds.value.indexOf(tag.id);index2!==-1&&selectedTagIds.value.splice(index2,1)}catch{}},toggleTagSelection:tag=>{const index2=selectedTagIds.value.indexOf(tag.id);index2===-1?selectedTagIds.value.push(tag.id):selectedTagIds.value.splice(index2,1)},clearSelection:()=>{selectedTagIds.value=[]},handleBatchDelete:async()=>{if(selectedTagIds.value.length===0){toast.warning($t("tagManage.toast.selectRequired"));return}if(await showConfirmDialog({title:$t("tagManage.dialog.batchDelete.title"),message:$t("tagManage.dialog.batchDelete.message",{count:selectedTagIds.value.length}),type:"danger",confirmText:$t("tagManage.dialog.batchDelete.confirmText")}))try{const result=await batchDeleteTags({ids:selectedTagIds.value});toast.success($t("tagManage.toast.batchDeleteSuccess",{count:result.data.deleted_count})),selectedTagIds.value=[],loadTags(),loadStats()}catch{}},openMergeModal:()=>{if(selectedTagIds.value.length<2){toast.warning($t("tagManage.toast.mergeMinRequired"));return}mergeForm.targetId=null,showMergeModal.value=!0},submitMerge:async()=>{if(!mergeForm.targetId){toast.warning($t("tagManage.toast.mergeTargetRequired"));return}const targetId=Number(mergeForm.targetId);if(!selectedTagIds.value.includes(targetId)){toast.warning($t("tagManage.toast.mergeTargetInvalid"));return}const sourceIds=selectedTagIds.value.filter(id=>id!==targetId),targetTag=selectedTags.value.find(tag=>tag.id===targetId);if(await showConfirmDialog({title:$t("tagManage.dialog.mergeConfirm.title"),message:[$t("tagManage.dialog.mergeConfirm.message.0",{count:sourceIds.length,targetName:targetTag?.name}),$t("tagManage.dialog.mergeConfirm.message.1"),$t("tagManage.dialog.mergeConfirm.message.2")],type:"warning",confirmText:$t("tagManage.dialog.mergeConfirm.confirmText")}))try{await mergeTags({source_ids:sourceIds,target_id:targetId}),toast.success($t("tagManage.toast.mergeSuccess")),selectedTagIds.value=[],loadTags(),loadStats()}catch{}},toggleBatchMode:()=>{isBatchMode.value=!isBatchMode.value,isBatchMode.value||(selectedTagIds.value=[])},viewSelectedTagsFiles:()=>{if(selectedTagIds.value.length===0){toast.warning($t("tagManage.toast.batchSelectRequired"));return}const tagIds=selectedTagIds.value.join(","),tagNames=selectedTags.value.map(tag=>tag.name).join(",");router.push({path:"/resource",query:{tags:tagIds,tag_names:tagNames}})}}}const _hoisted_1$1={class:"tag-cloud-container"},_hoisted_2$1={key:0,class:"loading-state"},_hoisted_3$1={key:1,class:"empty-state"},_hoisted_4$1={class:"empty-content animate-slide-up"},_hoisted_5$1={class:"empty-title"},_hoisted_6$1={class:"empty-desc"},_hoisted_7$1={key:2,class:"tags-wrapper"},_hoisted_8$1=["data-letter-group"],_hoisted_9$1={class:"letter-group-header"},_hoisted_10$1={class:"letter-badge"},_hoisted_11$1={class:"letter-stats"},_hoisted_12$1={class:"stat-item"},_hoisted_13$1={class:"stat-item"},_hoisted_14$1={class:"tags-grid"},_hoisted_15$1=["data-tag-id","onMouseenter","onClick"],_hoisted_16$1={class:"tag-content"},_hoisted_17$1={class:"tag-name"},_hoisted_18$1={class:"tag-count"},_hoisted_19$1=["title","onClick"],_hoisted_20$1=["title","onClick"],_hoisted_21$1={class:"letter-navigation"},_hoisted_22$1={class:"letter-nav-inner"},_hoisted_23$1=["title","onClick"],_sfc_main$1=defineComponent({__name:"TagCloud",props:{tags:{type:Array,required:!0},isLoading:{type:Boolean,default:!1},selectedTagIds:{type:Array,default:()=>[]},tempSelectedTagIds:{type:Array,default:()=>[]},totalTags:{type:Number,default:0},isBatchMode:{type:Boolean,default:!1}},emits:["select","edit","delete"],setup(__props,{emit:__emit}){const{$t}=useTexts(),props=__props,emit=__emit,highlightedTagId=ref(null),activeLetter=ref(""),scrollContainer=ref(null),groupedTags=computed(()=>groupTagsByLetter(props.tags,"count")),availableLetters=computed(()=>getAvailableLetters(groupedTags.value)),allLetters="ABCDEFGHIJKLMNOPQRSTUVWXYZ#".split(""),getGroupInfo=letter=>{const tags=groupedTags.value[letter]||[],totalCount=tags.reduce((sum,tag)=>sum+(tag.file_count||0),0);return{count:tags.length,totalUsage:totalCount}},scrollToLetter=letter=>{const element=document.querySelector(`[data-letter-group="${letter}"]`);if(element&&scrollContainer.value){const containerTop=scrollContainer.value.getBoundingClientRect().top,offset=element.getBoundingClientRect().top-containerTop-20;scrollContainer.value.scrollTo({top:scrollContainer.value.scrollTop+offset,behavior:"smooth"})}},handleScroll=()=>{if(!scrollContainer.value)return;const containerTop=scrollContainer.value.getBoundingClientRect().top,groups=scrollContainer.value.querySelectorAll("[data-letter-group]");let currentLetter="";groups.forEach(group=>{group.getBoundingClientRect().top-containerTop<=100&&(currentLetter=group.getAttribute("data-letter-group")||"")}),currentLetter&&(activeLetter.value=currentLetter)},handleTagClick=tag=>{emit("select",tag)};onMounted(()=>{scrollContainer.value&&scrollContainer.value.addEventListener("scroll",handleScroll)}),onUnmounted(()=>{scrollContainer.value&&scrollContainer.value.removeEventListener("scroll",handleScroll)});const positionCache=ref(new Map),estimatedTagsPerRow=ref(Math.floor(window.innerWidth/200));watch(()=>props.tags.length,()=>{positionCache.value.clear(),estimatedTagsPerRow.value=Math.floor(window.innerWidth/200)});const getActionPosition=tagId=>{const cached=positionCache.value.get(tagId);if(cached)return cached;const tagIndex=props.tags.findIndex(tag=>tag.id===tagId);if(tagIndex===-1)return"actions-below";const currentRow=Math.floor(tagIndex/estimatedTagsPerRow.value),totalRows=Math.ceil(props.tags.length/estimatedTagsPerRow.value),position=currentRow<totalRows/2?"actions-below":"actions-above";return positionCache.value.set(tagId,position),position};return(_ctx,_cache)=>{const _directive_loading=resolveDirective("loading");return openBlock(),createElementBlock("div",_hoisted_1$1,[__props.isLoading?withDirectives((openBlock(),createElementBlock("div",_hoisted_2$1,null,512)),[[_directive_loading,{loading:!0,text:unref($t)("tagManage.loading"),type:"default"}]]):__props.tags.length===0?(openBlock(),createElementBlock("div",_hoisted_3$1,[createBaseVNode("div",_hoisted_4$1,[_cache[1]||(_cache[1]=createBaseVNode("div",{class:"empty-icon-wrapper"},[createBaseVNode("i",{class:"fas fa-tags empty-icon"})],-1)),createBaseVNode("h3",_hoisted_5$1,toDisplayString(unref($t)("tagManage.empty.title")),1),createBaseVNode("p",_hoisted_6$1,toDisplayString(unref($t)("tagManage.empty.description")),1)])])):(openBlock(),createElementBlock("div",_hoisted_7$1,[createBaseVNode("div",{ref_key:"scrollContainer",ref:scrollContainer,class:"tag-groups-container"},[(openBlock(!0),createElementBlock(Fragment,null,renderList(availableLetters.value,letter=>(openBlock(),createElementBlock("div",{key:letter,"data-letter-group":letter,class:"letter-group"},[createBaseVNode("div",_hoisted_9$1,[createBaseVNode("div",_hoisted_10$1,toDisplayString(letter),1),createBaseVNode("div",_hoisted_11$1,[createBaseVNode("span",_hoisted_12$1,[_cache[2]||(_cache[2]=createBaseVNode("i",{class:"fas fa-tags mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.tagCloud.groupCount",{count:getGroupInfo(letter).count})),1)]),_cache[4]||(_cache[4]=createBaseVNode("span",{class:"stat-divider"},"Â·",-1)),createBaseVNode("span",_hoisted_13$1,[_cache[3]||(_cache[3]=createBaseVNode("i",{class:"fas fa-chart-line mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.tagCloud.groupUsage",{usage:getGroupInfo(letter).totalUsage})),1)])])]),createBaseVNode("div",_hoisted_14$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(groupedTags.value[letter],tag=>(openBlock(),createElementBlock("div",{key:tag.id,"data-tag-id":tag.id,class:normalizeClass(["tag-item",[{selected:__props.selectedTagIds.includes(tag.id)||__props.tempSelectedTagIds.includes(tag.id)},{highlight:highlightedTagId.value===tag.id}]]),onMouseenter:$event=>highlightedTagId.value=tag.id,onMouseleave:_cache[0]||(_cache[0]=$event=>highlightedTagId.value=null),onClick:$event=>handleTagClick(tag)},[createBaseVNode("div",_hoisted_16$1,[createBaseVNode("span",_hoisted_17$1,toDisplayString(tag.name),1),createBaseVNode("span",_hoisted_18$1,toDisplayString(tag.file_count),1)]),highlightedTagId.value===tag.id&&!__props.isBatchMode?(openBlock(),createElementBlock("div",{key:0,class:normalizeClass(["tag-actions",getActionPosition(tag.id)])},[createBaseVNode("button",{class:"action-btn edit-btn",title:unref($t)("tagManage.actions.edit"),onClick:withModifiers($event=>_ctx.$emit("edit",tag),["stop"])},[..._cache[5]||(_cache[5]=[createBaseVNode("i",{class:"fas fa-edit"},null,-1)])],8,_hoisted_19$1),createBaseVNode("button",{class:"action-btn delete-btn",title:unref($t)("tagManage.actions.delete"),onClick:withModifiers($event=>_ctx.$emit("delete",tag),["stop"])},[..._cache[6]||(_cache[6]=[createBaseVNode("i",{class:"fas fa-trash-alt"},null,-1)])],8,_hoisted_20$1)],2)):createCommentVNode("",!0)],42,_hoisted_15$1))),128))])],8,_hoisted_8$1))),128))],512),createBaseVNode("div",_hoisted_21$1,[createBaseVNode("div",_hoisted_22$1,[(openBlock(!0),createElementBlock(Fragment,null,renderList(unref(allLetters),letter=>(openBlock(),createElementBlock("div",{key:letter,class:normalizeClass(["letter-nav-item",{active:activeLetter.value===letter,disabled:!availableLetters.value.includes(letter)}]),title:availableLetters.value.includes(letter)?unref($t)("tagManage.tagCloud.letterNav",{letter,count:getGroupInfo(letter).count}):unref($t)("tagManage.tagCloud.letterEmpty",{letter}),onClick:$event=>availableLetters.value.includes(letter)&&scrollToLetter(letter)},toDisplayString(letter),11,_hoisted_23$1))),128))])])]))])}}});const TagCloud=_export_sfc(_sfc_main$1,[["__scopeId","data-v-d89109dc"]]),_hoisted_1={class:"tag-manage-page"},_hoisted_2={class:"page-header"},_hoisted_3={class:"flex items-center justify-between gap-4"},_hoisted_4={class:"flex items-center gap-3"},_hoisted_5={class:"flex items-center gap-2"},_hoisted_6={class:"text-lg font-bold text-content"},_hoisted_7={key:0,class:"bg-brand-500/10 rounded-full px-2 py-0.5 text-xs font-medium text-brand-400"},_hoisted_8={class:"mt-0.5 text-xs text-content-muted"},_hoisted_9={class:"flex flex-wrap items-center gap-2"},_hoisted_10={class:"search-input-wrapper"},_hoisted_11={key:0,class:"batch-mode-notice"},_hoisted_12={class:"font-medium text-brand-400"},_hoisted_13={key:1,class:"multi-select-notice"},_hoisted_14={class:"font-medium text-success-400"},_hoisted_15={key:2,class:"normal-mode-notice"},_hoisted_16={class:"text-content-muted"},_hoisted_17={class:"tags-content"},_hoisted_18={class:"space-y-4 pt-2"},_hoisted_19={class:"mb-2 block text-sm font-medium text-content"},_hoisted_20={class:"mt-2 text-xs text-content-muted"},_hoisted_21={class:"flex justify-end gap-3 p-4"},_hoisted_22={class:"space-y-4 pt-2"},_hoisted_23={class:"text-sm text-content-muted"},_hoisted_24={class:"mb-2 block text-sm font-medium text-content"},_hoisted_25={class:"mt-3 rounded-lg bg-background-700 p-3"},_hoisted_26={class:"text-xs text-content-muted"},_hoisted_27={class:"flex justify-end gap-3 p-4"},_sfc_main=defineComponent({name:"TagManage",__name:"index",setup(__props){const{$t}=useTexts(),router=useRouter(),{dialogState,handleConfirm,handleCancel}=useConfirmDialog(),{isLoading,allTags,filteredTags,totalTags,selectedTagIds,stats,showFormModal,showEditModal,showMergeModal,isBatchMode,searchKeyword,tagForm,mergeForm,mergeTargetOptions,loadTags,loadStats,openCreateModal,openEditModal,closeFormModal,submitTagForm,handleDelete,toggleTagSelection,clearSelection,handleBatchDelete,openMergeModal,submitMerge,toggleBatchMode,viewSelectedTagsFiles}=useTagManagement(),isMultiSelectMode=ref(!1),tempSelectedTags=ref([]),isMac=ref(!1),modifierKeyName=ref("Ctrl"),detectOS=()=>{const userAgent=window.navigator.userAgent.toLowerCase(),platform=window.navigator.platform.toLowerCase();isMac.value=/mac|iphone|ipad|ipod/.test(userAgent)||/mac/.test(platform),modifierKeyName.value=isMac.value?"Command":"Ctrl"},goToResourceByTag=tagList=>{const tagArray=Array.isArray(tagList)?tagList:[tagList],tagIds=tagArray.map(t=>t.id).join(","),tagNames=tagArray.map(t=>t.name).join(",");router.push({path:"/resource",query:{tags:tagIds,tag_names:tagNames}})},handleTagClick=(tag,_event)=>{if(isBatchMode.value){toggleTagSelection(tag);return}if(isMultiSelectMode.value){const index2=tempSelectedTags.value.indexOf(tag.id);index2===-1?tempSelectedTags.value.push(tag.id):tempSelectedTags.value.splice(index2,1);return}goToResourceByTag(tag)},checkModifierKey=event=>event.altKey||event.ctrlKey||event.metaKey,handleKeyDown=event=>{checkModifierKey(event)&&!isBatchMode.value&&(isMultiSelectMode.value=!0)},handleKeyUp=event=>{if(!event.altKey&&!event.ctrlKey&&!event.metaKey&&(isMultiSelectMode.value=!1,tempSelectedTags.value.length>0)){const selectedTagList=allTags.value.filter(t=>tempSelectedTags.value.includes(t.id));goToResourceByTag(selectedTagList),tempSelectedTags.value=[]}},handleWindowBlur=()=>{isMultiSelectMode.value=!1,tempSelectedTags.value=[]};return onMounted(()=>{loadTags(),loadStats(),detectOS(),window.addEventListener("keydown",handleKeyDown),window.addEventListener("keyup",handleKeyUp),window.addEventListener("blur",handleWindowBlur)}),onUnmounted(()=>{window.removeEventListener("keydown",handleKeyDown),window.removeEventListener("keyup",handleKeyUp),window.removeEventListener("blur",handleWindowBlur)}),(_ctx,_cache)=>{const _component_CyberInput=resolveComponent("CyberInput"),_component_CyberButton=resolveComponent("CyberButton"),_component_CyberDialog=resolveComponent("CyberDialog"),_component_CyberDropdown=resolveComponent("CyberDropdown"),_component_CyberConfirmDialog=resolveComponent("CyberConfirmDialog");return openBlock(),createElementBlock("div",_hoisted_1,[createBaseVNode("div",_hoisted_2,[createBaseVNode("div",_hoisted_3,[createBaseVNode("div",_hoisted_4,[_cache[8]||(_cache[8]=createBaseVNode("div",{class:"icon-container"},[createBaseVNode("i",{class:"fas fa-tags text-lg text-brand-400"})],-1)),createBaseVNode("div",null,[createBaseVNode("div",_hoisted_5,[createBaseVNode("h1",_hoisted_6,toDisplayString(unref($t)("tagManage.title")),1),unref(stats)?(openBlock(),createElementBlock("span",_hoisted_7,toDisplayString(unref(stats).total_tags),1)):createCommentVNode("",!0)]),createBaseVNode("p",_hoisted_8,toDisplayString(unref($t)("tagManage.subtitle")),1)])]),createBaseVNode("div",_hoisted_9,[createBaseVNode("div",_hoisted_10,[createVNode(_component_CyberInput,{modelValue:unref(searchKeyword),"onUpdate:modelValue":_cache[0]||(_cache[0]=$event=>isRef(searchKeyword)?searchKeyword.value=$event:null),placeholder:unref($t)("tagManage.search"),size:"small",clearable:""},{prefix:withCtx(()=>[..._cache[9]||(_cache[9]=[createBaseVNode("i",{class:"fas fa-search text-content-muted"},null,-1)])]),_:1},8,["modelValue","placeholder"])]),createVNode(_component_CyberButton,{type:"primary",size:"small",onClick:unref(openCreateModal)},{default:withCtx(()=>[_cache[10]||(_cache[10]=createBaseVNode("i",{class:"fas fa-plus mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.create")),1)]),_:1},8,["onClick"]),createVNode(_component_CyberButton,{type:unref(isBatchMode)?"success":"outlined",size:"small",onClick:unref(toggleBatchMode)},{default:withCtx(()=>[_cache[11]||(_cache[11]=createBaseVNode("i",{class:"fas fa-tasks mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref(isBatchMode)?unref($t)("tagManage.exitBatchMode"):unref($t)("tagManage.batchMode")),1)]),_:1},8,["type","onClick"]),unref(isBatchMode)&&unref(selectedTagIds).length>0?(openBlock(),createBlock(_component_CyberButton,{key:0,type:"primary",size:"small",onClick:unref(viewSelectedTagsFiles)},{default:withCtx(()=>[_cache[12]||(_cache[12]=createBaseVNode("i",{class:"fas fa-images mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.batch.viewFiles")),1)]),_:1},8,["onClick"])):createCommentVNode("",!0),unref(isBatchMode)&&unref(selectedTagIds).length>0?(openBlock(),createBlock(_component_CyberButton,{key:1,type:"warning",size:"small",onClick:unref(handleBatchDelete)},{default:withCtx(()=>[_cache[13]||(_cache[13]=createBaseVNode("i",{class:"fas fa-trash mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.batch.delete",{count:unref(selectedTagIds).length})),1)]),_:1},8,["onClick"])):createCommentVNode("",!0),unref(isBatchMode)&&unref(selectedTagIds).length>=2?(openBlock(),createBlock(_component_CyberButton,{key:2,type:"info",size:"small",onClick:unref(openMergeModal)},{default:withCtx(()=>[_cache[14]||(_cache[14]=createBaseVNode("i",{class:"fas fa-code-branch mr-1.5"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.batch.merge")),1)]),_:1},8,["onClick"])):createCommentVNode("",!0),unref(selectedTagIds).length>0?(openBlock(),createBlock(_component_CyberButton,{key:3,type:"text",size:"small",onClick:unref(clearSelection)},{default:withCtx(()=>[_cache[15]||(_cache[15]=createBaseVNode("i",{class:"fas fa-times mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.batch.cancel")),1)]),_:1},8,["onClick"])):createCommentVNode("",!0)])])]),unref(isBatchMode)?(openBlock(),createElementBlock("div",_hoisted_11,[_cache[16]||(_cache[16]=createBaseVNode("i",{class:"fas fa-info-circle mr-2 text-brand-400"},null,-1)),createBaseVNode("span",_hoisted_12,toDisplayString(unref($t)("tagManage.batch.modeHint")),1),createTextVNode(" - "+toDisplayString(unref($t)("tagManage.batch.modeDescription",{count:unref(selectedTagIds).length})),1)])):createCommentVNode("",!0),isMultiSelectMode.value?(openBlock(),createElementBlock("div",_hoisted_13,[_cache[17]||(_cache[17]=createBaseVNode("i",{class:"fas fa-hand-pointer mr-2 text-success-400"},null,-1)),createBaseVNode("span",_hoisted_14,toDisplayString(unref($t)("tagManage.multiSelect.modeHint")),1),createTextVNode(" - "+toDisplayString(unref($t)("tagManage.multiSelect.modeDescription",{modifier:modifierKeyName.value,count:tempSelectedTags.value.length})),1)])):createCommentVNode("",!0),!unref(isBatchMode)&&!isMultiSelectMode.value&&unref(allTags).length>0?(openBlock(),createElementBlock("div",_hoisted_15,[_cache[18]||(_cache[18]=createBaseVNode("i",{class:"fas fa-lightbulb mr-2 text-warning-400"},null,-1)),createBaseVNode("span",_hoisted_16,toDisplayString(unref($t)("tagManage.normalMode.hint",{modifier:modifierKeyName.value})),1)])):createCommentVNode("",!0),createBaseVNode("div",_hoisted_17,[createVNode(TagCloud,{tags:unref(filteredTags),"selected-tag-ids":unref(selectedTagIds),"temp-selected-tag-ids":tempSelectedTags.value,"is-loading":unref(isLoading),"total-tags":unref(totalTags),"is-batch-mode":unref(isBatchMode),onSelect:handleTagClick,onEdit:unref(openEditModal),onDelete:unref(handleDelete)},null,8,["tags","selected-tag-ids","temp-selected-tag-ids","is-loading","total-tags","is-batch-mode","onEdit","onDelete"])]),createVNode(_component_CyberDialog,{modelValue:unref(showFormModal),"onUpdate:modelValue":_cache[2]||(_cache[2]=$event=>isRef(showFormModal)?showFormModal.value=$event:null),title:unref(showEditModal)?unref($t)("tagManage.dialog.edit.title"):unref($t)("tagManage.dialog.create.title"),onClose:unref(closeFormModal)},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_21,[createVNode(_component_CyberButton,{type:"secondary",onClick:unref(closeFormModal)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("tagManage.form.cancel")),1)]),_:1},8,["onClick"]),createVNode(_component_CyberButton,{type:"primary",onClick:unref(submitTagForm)},{default:withCtx(()=>[_cache[21]||(_cache[21]=createBaseVNode("i",{class:"fas fa-check mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref(showEditModal)?unref($t)("tagManage.dialog.edit.submit"):unref($t)("tagManage.dialog.create.submit")),1)]),_:1},8,["onClick"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_18,[createBaseVNode("div",null,[createBaseVNode("label",_hoisted_19,[_cache[19]||(_cache[19]=createBaseVNode("i",{class:"fas fa-tag mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.form.name.label"))+" ",1),_cache[20]||(_cache[20]=createBaseVNode("span",{class:"text-error-400"},"*",-1))]),createVNode(_component_CyberInput,{modelValue:unref(tagForm).name,"onUpdate:modelValue":_cache[1]||(_cache[1]=$event=>unref(tagForm).name=$event),placeholder:unref($t)("tagManage.form.name.placeholder"),maxlength:50,"prefix-icon":"tag",onKeyup:withKeys(unref(submitTagForm),["enter"])},null,8,["modelValue","placeholder","onKeyup"]),createBaseVNode("p",_hoisted_20,toDisplayString(unref($t)("tagManage.form.name.hint")),1)])])]),_:1},8,["modelValue","title","onClose"]),createVNode(_component_CyberDialog,{modelValue:unref(showMergeModal),"onUpdate:modelValue":_cache[5]||(_cache[5]=$event=>isRef(showMergeModal)?showMergeModal.value=$event:null),title:unref($t)("tagManage.dialog.merge.title"),onClose:_cache[6]||(_cache[6]=$event=>showMergeModal.value=!1)},{footer:withCtx(()=>[createBaseVNode("div",_hoisted_27,[createVNode(_component_CyberButton,{type:"secondary",onClick:_cache[4]||(_cache[4]=$event=>showMergeModal.value=!1)},{default:withCtx(()=>[createTextVNode(toDisplayString(unref($t)("tagManage.merge.cancel")),1)]),_:1}),createVNode(_component_CyberButton,{type:"primary",onClick:unref(submitMerge)},{default:withCtx(()=>[_cache[25]||(_cache[25]=createBaseVNode("i",{class:"fas fa-code-branch mr-2"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.merge.confirm")),1)]),_:1},8,["onClick"])])]),default:withCtx(()=>[createBaseVNode("div",_hoisted_22,[createBaseVNode("p",_hoisted_23,toDisplayString(unref($t)("tagManage.merge.description")),1),createBaseVNode("div",null,[createBaseVNode("label",_hoisted_24,[_cache[22]||(_cache[22]=createBaseVNode("i",{class:"fas fa-bullseye mr-1"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.dialog.merge.targetLabel"))+" ",1),_cache[23]||(_cache[23]=createBaseVNode("span",{class:"text-error-400"},"*",-1))]),createVNode(_component_CyberDropdown,{modelValue:unref(mergeForm).targetId,"onUpdate:modelValue":_cache[3]||(_cache[3]=$event=>unref(mergeForm).targetId=$event),options:unref(mergeTargetOptions),placeholder:unref($t)("tagManage.dialog.merge.targetPlaceholder"),searchable:""},null,8,["modelValue","options","placeholder"])]),createBaseVNode("div",_hoisted_25,[createBaseVNode("p",_hoisted_26,[_cache[24]||(_cache[24]=createBaseVNode("i",{class:"fas fa-info-circle mr-1 text-brand-400"},null,-1)),createTextVNode(" "+toDisplayString(unref($t)("tagManage.merge.selectedInfo",{count:unref(selectedTagIds).length,remaining:unref(selectedTagIds).length-1})),1)])])])]),_:1},8,["modelValue","title"]),createVNode(_component_CyberConfirmDialog,{modelValue:unref(dialogState).isVisible,"onUpdate:modelValue":_cache[7]||(_cache[7]=$event=>unref(dialogState).isVisible=$event),title:unref(dialogState).config.title,message:unref(dialogState).config.message,type:unref(dialogState).config.type,"confirm-text":unref(dialogState).config.confirmText,"cancel-text":unref(dialogState).config.cancelText,width:unref(dialogState).config.width,"require-input":unref(dialogState).config.requireInput,"input-label":unref(dialogState).config.inputLabel,"input-placeholder":unref(dialogState).config.inputPlaceholder,"expected-input":unref(dialogState).config.expectedInput,onConfirm:unref(handleConfirm),onCancel:unref(handleCancel)},null,8,["modelValue","title","message","type","confirm-text","cancel-text","width","require-input","input-label","input-placeholder","expected-input","onConfirm","onCancel"])])}}});const index=_export_sfc(_sfc_main,[["__scopeId","data-v-6dcc98fd"]]);export{index as default};
