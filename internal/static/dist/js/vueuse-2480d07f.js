import{b as onMounted,n as nextTick,g as getCurrentInstance,U as hasInjectionContext,e as inject,w as watch,V as getCurrentScope,W as onScopeDispose,X as toValue,s as shallowRef,S as watchEffect,c as computed,u as unref}from"./vue-vendor-31320f47.js";function tryOnScopeDispose(fn){return getCurrentScope()?(onScopeDispose(fn),!0):!1}const localProvidedStateMap=new WeakMap,injectLocal=(...args)=>{var _a;const key=args[0],instance=(_a=getCurrentInstance())==null?void 0:_a.proxy;if(instance==null&&!hasInjectionContext())throw new Error("injectLocal must be called in setup");return instance&&localProvidedStateMap.has(instance)&&key in localProvidedStateMap.get(instance)?localProvidedStateMap.get(instance)[key]:inject(...args)},isClient=typeof window<"u"&&typeof document<"u";typeof WorkerGlobalScope<"u"&&globalThis instanceof WorkerGlobalScope;const notNullish=val=>val!=null,toString=Object.prototype.toString,isObject=val=>toString.call(val)==="[object Object]",noop=()=>{},isIOS=getIsIOS();function getIsIOS(){var _a,_b;return isClient&&((_a=window?.navigator)==null?void 0:_a.userAgent)&&(/iP(?:ad|hone|od)/.test(window.navigator.userAgent)||((_b=window?.navigator)==null?void 0:_b.maxTouchPoints)>2&&/iPad|Macintosh/.test(window?.navigator.userAgent))}function createFilterWrapper(filter,fn){function wrapper(...args){return new Promise((resolve,reject)=>{Promise.resolve(filter(()=>fn.apply(this,args),{fn,thisArg:this,args})).then(resolve).catch(reject)})}return wrapper}function debounceFilter(ms,options={}){let timer,maxTimer,lastRejector=noop;const _clearTimeout=timer2=>{clearTimeout(timer2),lastRejector(),lastRejector=noop};let lastInvoker;return invoke=>{const duration=toValue(ms),maxDuration=toValue(options.maxWait);return timer&&_clearTimeout(timer),duration<=0||maxDuration!==void 0&&maxDuration<=0?(maxTimer&&(_clearTimeout(maxTimer),maxTimer=void 0),Promise.resolve(invoke())):new Promise((resolve,reject)=>{lastRejector=options.rejectOnCancel?reject:resolve,lastInvoker=invoke,maxDuration&&!maxTimer&&(maxTimer=setTimeout(()=>{timer&&_clearTimeout(timer),maxTimer=void 0,resolve(lastInvoker())},maxDuration)),timer=setTimeout(()=>{maxTimer&&_clearTimeout(maxTimer),maxTimer=void 0,resolve(invoke())},duration)})}}function increaseWithUnit(target,delta){var _a;if(typeof target=="number")return target+delta;const value=((_a=target.match(/^-?\d+\.?\d*/))==null?void 0:_a[0])||"",unit=target.slice(value.length),result=Number.parseFloat(value)+delta;return Number.isNaN(result)?target:result+unit}function pxValue(px){return px.endsWith("rem")?Number.parseFloat(px)*16:Number.parseFloat(px)}function toArray(value){return Array.isArray(value)?value:[value]}function getLifeCycleTarget(target){return target||getCurrentInstance()}function useDebounceFn(fn,ms=200,options={}){return createFilterWrapper(debounceFilter(ms,options),fn)}function tryOnMounted(fn,sync=!0,target){getLifeCycleTarget(target)?onMounted(fn,target):sync?fn():nextTick(fn)}function watchImmediate(source,cb,options){return watch(source,cb,{...options,immediate:!0})}const defaultWindow=isClient?window:void 0;function unrefElement(elRef){var _a;const plain=toValue(elRef);return(_a=plain?.$el)!=null?_a:plain}function useEventListener(...args){const cleanups=[],cleanup=()=>{cleanups.forEach(fn=>fn()),cleanups.length=0},register=(el,event,listener,options)=>(el.addEventListener(event,listener,options),()=>el.removeEventListener(event,listener,options)),firstParamTargets=computed(()=>{const test=toArray(toValue(args[0])).filter(e=>e!=null);return test.every(e=>typeof e!="string")?test:void 0}),stopWatch=watchImmediate(()=>{var _a,_b;return[(_b=(_a=firstParamTargets.value)==null?void 0:_a.map(e=>unrefElement(e)))!=null?_b:[defaultWindow].filter(e=>e!=null),toArray(toValue(firstParamTargets.value?args[1]:args[0])),toArray(unref(firstParamTargets.value?args[2]:args[1])),toValue(firstParamTargets.value?args[3]:args[2])]},([raw_targets,raw_events,raw_listeners,raw_options])=>{if(cleanup(),!raw_targets?.length||!raw_events?.length||!raw_listeners?.length)return;const optionsClone=isObject(raw_options)?{...raw_options}:raw_options;cleanups.push(...raw_targets.flatMap(el=>raw_events.flatMap(event=>raw_listeners.map(listener=>register(el,event,listener,optionsClone)))))},{flush:"post"}),stop=()=>{stopWatch(),cleanup()};return tryOnScopeDispose(cleanup),stop}let _iOSWorkaround=!1;function onClickOutside(target,handler,options={}){const{window:window2=defaultWindow,ignore=[],capture=!0,detectIframe=!1,controls=!1}=options;if(!window2)return controls?{stop:noop,cancel:noop,trigger:noop}:noop;if(isIOS&&!_iOSWorkaround){_iOSWorkaround=!0;const listenerOptions={passive:!0};Array.from(window2.document.body.children).forEach(el=>el.addEventListener("click",noop,listenerOptions)),window2.document.documentElement.addEventListener("click",noop,listenerOptions)}let shouldListen=!0;const shouldIgnore=event=>toValue(ignore).some(target2=>{if(typeof target2=="string")return Array.from(window2.document.querySelectorAll(target2)).some(el=>el===event.target||event.composedPath().includes(el));{const el=unrefElement(target2);return el&&(event.target===el||event.composedPath().includes(el))}});function hasMultipleRoots(target2){const vm=toValue(target2);return vm&&vm.$.subTree.shapeFlag===16}function checkMultipleRoots(target2,event){const vm=toValue(target2),children=vm.$.subTree&&vm.$.subTree.children;return children==null||!Array.isArray(children)?!1:children.some(child=>child.el===event.target||event.composedPath().includes(child.el))}const listener=event=>{const el=unrefElement(target);if(event.target!=null&&!(!(el instanceof Element)&&hasMultipleRoots(target)&&checkMultipleRoots(target,event))&&!(!el||el===event.target||event.composedPath().includes(el))){if("detail"in event&&event.detail===0&&(shouldListen=!shouldIgnore(event)),!shouldListen){shouldListen=!0;return}handler(event)}};let isProcessingClick=!1;const cleanup=[useEventListener(window2,"click",event=>{isProcessingClick||(isProcessingClick=!0,setTimeout(()=>{isProcessingClick=!1},0),listener(event))},{passive:!0,capture}),useEventListener(window2,"pointerdown",e=>{const el=unrefElement(target);shouldListen=!shouldIgnore(e)&&!!(el&&!e.composedPath().includes(el))},{passive:!0}),detectIframe&&useEventListener(window2,"blur",event=>{setTimeout(()=>{var _a;const el=unrefElement(target);((_a=window2.document.activeElement)==null?void 0:_a.tagName)==="IFRAME"&&!el?.contains(window2.document.activeElement)&&handler(event)},0)},{passive:!0})].filter(Boolean),stop=()=>cleanup.forEach(fn=>fn());return controls?{stop,cancel:()=>{shouldListen=!1},trigger:event=>{shouldListen=!0,listener(event),shouldListen=!1}}:stop}function useMounted(){const isMounted=shallowRef(!1),instance=getCurrentInstance();return instance&&onMounted(()=>{isMounted.value=!0},instance),isMounted}function useSupported(callback){const isMounted=useMounted();return computed(()=>(isMounted.value,!!callback()))}function useMutationObserver(target,callback,options={}){const{window:window2=defaultWindow,...mutationOptions}=options;let observer;const isSupported=useSupported(()=>window2&&"MutationObserver"in window2),cleanup=()=>{observer&&(observer.disconnect(),observer=void 0)},targets=computed(()=>{const value=toValue(target),items=toArray(value).map(unrefElement).filter(notNullish);return new Set(items)}),stopWatch=watch(targets,newTargets=>{cleanup(),isSupported.value&&newTargets.size&&(observer=new MutationObserver(callback),newTargets.forEach(el=>observer.observe(el,mutationOptions)))},{immediate:!0,flush:"post"}),takeRecords=()=>observer?.takeRecords(),stop=()=>{stopWatch(),cleanup()};return tryOnScopeDispose(stop),{isSupported,stop,takeRecords}}const ssrWidthSymbol=Symbol("vueuse-ssr-width");function useSSRWidth(){const ssrWidth=hasInjectionContext()?injectLocal(ssrWidthSymbol,null):null;return typeof ssrWidth=="number"?ssrWidth:void 0}function useMediaQuery(query,options={}){const{window:window2=defaultWindow,ssrWidth=useSSRWidth()}=options,isSupported=useSupported(()=>window2&&"matchMedia"in window2&&typeof window2.matchMedia=="function"),ssrSupport=shallowRef(typeof ssrWidth=="number"),mediaQuery=shallowRef(),matches=shallowRef(!1),handler=event=>{matches.value=event.matches};return watchEffect(()=>{if(ssrSupport.value){ssrSupport.value=!isSupported.value;const queryStrings=toValue(query).split(",");matches.value=queryStrings.some(queryString=>{const not=queryString.includes("not all"),minWidth=queryString.match(/\(\s*min-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/),maxWidth=queryString.match(/\(\s*max-width:\s*(-?\d+(?:\.\d*)?[a-z]+\s*)\)/);let res=!!(minWidth||maxWidth);return minWidth&&res&&(res=ssrWidth>=pxValue(minWidth[1])),maxWidth&&res&&(res=ssrWidth<=pxValue(maxWidth[1])),not?!res:res});return}isSupported.value&&(mediaQuery.value=window2.matchMedia(toValue(query)),matches.value=mediaQuery.value.matches)}),useEventListener(mediaQuery,"change",handler,{passive:!0}),computed(()=>matches.value)}function useBreakpoints(breakpoints,options={}){function getValue(k,delta){let v=toValue(breakpoints[toValue(k)]);return delta!=null&&(v=increaseWithUnit(v,delta)),typeof v=="number"&&(v=`${v}px`),v}const{window:window2=defaultWindow,strategy="min-width",ssrWidth=useSSRWidth()}=options,ssrSupport=typeof ssrWidth=="number",mounted=ssrSupport?shallowRef(!1):{value:!0};ssrSupport&&tryOnMounted(()=>mounted.value=!!window2);function match(query,size){return!mounted.value&&ssrSupport?query==="min"?ssrWidth>=pxValue(size):ssrWidth<=pxValue(size):window2?window2.matchMedia(`(${query}-width: ${size})`).matches:!1}const greaterOrEqual=k=>useMediaQuery(()=>`(min-width: ${getValue(k)})`,options),smallerOrEqual=k=>useMediaQuery(()=>`(max-width: ${getValue(k)})`,options),shortcutMethods=Object.keys(breakpoints).reduce((shortcuts,k)=>(Object.defineProperty(shortcuts,k,{get:()=>strategy==="min-width"?greaterOrEqual(k):smallerOrEqual(k),enumerable:!0,configurable:!0}),shortcuts),{});function current(){const points=Object.keys(breakpoints).map(k=>[k,shortcutMethods[k],pxValue(getValue(k))]).sort((a,b)=>a[2]-b[2]);return computed(()=>points.filter(([,v])=>v.value).map(([k])=>k))}return Object.assign(shortcutMethods,{greaterOrEqual,smallerOrEqual,greater(k){return useMediaQuery(()=>`(min-width: ${getValue(k,.1)})`,options)},smaller(k){return useMediaQuery(()=>`(max-width: ${getValue(k,-.1)})`,options)},between(a,b){return useMediaQuery(()=>`(min-width: ${getValue(a)}) and (max-width: ${getValue(b,-.1)})`,options)},isGreater(k){return match("min",getValue(k,.1))},isGreaterOrEqual(k){return match("min",getValue(k))},isSmaller(k){return match("max",getValue(k,-.1))},isSmallerOrEqual(k){return match("max",getValue(k))},isInBetween(a,b){return match("min",getValue(a))&&match("max",getValue(b,-.1))},current,active(){const bps=current();return computed(()=>bps.value.length===0?"":bps.value.at(strategy==="min-width"?-1:0))}})}function useResizeObserver(target,callback,options={}){const{window:window2=defaultWindow,...observerOptions}=options;let observer;const isSupported=useSupported(()=>window2&&"ResizeObserver"in window2),cleanup=()=>{observer&&(observer.disconnect(),observer=void 0)},targets=computed(()=>{const _targets=toValue(target);return Array.isArray(_targets)?_targets.map(el=>unrefElement(el)):[unrefElement(_targets)]}),stopWatch=watch(targets,els=>{if(cleanup(),isSupported.value&&window2){observer=new ResizeObserver(callback);for(const _el of els)_el&&observer.observe(_el,observerOptions)}},{immediate:!0,flush:"post"}),stop=()=>{cleanup(),stopWatch()};return tryOnScopeDispose(stop),{isSupported,stop}}function useElementBounding(target,options={}){const{reset=!0,windowResize=!0,windowScroll=!0,immediate=!0,updateTiming="sync"}=options,height=shallowRef(0),bottom=shallowRef(0),left=shallowRef(0),right=shallowRef(0),top=shallowRef(0),width=shallowRef(0),x=shallowRef(0),y=shallowRef(0);function recalculate(){const el=unrefElement(target);if(!el){reset&&(height.value=0,bottom.value=0,left.value=0,right.value=0,top.value=0,width.value=0,x.value=0,y.value=0);return}const rect=el.getBoundingClientRect();height.value=rect.height,bottom.value=rect.bottom,left.value=rect.left,right.value=rect.right,top.value=rect.top,width.value=rect.width,x.value=rect.x,y.value=rect.y}function update(){updateTiming==="sync"?recalculate():updateTiming==="next-frame"&&requestAnimationFrame(()=>recalculate())}return useResizeObserver(target,update),watch(()=>unrefElement(target),ele=>!ele&&update()),useMutationObserver(target,update,{attributeFilter:["style","class"]}),windowScroll&&useEventListener("scroll",update,{capture:!0,passive:!0}),windowResize&&useEventListener("resize",update,{passive:!0}),tryOnMounted(()=>{immediate&&update()}),{height,bottom,left,right,top,width,x,y,update}}function useElementSize(target,initialSize={width:0,height:0},options={}){const{window:window2=defaultWindow,box="content-box"}=options,isSVG=computed(()=>{var _a,_b;return(_b=(_a=unrefElement(target))==null?void 0:_a.namespaceURI)==null?void 0:_b.includes("svg")}),width=shallowRef(initialSize.width),height=shallowRef(initialSize.height),{stop:stop1}=useResizeObserver(target,([entry])=>{const boxSize=box==="border-box"?entry.borderBoxSize:box==="content-box"?entry.contentBoxSize:entry.devicePixelContentBoxSize;if(window2&&isSVG.value){const $elem=unrefElement(target);if($elem){const rect=$elem.getBoundingClientRect();width.value=rect.width,height.value=rect.height}}else if(boxSize){const formatBoxSize=toArray(boxSize);width.value=formatBoxSize.reduce((acc,{inlineSize})=>acc+inlineSize,0),height.value=formatBoxSize.reduce((acc,{blockSize})=>acc+blockSize,0)}else width.value=entry.contentRect.width,height.value=entry.contentRect.height},options);tryOnMounted(()=>{const ele=unrefElement(target);ele&&(width.value="offsetWidth"in ele?ele.offsetWidth:initialSize.width,height.value="offsetHeight"in ele?ele.offsetHeight:initialSize.height)});const stop2=watch(()=>unrefElement(target),ele=>{width.value=ele?initialSize.width:0,height.value=ele?initialSize.height:0});function stop(){stop1(),stop2()}return{width,height,stop}}function useWindowSize(options={}){const{window:window2=defaultWindow,initialWidth=Number.POSITIVE_INFINITY,initialHeight=Number.POSITIVE_INFINITY,listenOrientation=!0,includeScrollbar=!0,type="inner"}=options,width=shallowRef(initialWidth),height=shallowRef(initialHeight),update=()=>{if(window2)if(type==="outer")width.value=window2.outerWidth,height.value=window2.outerHeight;else if(type==="visual"&&window2.visualViewport){const{width:visualViewportWidth,height:visualViewportHeight,scale}=window2.visualViewport;width.value=Math.round(visualViewportWidth*scale),height.value=Math.round(visualViewportHeight*scale)}else includeScrollbar?(width.value=window2.innerWidth,height.value=window2.innerHeight):(width.value=window2.document.documentElement.clientWidth,height.value=window2.document.documentElement.clientHeight)};update(),tryOnMounted(update);const listenerOptions={passive:!0};if(useEventListener("resize",update,listenerOptions),window2&&type==="visual"&&window2.visualViewport&&useEventListener(window2.visualViewport,"resize",update,listenerOptions),listenOrientation){const matches=useMediaQuery("(orientation: portrait)");watch(matches,()=>update())}return{width,height}}export{useElementBounding as a,useWindowSize as b,useDebounceFn as c,useBreakpoints as d,useMediaQuery as e,useElementSize as f,onClickOutside as o,useEventListener as u};
